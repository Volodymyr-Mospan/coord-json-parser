(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function u(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=u(o);fetch(o.href,r)}})();var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},w={exports:{}},T=w.exports,O;function N(){return O||(O=1,function(f,l){(function(u,a){a()})(T,function(){function u(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function a(e,t,c){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){v(n.response,t,c)},n.onerror=function(){console.error("could not download file")},n.send()}function o(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var i=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof y=="object"&&y.global===y?y:void 0,L=i.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),v=i.saveAs||(typeof window!="object"||window!==i?function(){}:"download"in HTMLAnchorElement.prototype&&!L?function(e,t,c){var n=i.URL||i.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin===location.origin?r(s):o(s.href)?a(e,t,c):r(s,s.target="_blank")):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,c){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(u(e,c),t);else if(o(e))a(e,t,c);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){r(n)})}}:function(e,t,c,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return a(e,t,c);var s=e.type==="application/octet-stream",F=/constructor/i.test(i.HTMLElement)||i.safari,S=/CriOS\/[\d]+/.test(navigator.userAgent);if((S||s&&F||L)&&typeof FileReader<"u"){var g=new FileReader;g.onloadend=function(){var p=g.result;p=S?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=p:location=p,n=null},g.readAsDataURL(e)}else{var x=i.URL||i.webkitURL,E=x.createObjectURL(e);n?n.location=E:location.href=E,n=null,setTimeout(function(){x.revokeObjectURL(E)},4e4)}});i.saveAs=v.saveAs=v,f.exports=v})}(w)),w.exports}var M=N();const U=document.getElementById("fileInput"),m=document.querySelector(".coordinate_system"),B=document.getElementById("firstNum"),R=document.getElementById("output"),A=document.getElementById("changeXYBtn"),j=document.getElementById("saveBtn");let d,h=!0;U.addEventListener("change",_);B.addEventListener("change",I);A.addEventListener("click",X);j.addEventListener("click",$);function _(f){d=f.target.files[0],d&&(m.style.color="inherit",m.style.display="block",A.style.display="block",j.style.display="block",b(d))}function I(){d&&b(d)}function X(){h=!h,!(!d||!confirm("Змінити X та Y місцями?"))&&b(d)}function $(){M.saveAs(new Blob([R.textContent]),`${d.name.slice(0,d.name.indexOf("."))}.txt`)}function b(f){const l=new FileReader;l.onload=function(u){try{const a=JSON.parse(u.target.result);m.textContent=`Система координат - ${a.properties.coordSys}`,R.textContent=k(a,Number(B.value))}catch(a){console.error("Помилка парсингу JSON:",a),m.textContent="Помилка парсингу JSON:, ймовірно файл не відповідає файлу координат",m.style.color="red"}},l.readAsText(f)}function k(f,l){const u=f.coordinates[0][0];if(u)return u.reduce((a,o,r,i)=>a+=`${l+r}, ${o[h?1:0]}, ${o[h?0:1]}, ${o[2]?o[2]:"0.00"}${r===i.length-1?"":`
`}`,"")}
