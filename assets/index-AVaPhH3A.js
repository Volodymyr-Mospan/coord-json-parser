(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var Zr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vr={exports:{}},El=Vr.exports,tu;function Ml(){return tu||(tu=1,(function(t,e){(function(n,r){r()})(El,function(){function n(d,v){return typeof v>"u"?v={autoBom:!1}:typeof v!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),v={autoBom:!v}),v.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,v,_){var m=new XMLHttpRequest;m.open("GET",d),m.responseType="blob",m.onload=function(){l(m.response,v,_)},m.onerror=function(){console.error("could not download file")},m.send()}function s(d){var v=new XMLHttpRequest;v.open("HEAD",d,!1);try{v.send()}catch{}return 200<=v.status&&299>=v.status}function o(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var v=document.createEvent("MouseEvents");v.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(v)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Zr=="object"&&Zr.global===Zr?Zr:void 0,f=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!f?function(d,v,_){var m=h.URL||h.webkitURL,y=document.createElement("a");v=v||d.name||"download",y.download=v,y.rel="noopener",typeof d=="string"?(y.href=d,y.origin===location.origin?o(y):s(y.href)?r(d,v,_):o(y,y.target="_blank")):(y.href=m.createObjectURL(d),setTimeout(function(){m.revokeObjectURL(y.href)},4e4),setTimeout(function(){o(y)},0))}:"msSaveOrOpenBlob"in navigator?function(d,v,_){if(v=v||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,_),v);else if(s(d))r(d,v,_);else{var m=document.createElement("a");m.href=d,m.target="_blank",setTimeout(function(){o(m)})}}:function(d,v,_,m){if(m=m||open("","_blank"),m&&(m.document.title=m.document.body.innerText="downloading..."),typeof d=="string")return r(d,v,_);var y=d.type==="application/octet-stream",E=/constructor/i.test(h.HTMLElement)||h.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent);if((g||y&&E||f)&&typeof FileReader<"u"){var D=new FileReader;D.onloadend=function(){var M=D.result;M=g?M:M.replace(/^data:[^;]*;/,"data:attachment/file;"),m?m.location.href=M:location=M,m=null},D.readAsDataURL(d)}else{var b=h.URL||h.webkitURL,S=b.createObjectURL(d);m?m.location=S:location.href=S,m=null,setTimeout(function(){b.revokeObjectURL(S)},4e4)}});h.saveAs=l.saveAs=l,t.exports=l})})(Vr)),Vr.exports}var Al=Ml();function Cl(t,e,n){const r=t.length;return!t||!r?"":(oh(t[0],t[r-1])&&t.pop(),t.map((s,o)=>{const h=s[n?1:0],f=s[n?0:1],l=s[2]?s[2]:"0.00";return`${e+o}, ${h}, ${f}, ${l}`}).join(`
`))}function oh(t,e){if(t===e)return!0;if(t==null||typeof t!="object"||e==null||typeof e!="object")return!1;let n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(let s of n)if(!r.includes(s)||!oh(t[s],e[s]))return!1;return!0}function Za(t,e,n,r){return new Promise((s,o)=>{const h=new FileReader;h.onload=function(f){try{const l=JSON.parse(f.target.result),d=bl(l.coordinates);e.textContent=`Система координат - ${l.properties.coordSys}`,n.textContent=Cl(d,Number(firstNum.value),r),s(d)}catch(l){console.error("Помилка парсингу JSON:",l),e.textContent="Помилка парсингу JSON, ймовірно файл не відповідає файлу координат",e.style.color="red",o(l)}},h.readAsText(t)})}function bl(t){const e=[];return(function n(r){if(Array.isArray(r))if(r.length&&typeof r[0]=="number")e.push(r);else for(const s of r)n(s)})(t),e}var Wn={exports:{}};var xl=Wn.exports,eu;function Sl(){return eu||(eu=1,(function(t,e){(function(n,r){r(e)})(xl,(function(n){var r="1.9.4";function s(i){var a,u,c,p;for(u=1,c=arguments.length;u<c;u++){p=arguments[u];for(a in p)i[a]=p[a]}return i}var o=Object.create||(function(){function i(){}return function(a){return i.prototype=a,new i}})();function h(i,a){var u=Array.prototype.slice;if(i.bind)return i.bind.apply(i,u.call(arguments,1));var c=u.call(arguments,2);return function(){return i.apply(a,c.length?c.concat(u.call(arguments)):arguments)}}var f=0;function l(i){return"_leaflet_id"in i||(i._leaflet_id=++f),i._leaflet_id}function d(i,a,u){var c,p,w,P;return P=function(){c=!1,p&&(w.apply(u,p),p=!1)},w=function(){c?p=arguments:(i.apply(u,arguments),setTimeout(P,a),c=!0)},w}function v(i,a,u){var c=a[1],p=a[0],w=c-p;return i===c&&u?i:((i-p)%w+w)%w+p}function _(){return!1}function m(i,a){if(a===!1)return i;var u=Math.pow(10,a===void 0?6:a);return Math.round(i*u)/u}function y(i){return i.trim?i.trim():i.replace(/^\s+|\s+$/g,"")}function E(i){return y(i).split(/\s+/)}function g(i,a){Object.prototype.hasOwnProperty.call(i,"options")||(i.options=i.options?o(i.options):{});for(var u in a)i.options[u]=a[u];return i.options}function D(i,a,u){var c=[];for(var p in i)c.push(encodeURIComponent(u?p.toUpperCase():p)+"="+encodeURIComponent(i[p]));return(!a||a.indexOf("?")===-1?"?":"&")+c.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function S(i,a){return i.replace(b,function(u,c){var p=a[c];if(p===void 0)throw new Error("No value provided for variable "+u);return typeof p=="function"&&(p=p(a)),p})}var M=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"};function F(i,a){for(var u=0;u<i.length;u++)if(i[u]===a)return u;return-1}var C="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function A(i){return window["webkit"+i]||window["moz"+i]||window["ms"+i]}var T=0;function N(i){var a=+new Date,u=Math.max(0,16-(a-T));return T=a+u,window.setTimeout(i,u)}var I=window.requestAnimationFrame||A("RequestAnimationFrame")||N,q=window.cancelAnimationFrame||A("CancelAnimationFrame")||A("CancelRequestAnimationFrame")||function(i){window.clearTimeout(i)};function k(i,a,u){if(u&&I===N)i.call(a);else return I.call(window,h(i,a))}function W(i){i&&q.call(window,i)}var at={__proto__:null,extend:s,create:o,bind:h,get lastId(){return f},stamp:l,throttle:d,wrapNum:v,falseFn:_,formatNum:m,trim:y,splitWords:E,setOptions:g,getParamString:D,template:S,isArray:M,indexOf:F,emptyImageUrl:C,requestFn:I,cancelFn:q,requestAnimFrame:k,cancelAnimFrame:W};function ot(){}ot.extend=function(i){var a=function(){g(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},u=a.__super__=this.prototype,c=o(u);c.constructor=a,a.prototype=c;for(var p in this)Object.prototype.hasOwnProperty.call(this,p)&&p!=="prototype"&&p!=="__super__"&&(a[p]=this[p]);return i.statics&&s(a,i.statics),i.includes&&(ut(i.includes),s.apply(null,[c].concat(i.includes))),s(c,i),delete c.statics,delete c.includes,c.options&&(c.options=u.options?o(u.options):{},s(c.options,i.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){u.callInitHooks&&u.callInitHooks.call(this),this._initHooksCalled=!0;for(var w=0,P=c._initHooks.length;w<P;w++)c._initHooks[w].call(this)}},a},ot.include=function(i){var a=this.prototype.options;return s(this.prototype,i),i.options&&(this.prototype.options=a,this.mergeOptions(i.options)),this},ot.mergeOptions=function(i){return s(this.prototype.options,i),this},ot.addInitHook=function(i){var a=Array.prototype.slice.call(arguments,1),u=typeof i=="function"?i:function(){this[i].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(u),this};function ut(i){if(!(typeof L>"u"||!L||!L.Mixin)){i=M(i)?i:[i];for(var a=0;a<i.length;a++)i[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(i,a,u){if(typeof i=="object")for(var c in i)this._on(c,i[c],a);else{i=E(i);for(var p=0,w=i.length;p<w;p++)this._on(i[p],a,u)}return this},off:function(i,a,u){if(!arguments.length)delete this._events;else if(typeof i=="object")for(var c in i)this._off(c,i[c],a);else{i=E(i);for(var p=arguments.length===1,w=0,P=i.length;w<P;w++)p?this._off(i[w]):this._off(i[w],a,u)}return this},_on:function(i,a,u,c){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(i,a,u)===!1){u===this&&(u=void 0);var p={fn:a,ctx:u};c&&(p.once=!0),this._events=this._events||{},this._events[i]=this._events[i]||[],this._events[i].push(p)}},_off:function(i,a,u){var c,p,w;if(this._events&&(c=this._events[i],!!c)){if(arguments.length===1){if(this._firingCount)for(p=0,w=c.length;p<w;p++)c[p].fn=_;delete this._events[i];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var P=this._listens(i,a,u);if(P!==!1){var O=c[P];this._firingCount&&(O.fn=_,this._events[i]=c=c.slice()),c.splice(P,1)}}},fire:function(i,a,u){if(!this.listens(i,u))return this;var c=s({},a,{type:i,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var p=this._events[i];if(p){this._firingCount=this._firingCount+1||1;for(var w=0,P=p.length;w<P;w++){var O=p[w],G=O.fn;O.once&&this.off(i,G,O.ctx),G.call(O.ctx||this,c)}this._firingCount--}}return u&&this._propagateEvent(c),this},listens:function(i,a,u,c){typeof i!="string"&&console.warn('"string" type argument expected');var p=a;typeof a!="function"&&(c=!!a,p=void 0,u=void 0);var w=this._events&&this._events[i];if(w&&w.length&&this._listens(i,p,u)!==!1)return!0;if(c){for(var P in this._eventParents)if(this._eventParents[P].listens(i,a,u,c))return!0}return!1},_listens:function(i,a,u){if(!this._events)return!1;var c=this._events[i]||[];if(!a)return!!c.length;u===this&&(u=void 0);for(var p=0,w=c.length;p<w;p++)if(c[p].fn===a&&c[p].ctx===u)return p;return!1},once:function(i,a,u){if(typeof i=="object")for(var c in i)this._on(c,i[c],a,!0);else{i=E(i);for(var p=0,w=i.length;p<w;p++)this._on(i[p],a,u,!0)}return this},addEventParent:function(i){return this._eventParents=this._eventParents||{},this._eventParents[l(i)]=i,this},removeEventParent:function(i){return this._eventParents&&delete this._eventParents[l(i)],this},_propagateEvent:function(i){for(var a in this._eventParents)this._eventParents[a].fire(i.type,s({layer:i.target,propagatedFrom:i.target},i),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var _t=ot.extend(K);function J(i,a,u){this.x=u?Math.round(i):i,this.y=u?Math.round(a):a}var mt=Math.trunc||function(i){return i>0?Math.floor(i):Math.ceil(i)};J.prototype={clone:function(){return new J(this.x,this.y)},add:function(i){return this.clone()._add(Q(i))},_add:function(i){return this.x+=i.x,this.y+=i.y,this},subtract:function(i){return this.clone()._subtract(Q(i))},_subtract:function(i){return this.x-=i.x,this.y-=i.y,this},divideBy:function(i){return this.clone()._divideBy(i)},_divideBy:function(i){return this.x/=i,this.y/=i,this},multiplyBy:function(i){return this.clone()._multiplyBy(i)},_multiplyBy:function(i){return this.x*=i,this.y*=i,this},scaleBy:function(i){return new J(this.x*i.x,this.y*i.y)},unscaleBy:function(i){return new J(this.x/i.x,this.y/i.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=mt(this.x),this.y=mt(this.y),this},distanceTo:function(i){i=Q(i);var a=i.x-this.x,u=i.y-this.y;return Math.sqrt(a*a+u*u)},equals:function(i){return i=Q(i),i.x===this.x&&i.y===this.y},contains:function(i){return i=Q(i),Math.abs(i.x)<=Math.abs(this.x)&&Math.abs(i.y)<=Math.abs(this.y)},toString:function(){return"Point("+m(this.x)+", "+m(this.y)+")"}};function Q(i,a,u){return i instanceof J?i:M(i)?new J(i[0],i[1]):i==null?i:typeof i=="object"&&"x"in i&&"y"in i?new J(i.x,i.y):new J(i,a,u)}function ft(i,a){if(i)for(var u=a?[i,a]:i,c=0,p=u.length;c<p;c++)this.extend(u[c])}ft.prototype={extend:function(i){var a,u;if(!i)return this;if(i instanceof J||typeof i[0]=="number"||"x"in i)a=u=Q(i);else if(i=wt(i),a=i.min,u=i.max,!a||!u)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=u.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(u.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(u.y,this.max.y)),this},getCenter:function(i){return Q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,i)},getBottomLeft:function(){return Q(this.min.x,this.max.y)},getTopRight:function(){return Q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(i){var a,u;return typeof i[0]=="number"||i instanceof J?i=Q(i):i=wt(i),i instanceof ft?(a=i.min,u=i.max):a=u=i,a.x>=this.min.x&&u.x<=this.max.x&&a.y>=this.min.y&&u.y<=this.max.y},intersects:function(i){i=wt(i);var a=this.min,u=this.max,c=i.min,p=i.max,w=p.x>=a.x&&c.x<=u.x,P=p.y>=a.y&&c.y<=u.y;return w&&P},overlaps:function(i){i=wt(i);var a=this.min,u=this.max,c=i.min,p=i.max,w=p.x>a.x&&c.x<u.x,P=p.y>a.y&&c.y<u.y;return w&&P},isValid:function(){return!!(this.min&&this.max)},pad:function(i){var a=this.min,u=this.max,c=Math.abs(a.x-u.x)*i,p=Math.abs(a.y-u.y)*i;return wt(Q(a.x-c,a.y-p),Q(u.x+c,u.y+p))},equals:function(i){return i?(i=wt(i),this.min.equals(i.getTopLeft())&&this.max.equals(i.getBottomRight())):!1}};function wt(i,a){return!i||i instanceof ft?i:new ft(i,a)}function Et(i,a){if(i)for(var u=a?[i,a]:i,c=0,p=u.length;c<p;c++)this.extend(u[c])}Et.prototype={extend:function(i){var a=this._southWest,u=this._northEast,c,p;if(i instanceof gt)c=i,p=i;else if(i instanceof Et){if(c=i._southWest,p=i._northEast,!c||!p)return this}else return i?this.extend(ct(i)||At(i)):this;return!a&&!u?(this._southWest=new gt(c.lat,c.lng),this._northEast=new gt(p.lat,p.lng)):(a.lat=Math.min(c.lat,a.lat),a.lng=Math.min(c.lng,a.lng),u.lat=Math.max(p.lat,u.lat),u.lng=Math.max(p.lng,u.lng)),this},pad:function(i){var a=this._southWest,u=this._northEast,c=Math.abs(a.lat-u.lat)*i,p=Math.abs(a.lng-u.lng)*i;return new Et(new gt(a.lat-c,a.lng-p),new gt(u.lat+c,u.lng+p))},getCenter:function(){return new gt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new gt(this.getNorth(),this.getWest())},getSouthEast:function(){return new gt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(i){typeof i[0]=="number"||i instanceof gt||"lat"in i?i=ct(i):i=At(i);var a=this._southWest,u=this._northEast,c,p;return i instanceof Et?(c=i.getSouthWest(),p=i.getNorthEast()):c=p=i,c.lat>=a.lat&&p.lat<=u.lat&&c.lng>=a.lng&&p.lng<=u.lng},intersects:function(i){i=At(i);var a=this._southWest,u=this._northEast,c=i.getSouthWest(),p=i.getNorthEast(),w=p.lat>=a.lat&&c.lat<=u.lat,P=p.lng>=a.lng&&c.lng<=u.lng;return w&&P},overlaps:function(i){i=At(i);var a=this._southWest,u=this._northEast,c=i.getSouthWest(),p=i.getNorthEast(),w=p.lat>a.lat&&c.lat<u.lat,P=p.lng>a.lng&&c.lng<u.lng;return w&&P},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(i,a){return i?(i=At(i),this._southWest.equals(i.getSouthWest(),a)&&this._northEast.equals(i.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function At(i,a){return i instanceof Et?i:new Et(i,a)}function gt(i,a,u){if(isNaN(i)||isNaN(a))throw new Error("Invalid LatLng object: ("+i+", "+a+")");this.lat=+i,this.lng=+a,u!==void 0&&(this.alt=+u)}gt.prototype={equals:function(i,a){if(!i)return!1;i=ct(i);var u=Math.max(Math.abs(this.lat-i.lat),Math.abs(this.lng-i.lng));return u<=(a===void 0?1e-9:a)},toString:function(i){return"LatLng("+m(this.lat,i)+", "+m(this.lng,i)+")"},distanceTo:function(i){return qt.distance(this,ct(i))},wrap:function(){return qt.wrapLatLng(this)},toBounds:function(i){var a=180*i/40075017,u=a/Math.cos(Math.PI/180*this.lat);return At([this.lat-a,this.lng-u],[this.lat+a,this.lng+u])},clone:function(){return new gt(this.lat,this.lng,this.alt)}};function ct(i,a,u){return i instanceof gt?i:M(i)&&typeof i[0]!="object"?i.length===3?new gt(i[0],i[1],i[2]):i.length===2?new gt(i[0],i[1]):null:i==null?i:typeof i=="object"&&"lat"in i?new gt(i.lat,"lng"in i?i.lng:i.lon,i.alt):a===void 0?null:new gt(i,a,u)}var St={latLngToPoint:function(i,a){var u=this.projection.project(i),c=this.scale(a);return this.transformation._transform(u,c)},pointToLatLng:function(i,a){var u=this.scale(a),c=this.transformation.untransform(i,u);return this.projection.unproject(c)},project:function(i){return this.projection.project(i)},unproject:function(i){return this.projection.unproject(i)},scale:function(i){return 256*Math.pow(2,i)},zoom:function(i){return Math.log(i/256)/Math.LN2},getProjectedBounds:function(i){if(this.infinite)return null;var a=this.projection.bounds,u=this.scale(i),c=this.transformation.transform(a.min,u),p=this.transformation.transform(a.max,u);return new ft(c,p)},infinite:!1,wrapLatLng:function(i){var a=this.wrapLng?v(i.lng,this.wrapLng,!0):i.lng,u=this.wrapLat?v(i.lat,this.wrapLat,!0):i.lat,c=i.alt;return new gt(u,a,c)},wrapLatLngBounds:function(i){var a=i.getCenter(),u=this.wrapLatLng(a),c=a.lat-u.lat,p=a.lng-u.lng;if(c===0&&p===0)return i;var w=i.getSouthWest(),P=i.getNorthEast(),O=new gt(w.lat-c,w.lng-p),G=new gt(P.lat-c,P.lng-p);return new Et(O,G)}},qt=s({},St,{wrapLng:[-180,180],R:6371e3,distance:function(i,a){var u=Math.PI/180,c=i.lat*u,p=a.lat*u,w=Math.sin((a.lat-i.lat)*u/2),P=Math.sin((a.lng-i.lng)*u/2),O=w*w+Math.cos(c)*Math.cos(p)*P*P,G=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*G}}),Ot=6378137,Nt={R:Ot,MAX_LATITUDE:85.0511287798,project:function(i){var a=Math.PI/180,u=this.MAX_LATITUDE,c=Math.max(Math.min(u,i.lat),-u),p=Math.sin(c*a);return new J(this.R*i.lng*a,this.R*Math.log((1+p)/(1-p))/2)},unproject:function(i){var a=180/Math.PI;return new gt((2*Math.atan(Math.exp(i.y/this.R))-Math.PI/2)*a,i.x*a/this.R)},bounds:(function(){var i=Ot*Math.PI;return new ft([-i,-i],[i,i])})()};function pe(i,a,u,c){if(M(i)){this._a=i[0],this._b=i[1],this._c=i[2],this._d=i[3];return}this._a=i,this._b=a,this._c=u,this._d=c}pe.prototype={transform:function(i,a){return this._transform(i.clone(),a)},_transform:function(i,a){return a=a||1,i.x=a*(this._a*i.x+this._b),i.y=a*(this._c*i.y+this._d),i},untransform:function(i,a){return a=a||1,new J((i.x/a-this._b)/this._a,(i.y/a-this._d)/this._c)}};function Ht(i,a,u,c){return new pe(i,a,u,c)}var Lt=s({},qt,{code:"EPSG:3857",projection:Nt,transformation:(function(){var i=.5/(Math.PI*Nt.R);return Ht(i,.5,-i,.5)})()}),ne=s({},Lt,{code:"EPSG:900913"});function Me(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Ge(i,a){var u="",c,p,w,P,O,G;for(c=0,w=i.length;c<w;c++){for(O=i[c],p=0,P=O.length;p<P;p++)G=O[p],u+=(p?"L":"M")+G.x+" "+G.y;u+=a?lt.svg?"z":"x":""}return u||"M0 0"}var Oe=document.documentElement.style,je="ActiveXObject"in window,gi=je&&!document.addEventListener,ji="msLaunchUri"in navigator&&!("documentMode"in document),bn=ze("webkit"),xn=ze("android"),x=ze("android 2")||ze("android 3"),B=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),R=xn&&ze("Google")&&B<537&&!("AudioNode"in window),Z=!!window.opera,X=!ji&&ze("chrome"),U=ze("gecko")&&!bn&&!Z&&!je,tt=!X&&ze("safari"),Y=ze("phantom"),st="OTransition"in Oe,j=navigator.platform.indexOf("Win")===0,vt=je&&"transition"in Oe,Pt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!x,jt="MozPerspective"in Oe,ge=!window.L_DISABLE_3D&&(vt||Pt||jt)&&!st&&!Y,Kt=typeof orientation<"u"||ze("mobile"),be=Kt&&bn,xe=Kt&&Pt,ui=!window.PointerEvent&&window.MSPointerEvent,Vi=!!(window.PointerEvent||ui),hi="ontouchstart"in window||!!window.TouchEvent,Xi=!window.L_NO_TOUCH&&(hi||Vi),Ps=Kt&&Z,Fs=Kt&&U,Ns=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ts=(function(){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("testPassiveEventSupport",_,a),window.removeEventListener("testPassiveEventSupport",_,a)}catch{}return i})(),Bs=(function(){return!!document.createElement("canvas").getContext})(),Sn=!!(document.createElementNS&&Me("svg").createSVGRect),Ls=!!Sn&&(function(){var i=document.createElement("div");return i.innerHTML="<svg/>",(i.firstChild&&i.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Is=!Sn&&(function(){try{var i=document.createElement("div");i.innerHTML='<v:shape adj="1"/>';var a=i.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}})(),Os=navigator.platform.indexOf("Mac")===0,Gs=navigator.platform.indexOf("Linux")===0;function ze(i){return navigator.userAgent.toLowerCase().indexOf(i)>=0}var lt={ie:je,ielt9:gi,edge:ji,webkit:bn,android:xn,android23:x,androidStock:R,opera:Z,chrome:X,gecko:U,safari:tt,phantom:Y,opera12:st,win:j,ie3d:vt,webkit3d:Pt,gecko3d:jt,any3d:ge,mobile:Kt,mobileWebkit:be,mobileWebkit3d:xe,msPointer:ui,pointer:Vi,touch:Xi,touchNative:hi,mobileOpera:Ps,mobileGecko:Fs,retina:Ns,passiveEvents:Ts,canvas:Bs,svg:Sn,vml:Is,inlineSvg:Ls,mac:Os,linux:Gs},pr=lt.msPointer?"MSPointerDown":"pointerdown",gr=lt.msPointer?"MSPointerMove":"pointermove",yr=lt.msPointer?"MSPointerUp":"pointerup",wr=lt.msPointer?"MSPointerCancel":"pointercancel",Pn={touchstart:pr,touchmove:gr,touchend:yr,touchcancel:wr},Dr={touchstart:It,touchmove:ti,touchend:ti,touchcancel:ti},yi={},Er=!1;function zs(i,a,u){return a==="touchstart"&&qs(),Dr[a]?(u=Dr[a].bind(this,u),i.addEventListener(Pn[a],u,!1),u):(console.warn("wrong event specified:",a),_)}function Rs(i,a,u){if(!Pn[a]){console.warn("wrong event specified:",a);return}i.removeEventListener(Pn[a],u,!1)}function ks(i){yi[i.pointerId]=i}function Zs(i){yi[i.pointerId]&&(yi[i.pointerId]=i)}function Mr(i){delete yi[i.pointerId]}function qs(){Er||(document.addEventListener(pr,ks,!0),document.addEventListener(gr,Zs,!0),document.addEventListener(yr,Mr,!0),document.addEventListener(wr,Mr,!0),Er=!0)}function ti(i,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var u in yi)a.touches.push(yi[u]);a.changedTouches=[a],i(a)}}function It(i,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&_e(a),ti(i,a)}function ye(i){var a={},u,c;for(c in i)u=i[c],a[c]=u&&u.bind?u.bind(i):u;return i=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var Us=200;function Ki(i,a){i.addEventListener("dblclick",a);var u=0,c;function p(w){if(w.detail!==1){c=w.detail;return}if(!(w.pointerType==="mouse"||w.sourceCapabilities&&!w.sourceCapabilities.firesTouchEvents)){var P=vo(w);if(!(P.some(function(G){return G instanceof HTMLLabelElement&&G.attributes.for})&&!P.some(function(G){return G instanceof HTMLInputElement||G instanceof HTMLSelectElement}))){var O=Date.now();O-u<=Us?(c++,c===2&&a(ye(w))):c=1,u=O}}}return i.addEventListener("click",p),{dblclick:a,simDblclick:p}}function Li(i,a){i.removeEventListener("dblclick",a.dblclick),i.removeEventListener("click",a.simDblclick)}var Fn=br(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Nn=br(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),lo=Nn==="webkitTransition"||Nn==="OTransition"?Nn+"End":"transitionend";function co(i){return typeof i=="string"?document.getElementById(i):i}function Tn(i,a){var u=i.style[a]||i.currentStyle&&i.currentStyle[a];if((!u||u==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(i,null);u=c?c[a]:null}return u==="auto"?null:u}function Tt(i,a,u){var c=document.createElement(i);return c.className=a||"",u&&u.appendChild(c),c}function Vt(i){var a=i.parentNode;a&&a.removeChild(i)}function Ar(i){for(;i.firstChild;)i.removeChild(i.firstChild)}function Ji(i){var a=i.parentNode;a&&a.lastChild!==i&&a.appendChild(i)}function Yi(i){var a=i.parentNode;a&&a.firstChild!==i&&a.insertBefore(i,a.firstChild)}function Ws(i,a){if(i.classList!==void 0)return i.classList.contains(a);var u=Cr(i);return u.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(u)}function Ct(i,a){if(i.classList!==void 0)for(var u=E(a),c=0,p=u.length;c<p;c++)i.classList.add(u[c]);else if(!Ws(i,a)){var w=Cr(i);$s(i,(w?w+" ":"")+a)}}function te(i,a){i.classList!==void 0?i.classList.remove(a):$s(i,y((" "+Cr(i)+" ").replace(" "+a+" "," ")))}function $s(i,a){i.className.baseVal===void 0?i.className=a:i.className.baseVal=a}function Cr(i){return i.correspondingElement&&(i=i.correspondingElement),i.className.baseVal===void 0?i.className:i.className.baseVal}function Re(i,a){"opacity"in i.style?i.style.opacity=a:"filter"in i.style&&bf(i,a)}function bf(i,a){var u=!1,c="DXImageTransform.Microsoft.Alpha";try{u=i.filters.item(c)}catch{if(a===1)return}a=Math.round(a*100),u?(u.Enabled=a!==100,u.Opacity=a):i.style.filter+=" progid:"+c+"(opacity="+a+")"}function br(i){for(var a=document.documentElement.style,u=0;u<i.length;u++)if(i[u]in a)return i[u];return!1}function Ii(i,a,u){var c=a||new J(0,0);i.style[Fn]=(lt.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(u?" scale("+u+")":"")}function re(i,a){i._leaflet_pos=a,lt.any3d?Ii(i,a):(i.style.left=a.x+"px",i.style.top=a.y+"px")}function Oi(i){return i._leaflet_pos||new J(0,0)}var Bn,Ln,Hs;if("onselectstart"in document)Bn=function(){Mt(window,"selectstart",_e)},Ln=function(){Zt(window,"selectstart",_e)};else{var In=br(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Bn=function(){if(In){var i=document.documentElement.style;Hs=i[In],i[In]="none"}},Ln=function(){In&&(document.documentElement.style[In]=Hs,Hs=void 0)}}function js(){Mt(window,"dragstart",_e)}function Vs(){Zt(window,"dragstart",_e)}var xr,Xs;function Ks(i){for(;i.tabIndex===-1;)i=i.parentNode;i.style&&(Sr(),xr=i,Xs=i.style.outlineStyle,i.style.outlineStyle="none",Mt(window,"keydown",Sr))}function Sr(){xr&&(xr.style.outlineStyle=Xs,xr=void 0,Xs=void 0,Zt(window,"keydown",Sr))}function _o(i){do i=i.parentNode;while((!i.offsetWidth||!i.offsetHeight)&&i!==document.body);return i}function Js(i){var a=i.getBoundingClientRect();return{x:a.width/i.offsetWidth||1,y:a.height/i.offsetHeight||1,boundingClientRect:a}}var xf={__proto__:null,TRANSFORM:Fn,TRANSITION:Nn,TRANSITION_END:lo,get:co,getStyle:Tn,create:Tt,remove:Vt,empty:Ar,toFront:Ji,toBack:Yi,hasClass:Ws,addClass:Ct,removeClass:te,setClass:$s,getClass:Cr,setOpacity:Re,testProp:br,setTransform:Ii,setPosition:re,getPosition:Oi,get disableTextSelection(){return Bn},get enableTextSelection(){return Ln},disableImageDrag:js,enableImageDrag:Vs,preventOutline:Ks,restoreOutline:Sr,getSizedParentNode:_o,getScale:Js};function Mt(i,a,u,c){if(a&&typeof a=="object")for(var p in a)Qs(i,p,a[p],u);else{a=E(a);for(var w=0,P=a.length;w<P;w++)Qs(i,a[w],u,c)}return this}var ei="_leaflet_events";function Zt(i,a,u,c){if(arguments.length===1)mo(i),delete i[ei];else if(a&&typeof a=="object")for(var p in a)ta(i,p,a[p],u);else if(a=E(a),arguments.length===2)mo(i,function(O){return F(a,O)!==-1});else for(var w=0,P=a.length;w<P;w++)ta(i,a[w],u,c);return this}function mo(i,a){for(var u in i[ei]){var c=u.split(/\d/)[0];(!a||a(c))&&ta(i,c,null,null,u)}}var Ys={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Qs(i,a,u,c){var p=a+l(u)+(c?"_"+l(c):"");if(i[ei]&&i[ei][p])return this;var w=function(O){return u.call(c||i,O||window.event)},P=w;!lt.touchNative&&lt.pointer&&a.indexOf("touch")===0?w=zs(i,a,w):lt.touch&&a==="dblclick"?w=Ki(i,w):"addEventListener"in i?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?i.addEventListener(Ys[a]||a,w,lt.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(w=function(O){O=O||window.event,ia(i,O)&&P(O)},i.addEventListener(Ys[a],w,!1)):i.addEventListener(a,P,!1):i.attachEvent("on"+a,w),i[ei]=i[ei]||{},i[ei][p]=w}function ta(i,a,u,c,p){p=p||a+l(u)+(c?"_"+l(c):"");var w=i[ei]&&i[ei][p];if(!w)return this;!lt.touchNative&&lt.pointer&&a.indexOf("touch")===0?Rs(i,a,w):lt.touch&&a==="dblclick"?Li(i,w):"removeEventListener"in i?i.removeEventListener(Ys[a]||a,w,!1):i.detachEvent("on"+a,w),i[ei][p]=null}function Gi(i){return i.stopPropagation?i.stopPropagation():i.originalEvent?i.originalEvent._stopped=!0:i.cancelBubble=!0,this}function ea(i){return Qs(i,"wheel",Gi),this}function On(i){return Mt(i,"mousedown touchstart dblclick contextmenu",Gi),i._leaflet_disable_click=!0,this}function _e(i){return i.preventDefault?i.preventDefault():i.returnValue=!1,this}function zi(i){return _e(i),Gi(i),this}function vo(i){if(i.composedPath)return i.composedPath();for(var a=[],u=i.target;u;)a.push(u),u=u.parentNode;return a}function po(i,a){if(!a)return new J(i.clientX,i.clientY);var u=Js(a),c=u.boundingClientRect;return new J((i.clientX-c.left)/u.x-a.clientLeft,(i.clientY-c.top)/u.y-a.clientTop)}var Sf=lt.linux&&lt.chrome?window.devicePixelRatio:lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function go(i){return lt.edge?i.wheelDeltaY/2:i.deltaY&&i.deltaMode===0?-i.deltaY/Sf:i.deltaY&&i.deltaMode===1?-i.deltaY*20:i.deltaY&&i.deltaMode===2?-i.deltaY*60:i.deltaX||i.deltaZ?0:i.wheelDelta?(i.wheelDeltaY||i.wheelDelta)/2:i.detail&&Math.abs(i.detail)<32765?-i.detail*20:i.detail?i.detail/-32765*60:0}function ia(i,a){var u=a.relatedTarget;if(!u)return!0;try{for(;u&&u!==i;)u=u.parentNode}catch{return!1}return u!==i}var Pf={__proto__:null,on:Mt,off:Zt,stopPropagation:Gi,disableScrollPropagation:ea,disableClickPropagation:On,preventDefault:_e,stop:zi,getPropagationPath:vo,getMousePosition:po,getWheelDelta:go,isExternalTarget:ia,addListener:Mt,removeListener:Zt},yo=_t.extend({run:function(i,a,u,c){this.stop(),this._el=i,this._inProgress=!0,this._duration=u||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=Oi(i),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=k(this._animate,this),this._step()},_step:function(i){var a=+new Date-this._startTime,u=this._duration*1e3;a<u?this._runFrame(this._easeOut(a/u),i):(this._runFrame(1),this._complete())},_runFrame:function(i,a){var u=this._startPos.add(this._offset.multiplyBy(i));a&&u._round(),re(this._el,u),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(i){return 1-Math.pow(1-i,this._easeOutPower)}}),Ft=_t.extend({options:{crs:Lt,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(i,a){a=g(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(i),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(ct(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Nn&&lt.any3d&&!lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Mt(this._proxy,lo,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(i,a,u){if(a=a===void 0?this._zoom:this._limitZoom(a),i=this._limitCenter(ct(i),a,this.options.maxBounds),u=u||{},this._stop(),this._loaded&&!u.reset&&u!==!0){u.animate!==void 0&&(u.zoom=s({animate:u.animate},u.zoom),u.pan=s({animate:u.animate,duration:u.duration},u.pan));var c=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(i,a,u.zoom):this._tryAnimatedPan(i,u.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(i,a,u.pan&&u.pan.noMoveStart),this},setZoom:function(i,a){return this._loaded?this.setView(this.getCenter(),i,{zoom:a}):(this._zoom=i,this)},zoomIn:function(i,a){return i=i||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+i,a)},zoomOut:function(i,a){return i=i||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-i,a)},setZoomAround:function(i,a,u){var c=this.getZoomScale(a),p=this.getSize().divideBy(2),w=i instanceof J?i:this.latLngToContainerPoint(i),P=w.subtract(p).multiplyBy(1-1/c),O=this.containerPointToLatLng(p.add(P));return this.setView(O,a,{zoom:u})},_getBoundsCenterZoom:function(i,a){a=a||{},i=i.getBounds?i.getBounds():At(i);var u=Q(a.paddingTopLeft||a.padding||[0,0]),c=Q(a.paddingBottomRight||a.padding||[0,0]),p=this.getBoundsZoom(i,!1,u.add(c));if(p=typeof a.maxZoom=="number"?Math.min(a.maxZoom,p):p,p===1/0)return{center:i.getCenter(),zoom:p};var w=c.subtract(u).divideBy(2),P=this.project(i.getSouthWest(),p),O=this.project(i.getNorthEast(),p),G=this.unproject(P.add(O).divideBy(2).add(w),p);return{center:G,zoom:p}},fitBounds:function(i,a){if(i=At(i),!i.isValid())throw new Error("Bounds are not valid.");var u=this._getBoundsCenterZoom(i,a);return this.setView(u.center,u.zoom,a)},fitWorld:function(i){return this.fitBounds([[-90,-180],[90,180]],i)},panTo:function(i,a){return this.setView(i,this._zoom,{pan:a})},panBy:function(i,a){if(i=Q(i).round(),a=a||{},!i.x&&!i.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(i))return this._resetView(this.unproject(this.project(this.getCenter()).add(i)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new yo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){Ct(this._mapPane,"leaflet-pan-anim");var u=this._getMapPanePos().subtract(i).round();this._panAnim.run(this._mapPane,u,a.duration||.25,a.easeLinearity)}else this._rawPanBy(i),this.fire("move").fire("moveend");return this},flyTo:function(i,a,u){if(u=u||{},u.animate===!1||!lt.any3d)return this.setView(i,a,u);this._stop();var c=this.project(this.getCenter()),p=this.project(i),w=this.getSize(),P=this._zoom;i=ct(i),a=a===void 0?P:a;var O=Math.max(w.x,w.y),G=O*this.getZoomScale(P,a),H=p.distanceTo(c)||1,rt=1.42,yt=rt*rt;function xt(se){var kr=se?-1:1,pl=se?G:O,gl=G*G-O*O+kr*yt*yt*H*H,yl=2*pl*yt*H,da=gl/yl,Qo=Math.sqrt(da*da+1)-da,wl=Qo<1e-9?-18:Math.log(Qo);return wl}function Ae(se){return(Math.exp(se)-Math.exp(-se))/2}function le(se){return(Math.exp(se)+Math.exp(-se))/2}function Ze(se){return Ae(se)/le(se)}var Se=xt(0);function sn(se){return O*(le(Se)/le(Se+rt*se))}function dl(se){return O*(le(Se)*Ze(Se+rt*se)-Ae(Se))/yt}function _l(se){return 1-Math.pow(1-se,1.5)}var ml=Date.now(),Jo=(xt(1)-Se)/rt,vl=u.duration?1e3*u.duration:1e3*Jo*.8;function Yo(){var se=(Date.now()-ml)/vl,kr=_l(se)*Jo;se<=1?(this._flyToFrame=k(Yo,this),this._move(this.unproject(c.add(p.subtract(c).multiplyBy(dl(kr)/H)),P),this.getScaleZoom(O/sn(kr),P),{flyTo:!0})):this._move(i,a)._moveEnd(!0)}return this._moveStart(!0,u.noMoveStart),Yo.call(this),this},flyToBounds:function(i,a){var u=this._getBoundsCenterZoom(i,a);return this.flyTo(u.center,u.zoom,a)},setMaxBounds:function(i){return i=At(i),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),i.isValid()?(this.options.maxBounds=i,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(i){var a=this.options.minZoom;return this.options.minZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(i):this},setMaxZoom:function(i){var a=this.options.maxZoom;return this.options.maxZoom=i,this._loaded&&a!==i&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(i):this},panInsideBounds:function(i,a){this._enforcingBounds=!0;var u=this.getCenter(),c=this._limitCenter(u,this._zoom,At(i));return u.equals(c)||this.panTo(c,a),this._enforcingBounds=!1,this},panInside:function(i,a){a=a||{};var u=Q(a.paddingTopLeft||a.padding||[0,0]),c=Q(a.paddingBottomRight||a.padding||[0,0]),p=this.project(this.getCenter()),w=this.project(i),P=this.getPixelBounds(),O=wt([P.min.add(u),P.max.subtract(c)]),G=O.getSize();if(!O.contains(w)){this._enforcingBounds=!0;var H=w.subtract(O.getCenter()),rt=O.extend(w).getSize().subtract(G);p.x+=H.x<0?-rt.x:rt.x,p.y+=H.y<0?-rt.y:rt.y,this.panTo(this.unproject(p),a),this._enforcingBounds=!1}return this},invalidateSize:function(i){if(!this._loaded)return this;i=s({animate:!1,pan:!0},i===!0?{animate:!0}:i);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var u=this.getSize(),c=a.divideBy(2).round(),p=u.divideBy(2).round(),w=c.subtract(p);return!w.x&&!w.y?this:(i.animate&&i.pan?this.panBy(w):(i.pan&&this._rawPanBy(w),this.fire("move"),i.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:u}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(i){if(i=this._locateOptions=s({timeout:1e4,watch:!1},i),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=h(this._handleGeolocationResponse,this),u=h(this._handleGeolocationError,this);return i.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,u,i):navigator.geolocation.getCurrentPosition(a,u,i),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(i){if(this._container._leaflet_id){var a=i.code,u=i.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+u+"."})}},_handleGeolocationResponse:function(i){if(this._container._leaflet_id){var a=i.coords.latitude,u=i.coords.longitude,c=new gt(a,u),p=c.toBounds(i.coords.accuracy*2),w=this._locateOptions;if(w.setView){var P=this.getBoundsZoom(p);this.setView(c,w.maxZoom?Math.min(P,w.maxZoom):P)}var O={latlng:c,bounds:p,timestamp:i.timestamp};for(var G in i.coords)typeof i.coords[G]=="number"&&(O[G]=i.coords[G]);this.fire("locationfound",O)}},addHandler:function(i,a){if(!a)return this;var u=this[i]=new a(this);return this._handlers.push(u),this.options[i]&&u.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Vt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var i;for(i in this._layers)this._layers[i].remove();for(i in this._panes)Vt(this._panes[i]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(i,a){var u="leaflet-pane"+(i?" leaflet-"+i.replace("Pane","")+"-pane":""),c=Tt("div",u,a||this._mapPane);return i&&(this._panes[i]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var i=this.getPixelBounds(),a=this.unproject(i.getBottomLeft()),u=this.unproject(i.getTopRight());return new Et(a,u)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(i,a,u){i=At(i),u=Q(u||[0,0]);var c=this.getZoom()||0,p=this.getMinZoom(),w=this.getMaxZoom(),P=i.getNorthWest(),O=i.getSouthEast(),G=this.getSize().subtract(u),H=wt(this.project(O,c),this.project(P,c)).getSize(),rt=lt.any3d?this.options.zoomSnap:1,yt=G.x/H.x,xt=G.y/H.y,Ae=a?Math.max(yt,xt):Math.min(yt,xt);return c=this.getScaleZoom(Ae,c),rt&&(c=Math.round(c/(rt/100))*(rt/100),c=a?Math.ceil(c/rt)*rt:Math.floor(c/rt)*rt),Math.max(p,Math.min(w,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new J(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(i,a){var u=this._getTopLeftPoint(i,a);return new ft(u,u.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(i){return this.options.crs.getProjectedBounds(i===void 0?this.getZoom():i)},getPane:function(i){return typeof i=="string"?this._panes[i]:i},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(i,a){var u=this.options.crs;return a=a===void 0?this._zoom:a,u.scale(i)/u.scale(a)},getScaleZoom:function(i,a){var u=this.options.crs;a=a===void 0?this._zoom:a;var c=u.zoom(i*u.scale(a));return isNaN(c)?1/0:c},project:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(ct(i),a)},unproject:function(i,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(Q(i),a)},layerPointToLatLng:function(i){var a=Q(i).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(i){var a=this.project(ct(i))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(i){return this.options.crs.wrapLatLng(ct(i))},wrapLatLngBounds:function(i){return this.options.crs.wrapLatLngBounds(At(i))},distance:function(i,a){return this.options.crs.distance(ct(i),ct(a))},containerPointToLayerPoint:function(i){return Q(i).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(i){return Q(i).add(this._getMapPanePos())},containerPointToLatLng:function(i){var a=this.containerPointToLayerPoint(Q(i));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(i){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ct(i)))},mouseEventToContainerPoint:function(i){return po(i,this._container)},mouseEventToLayerPoint:function(i){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(i))},mouseEventToLatLng:function(i){return this.layerPointToLatLng(this.mouseEventToLayerPoint(i))},_initContainer:function(i){var a=this._container=co(i);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Mt(a,"scroll",this._onScroll,this),this._containerId=l(a)},_initLayout:function(){var i=this._container;this._fadeAnimated=this.options.fadeAnimation&&lt.any3d,Ct(i,"leaflet-container"+(lt.touch?" leaflet-touch":"")+(lt.retina?" leaflet-retina":"")+(lt.ielt9?" leaflet-oldie":"")+(lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Tn(i,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(i.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var i=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),re(this._mapPane,new J(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ct(i.markerPane,"leaflet-zoom-hide"),Ct(i.shadowPane,"leaflet-zoom-hide"))},_resetView:function(i,a,u){re(this._mapPane,new J(0,0));var c=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var p=this._zoom!==a;this._moveStart(p,u)._move(i,a)._moveEnd(p),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(i,a){return i&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(i,a,u,c){a===void 0&&(a=this._zoom);var p=this._zoom!==a;return this._zoom=a,this._lastCenter=i,this._pixelOrigin=this._getNewPixelOrigin(i),c?u&&u.pinch&&this.fire("zoom",u):((p||u&&u.pinch)&&this.fire("zoom",u),this.fire("move",u)),this},_moveEnd:function(i){return i&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(i){re(this._mapPane,this._getMapPanePos().subtract(i))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(i){this._targets={},this._targets[l(this._container)]=this;var a=i?Zt:Mt;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),lt.any3d&&this.options.transform3DLimit&&(i?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=k(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var i=this._getMapPanePos();Math.max(Math.abs(i.x),Math.abs(i.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(i,a){for(var u=[],c,p=a==="mouseout"||a==="mouseover",w=i.target||i.srcElement,P=!1;w;){if(c=this._targets[l(w)],c&&(a==="click"||a==="preclick")&&this._draggableMoved(c)){P=!0;break}if(c&&c.listens(a,!0)&&(p&&!ia(w,i)||(u.push(c),p))||w===this._container)break;w=w.parentNode}return!u.length&&!P&&!p&&this.listens(a,!0)&&(u=[this]),u},_isClickDisabled:function(i){for(;i&&i!==this._container;){if(i._leaflet_disable_click)return!0;i=i.parentNode}},_handleDOMEvent:function(i){var a=i.target||i.srcElement;if(!(!this._loaded||a._leaflet_disable_events||i.type==="click"&&this._isClickDisabled(a))){var u=i.type;u==="mousedown"&&Ks(a),this._fireDOMEvent(i,u)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(i,a,u){if(i.type==="click"){var c=s({},i);c.type="preclick",this._fireDOMEvent(c,c.type,u)}var p=this._findEventTargets(i,a);if(u){for(var w=[],P=0;P<u.length;P++)u[P].listens(a,!0)&&w.push(u[P]);p=w.concat(p)}if(p.length){a==="contextmenu"&&_e(i);var O=p[0],G={originalEvent:i};if(i.type!=="keypress"&&i.type!=="keydown"&&i.type!=="keyup"){var H=O.getLatLng&&(!O._radius||O._radius<=10);G.containerPoint=H?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(i),G.layerPoint=this.containerPointToLayerPoint(G.containerPoint),G.latlng=H?O.getLatLng():this.layerPointToLatLng(G.layerPoint)}for(P=0;P<p.length;P++)if(p[P].fire(a,G,!0),G.originalEvent._stopped||p[P].options.bubblingMouseEvents===!1&&F(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(i){return i=i.dragging&&i.dragging.enabled()?i:this,i.dragging&&i.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var i=0,a=this._handlers.length;i<a;i++)this._handlers[i].disable()},whenReady:function(i,a){return this._loaded?i.call(a||this,{target:this}):this.on("load",i,a),this},_getMapPanePos:function(){return Oi(this._mapPane)||new J(0,0)},_moved:function(){var i=this._getMapPanePos();return i&&!i.equals([0,0])},_getTopLeftPoint:function(i,a){var u=i&&a!==void 0?this._getNewPixelOrigin(i,a):this.getPixelOrigin();return u.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(i,a){var u=this.getSize()._divideBy(2);return this.project(i,a)._subtract(u)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(i,a,u){var c=this._getNewPixelOrigin(u,a);return this.project(i,a)._subtract(c)},_latLngBoundsToNewLayerBounds:function(i,a,u){var c=this._getNewPixelOrigin(u,a);return wt([this.project(i.getSouthWest(),a)._subtract(c),this.project(i.getNorthWest(),a)._subtract(c),this.project(i.getSouthEast(),a)._subtract(c),this.project(i.getNorthEast(),a)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(i){return this.latLngToLayerPoint(i).subtract(this._getCenterLayerPoint())},_limitCenter:function(i,a,u){if(!u)return i;var c=this.project(i,a),p=this.getSize().divideBy(2),w=new ft(c.subtract(p),c.add(p)),P=this._getBoundsOffset(w,u,a);return Math.abs(P.x)<=1&&Math.abs(P.y)<=1?i:this.unproject(c.add(P),a)},_limitOffset:function(i,a){if(!a)return i;var u=this.getPixelBounds(),c=new ft(u.min.add(i),u.max.add(i));return i.add(this._getBoundsOffset(c,a))},_getBoundsOffset:function(i,a,u){var c=wt(this.project(a.getNorthEast(),u),this.project(a.getSouthWest(),u)),p=c.min.subtract(i.min),w=c.max.subtract(i.max),P=this._rebound(p.x,-w.x),O=this._rebound(p.y,-w.y);return new J(P,O)},_rebound:function(i,a){return i+a>0?Math.round(i-a)/2:Math.max(0,Math.ceil(i))-Math.max(0,Math.floor(a))},_limitZoom:function(i){var a=this.getMinZoom(),u=this.getMaxZoom(),c=lt.any3d?this.options.zoomSnap:1;return c&&(i=Math.round(i/c)*c),Math.max(a,Math.min(u,i))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){te(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(i,a){var u=this._getCenterOffset(i)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(u)?!1:(this.panBy(u,a),!0)},_createAnimProxy:function(){var i=this._proxy=Tt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(i),this.on("zoomanim",function(a){var u=Fn,c=this._proxy.style[u];Ii(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),c===this._proxy.style[u]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Vt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var i=this.getCenter(),a=this.getZoom();Ii(this._proxy,this.project(i,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(i){this._animatingZoom&&i.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(i,a,u){if(this._animatingZoom)return!0;if(u=u||{},!this._zoomAnimated||u.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(a),p=this._getCenterOffset(i)._divideBy(1-1/c);return u.animate!==!0&&!this.getSize().contains(p)?!1:(k(function(){this._moveStart(!0,u.noMoveStart||!1)._animateZoom(i,a,!0)},this),!0)},_animateZoom:function(i,a,u,c){this._mapPane&&(u&&(this._animatingZoom=!0,this._animateToCenter=i,this._animateToZoom=a,Ct(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:i,zoom:a,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&te(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ff(i,a){return new Ft(i,a)}var Ve=ot.extend({options:{position:"topright"},initialize:function(i){g(this,i)},getPosition:function(){return this.options.position},setPosition:function(i){var a=this._map;return a&&a.removeControl(this),this.options.position=i,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(i){this.remove(),this._map=i;var a=this._container=this.onAdd(i),u=this.getPosition(),c=i._controlCorners[u];return Ct(a,"leaflet-control"),u.indexOf("bottom")!==-1?c.insertBefore(a,c.firstChild):c.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Vt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(i){this._map&&i&&i.screenX>0&&i.screenY>0&&this._map.getContainer().focus()}}),Gn=function(i){return new Ve(i)};Ft.include({addControl:function(i){return i.addTo(this),this},removeControl:function(i){return i.remove(),this},_initControlPos:function(){var i=this._controlCorners={},a="leaflet-",u=this._controlContainer=Tt("div",a+"control-container",this._container);function c(p,w){var P=a+p+" "+a+w;i[p+w]=Tt("div",P,u)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var i in this._controlCorners)Vt(this._controlCorners[i]);Vt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var wo=Ve.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(i,a,u,c){return u<c?-1:c<u?1:0}},initialize:function(i,a,u){g(this,u),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in i)this._addLayer(i[c],c);for(c in a)this._addLayer(a[c],c,!0)},onAdd:function(i){this._initLayout(),this._update(),this._map=i,i.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(i){return Ve.prototype.addTo.call(this,i),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(i,a){return this._addLayer(i,a),this._map?this._update():this},addOverlay:function(i,a){return this._addLayer(i,a,!0),this._map?this._update():this},removeLayer:function(i){i.off("add remove",this._onLayerChange,this);var a=this._getLayer(l(i));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){Ct(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var i=this._map.getSize().y-(this._container.offsetTop+50);return i<this._section.clientHeight?(Ct(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=i+"px"):te(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return te(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var i="leaflet-control-layers",a=this._container=Tt("div",i),u=this.options.collapsed;a.setAttribute("aria-haspopup",!0),On(a),ea(a);var c=this._section=Tt("section",i+"-list");u&&(this._map.on("click",this.collapse,this),Mt(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var p=this._layersLink=Tt("a",i+"-toggle",a);p.href="#",p.title="Layers",p.setAttribute("role","button"),Mt(p,{keydown:function(w){w.keyCode===13&&this._expandSafely()},click:function(w){_e(w),this._expandSafely()}},this),u||this.expand(),this._baseLayersList=Tt("div",i+"-base",c),this._separator=Tt("div",i+"-separator",c),this._overlaysList=Tt("div",i+"-overlays",c),a.appendChild(c)},_getLayer:function(i){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&l(this._layers[a].layer)===i)return this._layers[a]},_addLayer:function(i,a,u){this._map&&i.on("add remove",this._onLayerChange,this),this._layers.push({layer:i,name:a,overlay:u}),this.options.sortLayers&&this._layers.sort(h(function(c,p){return this.options.sortFunction(c.layer,p.layer,c.name,p.name)},this)),this.options.autoZIndex&&i.setZIndex&&(this._lastZIndex++,i.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ar(this._baseLayersList),Ar(this._overlaysList),this._layerControlInputs=[];var i,a,u,c,p=0;for(u=0;u<this._layers.length;u++)c=this._layers[u],this._addItem(c),a=a||c.overlay,i=i||!c.overlay,p+=c.overlay?0:1;return this.options.hideSingleBase&&(i=i&&p>1,this._baseLayersList.style.display=i?"":"none"),this._separator.style.display=a&&i?"":"none",this},_onLayerChange:function(i){this._handlingClick||this._update();var a=this._getLayer(l(i.target)),u=a.overlay?i.type==="add"?"overlayadd":"overlayremove":i.type==="add"?"baselayerchange":null;u&&this._map.fire(u,a)},_createRadioElement:function(i,a){var u='<input type="radio" class="leaflet-control-layers-selector" name="'+i+'"'+(a?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=u,c.firstChild},_addItem:function(i){var a=document.createElement("label"),u=this._map.hasLayer(i.layer),c;i.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=u):c=this._createRadioElement("leaflet-base-layers_"+l(this),u),this._layerControlInputs.push(c),c.layerId=l(i.layer),Mt(c,"click",this._onInputClick,this);var p=document.createElement("span");p.innerHTML=" "+i.name;var w=document.createElement("span");a.appendChild(w),w.appendChild(c),w.appendChild(p);var P=i.overlay?this._overlaysList:this._baseLayersList;return P.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var i=this._layerControlInputs,a,u,c=[],p=[];this._handlingClick=!0;for(var w=i.length-1;w>=0;w--)a=i[w],u=this._getLayer(a.layerId).layer,a.checked?c.push(u):a.checked||p.push(u);for(w=0;w<p.length;w++)this._map.hasLayer(p[w])&&this._map.removeLayer(p[w]);for(w=0;w<c.length;w++)this._map.hasLayer(c[w])||this._map.addLayer(c[w]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var i=this._layerControlInputs,a,u,c=this._map.getZoom(),p=i.length-1;p>=0;p--)a=i[p],u=this._getLayer(a.layerId).layer,a.disabled=u.options.minZoom!==void 0&&c<u.options.minZoom||u.options.maxZoom!==void 0&&c>u.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var i=this._section;this._preventClick=!0,Mt(i,"click",_e),this.expand();var a=this;setTimeout(function(){Zt(i,"click",_e),a._preventClick=!1})}}),Nf=function(i,a,u){return new wo(i,a,u)},na=Ve.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(i){var a="leaflet-control-zoom",u=Tt("div",a+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,a+"-in",u,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,a+"-out",u,this._zoomOut),this._updateDisabled(),i.on("zoomend zoomlevelschange",this._updateDisabled,this),u},onRemove:function(i){i.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(i){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(i.shiftKey?3:1))},_zoomOut:function(i){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(i.shiftKey?3:1))},_createButton:function(i,a,u,c,p){var w=Tt("a",u,c);return w.innerHTML=i,w.href="#",w.title=a,w.setAttribute("role","button"),w.setAttribute("aria-label",a),On(w),Mt(w,"click",zi),Mt(w,"click",p,this),Mt(w,"click",this._refocusOnMap,this),w},_updateDisabled:function(){var i=this._map,a="leaflet-disabled";te(this._zoomInButton,a),te(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||i._zoom===i.getMinZoom())&&(Ct(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||i._zoom===i.getMaxZoom())&&(Ct(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ft.mergeOptions({zoomControl:!0}),Ft.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new na,this.addControl(this.zoomControl))});var Tf=function(i){return new na(i)},Do=Ve.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(i){var a="leaflet-control-scale",u=Tt("div",a),c=this.options;return this._addScales(c,a+"-line",u),i.on(c.updateWhenIdle?"moveend":"move",this._update,this),i.whenReady(this._update,this),u},onRemove:function(i){i.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(i,a,u){i.metric&&(this._mScale=Tt("div",a,u)),i.imperial&&(this._iScale=Tt("div",a,u))},_update:function(){var i=this._map,a=i.getSize().y/2,u=i.distance(i.containerPointToLatLng([0,a]),i.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(u)},_updateScales:function(i){this.options.metric&&i&&this._updateMetric(i),this.options.imperial&&i&&this._updateImperial(i)},_updateMetric:function(i){var a=this._getRoundNum(i),u=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,u,a/i)},_updateImperial:function(i){var a=i*3.2808399,u,c,p;a>5280?(u=a/5280,c=this._getRoundNum(u),this._updateScale(this._iScale,c+" mi",c/u)):(p=this._getRoundNum(a),this._updateScale(this._iScale,p+" ft",p/a))},_updateScale:function(i,a,u){i.style.width=Math.round(this.options.maxWidth*u)+"px",i.innerHTML=a},_getRoundNum:function(i){var a=Math.pow(10,(Math.floor(i)+"").length-1),u=i/a;return u=u>=10?10:u>=5?5:u>=3?3:u>=2?2:1,a*u}}),Bf=function(i){return new Do(i)},Lf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ra=Ve.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(lt.inlineSvg?Lf+" ":"")+"Leaflet</a>"},initialize:function(i){g(this,i),this._attributions={}},onAdd:function(i){i.attributionControl=this,this._container=Tt("div","leaflet-control-attribution"),On(this._container);for(var a in i._layers)i._layers[a].getAttribution&&this.addAttribution(i._layers[a].getAttribution());return this._update(),i.on("layeradd",this._addAttribution,this),this._container},onRemove:function(i){i.off("layeradd",this._addAttribution,this)},_addAttribution:function(i){i.layer.getAttribution&&(this.addAttribution(i.layer.getAttribution()),i.layer.once("remove",function(){this.removeAttribution(i.layer.getAttribution())},this))},setPrefix:function(i){return this.options.prefix=i,this._update(),this},addAttribution:function(i){return i?(this._attributions[i]||(this._attributions[i]=0),this._attributions[i]++,this._update(),this):this},removeAttribution:function(i){return i?(this._attributions[i]&&(this._attributions[i]--,this._update()),this):this},_update:function(){if(this._map){var i=[];for(var a in this._attributions)this._attributions[a]&&i.push(a);var u=[];this.options.prefix&&u.push(this.options.prefix),i.length&&u.push(i.join(", ")),this._container.innerHTML=u.join(' <span aria-hidden="true">|</span> ')}}});Ft.mergeOptions({attributionControl:!0}),Ft.addInitHook(function(){this.options.attributionControl&&new ra().addTo(this)});var If=function(i){return new ra(i)};Ve.Layers=wo,Ve.Zoom=na,Ve.Scale=Do,Ve.Attribution=ra,Gn.layers=Nf,Gn.zoom=Tf,Gn.scale=Bf,Gn.attribution=If;var ii=ot.extend({initialize:function(i){this._map=i},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ii.addTo=function(i,a){return i.addHandler(a,this),this};var Of={Events:K},Eo=lt.touch?"touchstart mousedown":"mousedown",wi=_t.extend({options:{clickTolerance:3},initialize:function(i,a,u,c){g(this,c),this._element=i,this._dragStartTarget=a||i,this._preventOutline=u},enable:function(){this._enabled||(Mt(this._dragStartTarget,Eo,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(wi._dragging===this&&this.finishDrag(!0),Zt(this._dragStartTarget,Eo,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(i){if(this._enabled&&(this._moved=!1,!Ws(this._element,"leaflet-zoom-anim"))){if(i.touches&&i.touches.length!==1){wi._dragging===this&&this.finishDrag();return}if(!(wi._dragging||i.shiftKey||i.which!==1&&i.button!==1&&!i.touches)&&(wi._dragging=this,this._preventOutline&&Ks(this._element),js(),Bn(),!this._moving)){this.fire("down");var a=i.touches?i.touches[0]:i,u=_o(this._element);this._startPoint=new J(a.clientX,a.clientY),this._startPos=Oi(this._element),this._parentScale=Js(u);var c=i.type==="mousedown";Mt(document,c?"mousemove":"touchmove",this._onMove,this),Mt(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(i){if(this._enabled){if(i.touches&&i.touches.length>1){this._moved=!0;return}var a=i.touches&&i.touches.length===1?i.touches[0]:i,u=new J(a.clientX,a.clientY)._subtract(this._startPoint);!u.x&&!u.y||Math.abs(u.x)+Math.abs(u.y)<this.options.clickTolerance||(u.x/=this._parentScale.x,u.y/=this._parentScale.y,_e(i),this._moved||(this.fire("dragstart"),this._moved=!0,Ct(document.body,"leaflet-dragging"),this._lastTarget=i.target||i.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ct(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(u),this._moving=!0,this._lastEvent=i,this._updatePosition())}},_updatePosition:function(){var i={originalEvent:this._lastEvent};this.fire("predrag",i),re(this._element,this._newPos),this.fire("drag",i)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(i){te(document.body,"leaflet-dragging"),this._lastTarget&&(te(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Zt(document,"mousemove touchmove",this._onMove,this),Zt(document,"mouseup touchend touchcancel",this._onUp,this),Vs(),Ln();var a=this._moved&&this._moving;this._moving=!1,wi._dragging=!1,a&&this.fire("dragend",{noInertia:i,distance:this._newPos.distanceTo(this._startPos)})}});function Mo(i,a,u){var c,p=[1,4,2,8],w,P,O,G,H,rt,yt,xt;for(w=0,rt=i.length;w<rt;w++)i[w]._code=Ri(i[w],a);for(O=0;O<4;O++){for(yt=p[O],c=[],w=0,rt=i.length,P=rt-1;w<rt;P=w++)G=i[w],H=i[P],G._code&yt?H._code&yt||(xt=Pr(H,G,yt,a,u),xt._code=Ri(xt,a),c.push(xt)):(H._code&yt&&(xt=Pr(H,G,yt,a,u),xt._code=Ri(xt,a),c.push(xt)),c.push(G));i=c}return i}function Ao(i,a){var u,c,p,w,P,O,G,H,rt;if(!i||i.length===0)throw new Error("latlngs not passed");ke(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var yt=ct([0,0]),xt=At(i),Ae=xt.getNorthWest().distanceTo(xt.getSouthWest())*xt.getNorthEast().distanceTo(xt.getNorthWest());Ae<1700&&(yt=sa(i));var le=i.length,Ze=[];for(u=0;u<le;u++){var Se=ct(i[u]);Ze.push(a.project(ct([Se.lat-yt.lat,Se.lng-yt.lng])))}for(O=G=H=0,u=0,c=le-1;u<le;c=u++)p=Ze[u],w=Ze[c],P=p.y*w.x-w.y*p.x,G+=(p.x+w.x)*P,H+=(p.y+w.y)*P,O+=P*3;O===0?rt=Ze[0]:rt=[G/O,H/O];var sn=a.unproject(Q(rt));return ct([sn.lat+yt.lat,sn.lng+yt.lng])}function sa(i){for(var a=0,u=0,c=0,p=0;p<i.length;p++){var w=ct(i[p]);a+=w.lat,u+=w.lng,c++}return ct([a/c,u/c])}var Gf={__proto__:null,clipPolygon:Mo,polygonCenter:Ao,centroid:sa};function Co(i,a){if(!a||!i.length)return i.slice();var u=a*a;return i=kf(i,u),i=Rf(i,u),i}function bo(i,a,u){return Math.sqrt(zn(i,a,u,!0))}function zf(i,a,u){return zn(i,a,u)}function Rf(i,a){var u=i.length,c=typeof Uint8Array<"u"?Uint8Array:Array,p=new c(u);p[0]=p[u-1]=1,aa(i,p,a,0,u-1);var w,P=[];for(w=0;w<u;w++)p[w]&&P.push(i[w]);return P}function aa(i,a,u,c,p){var w=0,P,O,G;for(O=c+1;O<=p-1;O++)G=zn(i[O],i[c],i[p],!0),G>w&&(P=O,w=G);w>u&&(a[P]=1,aa(i,a,u,c,P),aa(i,a,u,P,p))}function kf(i,a){for(var u=[i[0]],c=1,p=0,w=i.length;c<w;c++)Zf(i[c],i[p])>a&&(u.push(i[c]),p=c);return p<w-1&&u.push(i[w-1]),u}var xo;function So(i,a,u,c,p){var w=c?xo:Ri(i,u),P=Ri(a,u),O,G,H;for(xo=P;;){if(!(w|P))return[i,a];if(w&P)return!1;O=w||P,G=Pr(i,a,O,u,p),H=Ri(G,u),O===w?(i=G,w=H):(a=G,P=H)}}function Pr(i,a,u,c,p){var w=a.x-i.x,P=a.y-i.y,O=c.min,G=c.max,H,rt;return u&8?(H=i.x+w*(G.y-i.y)/P,rt=G.y):u&4?(H=i.x+w*(O.y-i.y)/P,rt=O.y):u&2?(H=G.x,rt=i.y+P*(G.x-i.x)/w):u&1&&(H=O.x,rt=i.y+P*(O.x-i.x)/w),new J(H,rt,p)}function Ri(i,a){var u=0;return i.x<a.min.x?u|=1:i.x>a.max.x&&(u|=2),i.y<a.min.y?u|=4:i.y>a.max.y&&(u|=8),u}function Zf(i,a){var u=a.x-i.x,c=a.y-i.y;return u*u+c*c}function zn(i,a,u,c){var p=a.x,w=a.y,P=u.x-p,O=u.y-w,G=P*P+O*O,H;return G>0&&(H=((i.x-p)*P+(i.y-w)*O)/G,H>1?(p=u.x,w=u.y):H>0&&(p+=P*H,w+=O*H)),P=i.x-p,O=i.y-w,c?P*P+O*O:new J(p,w)}function ke(i){return!M(i[0])||typeof i[0][0]!="object"&&typeof i[0][0]<"u"}function Po(i){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ke(i)}function Fo(i,a){var u,c,p,w,P,O,G,H;if(!i||i.length===0)throw new Error("latlngs not passed");ke(i)||(console.warn("latlngs are not flat! Only the first ring will be used"),i=i[0]);var rt=ct([0,0]),yt=At(i),xt=yt.getNorthWest().distanceTo(yt.getSouthWest())*yt.getNorthEast().distanceTo(yt.getNorthWest());xt<1700&&(rt=sa(i));var Ae=i.length,le=[];for(u=0;u<Ae;u++){var Ze=ct(i[u]);le.push(a.project(ct([Ze.lat-rt.lat,Ze.lng-rt.lng])))}for(u=0,c=0;u<Ae-1;u++)c+=le[u].distanceTo(le[u+1])/2;if(c===0)H=le[0];else for(u=0,w=0;u<Ae-1;u++)if(P=le[u],O=le[u+1],p=P.distanceTo(O),w+=p,w>c){G=(w-c)/p,H=[O.x-G*(O.x-P.x),O.y-G*(O.y-P.y)];break}var Se=a.unproject(Q(H));return ct([Se.lat+rt.lat,Se.lng+rt.lng])}var qf={__proto__:null,simplify:Co,pointToSegmentDistance:bo,closestPointOnSegment:zf,clipSegment:So,_getEdgeIntersection:Pr,_getBitCode:Ri,_sqClosestPointOnSegment:zn,isFlat:ke,_flat:Po,polylineCenter:Fo},oa={project:function(i){return new J(i.lng,i.lat)},unproject:function(i){return new gt(i.y,i.x)},bounds:new ft([-180,-90],[180,90])},ua={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ft([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(i){var a=Math.PI/180,u=this.R,c=i.lat*a,p=this.R_MINOR/u,w=Math.sqrt(1-p*p),P=w*Math.sin(c),O=Math.tan(Math.PI/4-c/2)/Math.pow((1-P)/(1+P),w/2);return c=-u*Math.log(Math.max(O,1e-10)),new J(i.lng*a*u,c)},unproject:function(i){for(var a=180/Math.PI,u=this.R,c=this.R_MINOR/u,p=Math.sqrt(1-c*c),w=Math.exp(-i.y/u),P=Math.PI/2-2*Math.atan(w),O=0,G=.1,H;O<15&&Math.abs(G)>1e-7;O++)H=p*Math.sin(P),H=Math.pow((1-H)/(1+H),p/2),G=Math.PI/2-2*Math.atan(w*H)-P,P+=G;return new gt(P*a,i.x*a/u)}},Uf={__proto__:null,LonLat:oa,Mercator:ua,SphericalMercator:Nt},Wf=s({},qt,{code:"EPSG:3395",projection:ua,transformation:(function(){var i=.5/(Math.PI*ua.R);return Ht(i,.5,-i,.5)})()}),No=s({},qt,{code:"EPSG:4326",projection:oa,transformation:Ht(1/180,1,-1/180,.5)}),$f=s({},St,{projection:oa,transformation:Ht(1,0,-1,0),scale:function(i){return Math.pow(2,i)},zoom:function(i){return Math.log(i)/Math.LN2},distance:function(i,a){var u=a.lng-i.lng,c=a.lat-i.lat;return Math.sqrt(u*u+c*c)},infinite:!0});St.Earth=qt,St.EPSG3395=Wf,St.EPSG3857=Lt,St.EPSG900913=ne,St.EPSG4326=No,St.Simple=$f;var Xe=_t.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(i){return i.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(i){return i&&i.removeLayer(this),this},getPane:function(i){return this._map.getPane(i?this.options[i]||i:this.options.pane)},addInteractiveTarget:function(i){return this._map._targets[l(i)]=this,this},removeInteractiveTarget:function(i){return delete this._map._targets[l(i)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(i){var a=i.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var u=this.getEvents();a.on(u,this),this.once("remove",function(){a.off(u,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ft.include({addLayer:function(i){if(!i._layerAdd)throw new Error("The provided object is not a Layer.");var a=l(i);return this._layers[a]?this:(this._layers[a]=i,i._mapToAdd=this,i.beforeAdd&&i.beforeAdd(this),this.whenReady(i._layerAdd,i),this)},removeLayer:function(i){var a=l(i);return this._layers[a]?(this._loaded&&i.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:i}),i.fire("remove")),i._map=i._mapToAdd=null,this):this},hasLayer:function(i){return l(i)in this._layers},eachLayer:function(i,a){for(var u in this._layers)i.call(a,this._layers[u]);return this},_addLayers:function(i){i=i?M(i)?i:[i]:[];for(var a=0,u=i.length;a<u;a++)this.addLayer(i[a])},_addZoomLimit:function(i){(!isNaN(i.options.maxZoom)||!isNaN(i.options.minZoom))&&(this._zoomBoundLayers[l(i)]=i,this._updateZoomLevels())},_removeZoomLimit:function(i){var a=l(i);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var i=1/0,a=-1/0,u=this._getZoomSpan();for(var c in this._zoomBoundLayers){var p=this._zoomBoundLayers[c].options;i=p.minZoom===void 0?i:Math.min(i,p.minZoom),a=p.maxZoom===void 0?a:Math.max(a,p.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=i===1/0?void 0:i,u!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Qi=Xe.extend({initialize:function(i,a){g(this,a),this._layers={};var u,c;if(i)for(u=0,c=i.length;u<c;u++)this.addLayer(i[u])},addLayer:function(i){var a=this.getLayerId(i);return this._layers[a]=i,this._map&&this._map.addLayer(i),this},removeLayer:function(i){var a=i in this._layers?i:this.getLayerId(i);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(i){var a=typeof i=="number"?i:this.getLayerId(i);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(i){var a=Array.prototype.slice.call(arguments,1),u,c;for(u in this._layers)c=this._layers[u],c[i]&&c[i].apply(c,a);return this},onAdd:function(i){this.eachLayer(i.addLayer,i)},onRemove:function(i){this.eachLayer(i.removeLayer,i)},eachLayer:function(i,a){for(var u in this._layers)i.call(a,this._layers[u]);return this},getLayer:function(i){return this._layers[i]},getLayers:function(){var i=[];return this.eachLayer(i.push,i),i},setZIndex:function(i){return this.invoke("setZIndex",i)},getLayerId:function(i){return l(i)}}),Hf=function(i,a){return new Qi(i,a)},fi=Qi.extend({addLayer:function(i){return this.hasLayer(i)?this:(i.addEventParent(this),Qi.prototype.addLayer.call(this,i),this.fire("layeradd",{layer:i}))},removeLayer:function(i){return this.hasLayer(i)?(i in this._layers&&(i=this._layers[i]),i.removeEventParent(this),Qi.prototype.removeLayer.call(this,i),this.fire("layerremove",{layer:i})):this},setStyle:function(i){return this.invoke("setStyle",i)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var i=new Et;for(var a in this._layers){var u=this._layers[a];i.extend(u.getBounds?u.getBounds():u.getLatLng())}return i}}),jf=function(i,a){return new fi(i,a)},tn=ot.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(i){g(this,i)},createIcon:function(i){return this._createIcon("icon",i)},createShadow:function(i){return this._createIcon("shadow",i)},_createIcon:function(i,a){var u=this._getIconUrl(i);if(!u){if(i==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(u,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(c,i),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(i,a){var u=this.options,c=u[a+"Size"];typeof c=="number"&&(c=[c,c]);var p=Q(c),w=Q(a==="shadow"&&u.shadowAnchor||u.iconAnchor||p&&p.divideBy(2,!0));i.className="leaflet-marker-"+a+" "+(u.className||""),w&&(i.style.marginLeft=-w.x+"px",i.style.marginTop=-w.y+"px"),p&&(i.style.width=p.x+"px",i.style.height=p.y+"px")},_createImg:function(i,a){return a=a||document.createElement("img"),a.src=i,a},_getIconUrl:function(i){return lt.retina&&this.options[i+"RetinaUrl"]||this.options[i+"Url"]}});function Vf(i){return new tn(i)}var Rn=tn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(i){return typeof Rn.imagePath!="string"&&(Rn.imagePath=this._detectIconPath()),(this.options.imagePath||Rn.imagePath)+tn.prototype._getIconUrl.call(this,i)},_stripUrl:function(i){var a=function(u,c,p){var w=c.exec(u);return w&&w[p]};return i=a(i,/^url\((['"])?(.+)\1\)$/,2),i&&a(i,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var i=Tt("div","leaflet-default-icon-path",document.body),a=Tn(i,"background-image")||Tn(i,"backgroundImage");if(document.body.removeChild(i),a=this._stripUrl(a),a)return a;var u=document.querySelector('link[href$="leaflet.css"]');return u?u.href.substring(0,u.href.length-11-1):""}}),To=ii.extend({initialize:function(i){this._marker=i},addHooks:function(){var i=this._marker._icon;this._draggable||(this._draggable=new wi(i,i,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ct(i,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&te(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(i){var a=this._marker,u=a._map,c=this._marker.options.autoPanSpeed,p=this._marker.options.autoPanPadding,w=Oi(a._icon),P=u.getPixelBounds(),O=u.getPixelOrigin(),G=wt(P.min._subtract(O).add(p),P.max._subtract(O).subtract(p));if(!G.contains(w)){var H=Q((Math.max(G.max.x,w.x)-G.max.x)/(P.max.x-G.max.x)-(Math.min(G.min.x,w.x)-G.min.x)/(P.min.x-G.min.x),(Math.max(G.max.y,w.y)-G.max.y)/(P.max.y-G.max.y)-(Math.min(G.min.y,w.y)-G.min.y)/(P.min.y-G.min.y)).multiplyBy(c);u.panBy(H,{animate:!1}),this._draggable._newPos._add(H),this._draggable._startPos._add(H),re(a._icon,this._draggable._newPos),this._onDrag(i),this._panRequest=k(this._adjustPan.bind(this,i))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(i){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=k(this._adjustPan.bind(this,i)))},_onDrag:function(i){var a=this._marker,u=a._shadow,c=Oi(a._icon),p=a._map.layerPointToLatLng(c);u&&re(u,c),a._latlng=p,i.latlng=p,i.oldLatLng=this._oldLatLng,a.fire("move",i).fire("drag",i)},_onDragEnd:function(i){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",i)}}),Fr=Xe.extend({options:{icon:new Rn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(i,a){g(this,a),this._latlng=ct(i)},onAdd:function(i){this._zoomAnimated=this._zoomAnimated&&i.options.markerZoomAnimation,this._zoomAnimated&&i.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(i){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&i.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(i){var a=this._latlng;return this._latlng=ct(i),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(i){return this.options.zIndexOffset=i,this.update()},getIcon:function(){return this.options.icon},setIcon:function(i){return this.options.icon=i,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var i=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(i)}return this},_initIcon:function(){var i=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),u=i.icon.createIcon(this._icon),c=!1;u!==this._icon&&(this._icon&&this._removeIcon(),c=!0,i.title&&(u.title=i.title),u.tagName==="IMG"&&(u.alt=i.alt||"")),Ct(u,a),i.keyboard&&(u.tabIndex="0",u.setAttribute("role","button")),this._icon=u,i.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(u,"focus",this._panOnFocus,this);var p=i.icon.createShadow(this._shadow),w=!1;p!==this._shadow&&(this._removeShadow(),w=!0),p&&(Ct(p,a),p.alt=""),this._shadow=p,i.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),p&&w&&this.getPane(i.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Zt(this._icon,"focus",this._panOnFocus,this),Vt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Vt(this._shadow),this._shadow=null},_setPos:function(i){this._icon&&re(this._icon,i),this._shadow&&re(this._shadow,i),this._zIndex=i.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(i){this._icon&&(this._icon.style.zIndex=this._zIndex+i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(Ct(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),To)){var i=this.options.draggable;this.dragging&&(i=this.dragging.enabled(),this.dragging.disable()),this.dragging=new To(this),i&&this.dragging.enable()}},setOpacity:function(i){return this.options.opacity=i,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var i=this.options.opacity;this._icon&&Re(this._icon,i),this._shadow&&Re(this._shadow,i)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var i=this._map;if(i){var a=this.options.icon.options,u=a.iconSize?Q(a.iconSize):Q(0,0),c=a.iconAnchor?Q(a.iconAnchor):Q(0,0);i.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:u.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Xf(i,a){return new Fr(i,a)}var Di=Xe.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(i){this._renderer=i.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(i){return g(this,i),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&i&&Object.prototype.hasOwnProperty.call(i,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nr=Di.extend({options:{fill:!0,radius:10},initialize:function(i,a){g(this,a),this._latlng=ct(i),this._radius=this.options.radius},setLatLng:function(i){var a=this._latlng;return this._latlng=ct(i),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(i){return this.options.radius=this._radius=i,this.redraw()},getRadius:function(){return this._radius},setStyle:function(i){var a=i&&i.radius||this._radius;return Di.prototype.setStyle.call(this,i),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var i=this._radius,a=this._radiusY||i,u=this._clickTolerance(),c=[i+u,a+u];this._pxBounds=new ft(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(i){return i.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kf(i,a){return new Nr(i,a)}var ha=Nr.extend({initialize:function(i,a,u){if(typeof a=="number"&&(a=s({},u,{radius:a})),g(this,a),this._latlng=ct(i),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(i){return this._mRadius=i,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var i=[this._radius,this._radiusY||this._radius];return new Et(this._map.layerPointToLatLng(this._point.subtract(i)),this._map.layerPointToLatLng(this._point.add(i)))},setStyle:Di.prototype.setStyle,_project:function(){var i=this._latlng.lng,a=this._latlng.lat,u=this._map,c=u.options.crs;if(c.distance===qt.distance){var p=Math.PI/180,w=this._mRadius/qt.R/p,P=u.project([a+w,i]),O=u.project([a-w,i]),G=P.add(O).divideBy(2),H=u.unproject(G).lat,rt=Math.acos((Math.cos(w*p)-Math.sin(a*p)*Math.sin(H*p))/(Math.cos(a*p)*Math.cos(H*p)))/p;(isNaN(rt)||rt===0)&&(rt=w/Math.cos(Math.PI/180*a)),this._point=G.subtract(u.getPixelOrigin()),this._radius=isNaN(rt)?0:G.x-u.project([H,i-rt]).x,this._radiusY=G.y-P.y}else{var yt=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=u.latLngToLayerPoint(this._latlng),this._radius=this._point.x-u.latLngToLayerPoint(yt).x}this._updateBounds()}});function Jf(i,a,u){return new ha(i,a,u)}var li=Di.extend({options:{smoothFactor:1,noClip:!1},initialize:function(i,a){g(this,a),this._setLatLngs(i)},getLatLngs:function(){return this._latlngs},setLatLngs:function(i){return this._setLatLngs(i),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(i){for(var a=1/0,u=null,c=zn,p,w,P=0,O=this._parts.length;P<O;P++)for(var G=this._parts[P],H=1,rt=G.length;H<rt;H++){p=G[H-1],w=G[H];var yt=c(i,p,w,!0);yt<a&&(a=yt,u=c(i,p,w))}return u&&(u.distance=Math.sqrt(a)),u},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(i,a){return a=a||this._defaultShape(),i=ct(i),a.push(i),this._bounds.extend(i),this.redraw()},_setLatLngs:function(i){this._bounds=new Et,this._latlngs=this._convertLatLngs(i)},_defaultShape:function(){return ke(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(i){for(var a=[],u=ke(i),c=0,p=i.length;c<p;c++)u?(a[c]=ct(i[c]),this._bounds.extend(a[c])):a[c]=this._convertLatLngs(i[c]);return a},_project:function(){var i=new ft;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,i),this._bounds.isValid()&&i.isValid()&&(this._rawPxBounds=i,this._updateBounds())},_updateBounds:function(){var i=this._clickTolerance(),a=new J(i,i);this._rawPxBounds&&(this._pxBounds=new ft([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(i,a,u){var c=i[0]instanceof gt,p=i.length,w,P;if(c){for(P=[],w=0;w<p;w++)P[w]=this._map.latLngToLayerPoint(i[w]),u.extend(P[w]);a.push(P)}else for(w=0;w<p;w++)this._projectLatlngs(i[w],a,u)},_clipPoints:function(){var i=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,u,c,p,w,P,O,G;for(u=0,p=0,w=this._rings.length;u<w;u++)for(G=this._rings[u],c=0,P=G.length;c<P-1;c++)O=So(G[c],G[c+1],i,c,!0),O&&(a[p]=a[p]||[],a[p].push(O[0]),(O[1]!==G[c+1]||c===P-2)&&(a[p].push(O[1]),p++))}},_simplifyPoints:function(){for(var i=this._parts,a=this.options.smoothFactor,u=0,c=i.length;u<c;u++)i[u]=Co(i[u],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(i,a){var u,c,p,w,P,O,G=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(u=0,w=this._parts.length;u<w;u++)for(O=this._parts[u],c=0,P=O.length,p=P-1;c<P;p=c++)if(!(!a&&c===0)&&bo(i,O[p],O[c])<=G)return!0;return!1}});function Yf(i,a){return new li(i,a)}li._flat=Po;var en=li.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(i){var a=li.prototype._convertLatLngs.call(this,i),u=a.length;return u>=2&&a[0]instanceof gt&&a[0].equals(a[u-1])&&a.pop(),a},_setLatLngs:function(i){li.prototype._setLatLngs.call(this,i),ke(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ke(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var i=this._renderer._bounds,a=this.options.weight,u=new J(a,a);if(i=new ft(i.min.subtract(u),i.max.add(u)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(i))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,p=this._rings.length,w;c<p;c++)w=Mo(this._rings[c],i,!0),w.length&&this._parts.push(w)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(i){var a=!1,u,c,p,w,P,O,G,H;if(!this._pxBounds||!this._pxBounds.contains(i))return!1;for(w=0,G=this._parts.length;w<G;w++)for(u=this._parts[w],P=0,H=u.length,O=H-1;P<H;O=P++)c=u[P],p=u[O],c.y>i.y!=p.y>i.y&&i.x<(p.x-c.x)*(i.y-c.y)/(p.y-c.y)+c.x&&(a=!a);return a||li.prototype._containsPoint.call(this,i,!0)}});function Qf(i,a){return new en(i,a)}var ci=fi.extend({initialize:function(i,a){g(this,a),this._layers={},i&&this.addData(i)},addData:function(i){var a=M(i)?i:i.features,u,c,p;if(a){for(u=0,c=a.length;u<c;u++)p=a[u],(p.geometries||p.geometry||p.features||p.coordinates)&&this.addData(p);return this}var w=this.options;if(w.filter&&!w.filter(i))return this;var P=Tr(i,w);return P?(P.feature=Ir(i),P.defaultOptions=P.options,this.resetStyle(P),w.onEachFeature&&w.onEachFeature(i,P),this.addLayer(P)):this},resetStyle:function(i){return i===void 0?this.eachLayer(this.resetStyle,this):(i.options=s({},i.defaultOptions),this._setLayerStyle(i,this.options.style),this)},setStyle:function(i){return this.eachLayer(function(a){this._setLayerStyle(a,i)},this)},_setLayerStyle:function(i,a){i.setStyle&&(typeof a=="function"&&(a=a(i.feature)),i.setStyle(a))}});function Tr(i,a){var u=i.type==="Feature"?i.geometry:i,c=u?u.coordinates:null,p=[],w=a&&a.pointToLayer,P=a&&a.coordsToLatLng||fa,O,G,H,rt;if(!c&&!u)return null;switch(u.type){case"Point":return O=P(c),Bo(w,i,O,a);case"MultiPoint":for(H=0,rt=c.length;H<rt;H++)O=P(c[H]),p.push(Bo(w,i,O,a));return new fi(p);case"LineString":case"MultiLineString":return G=Br(c,u.type==="LineString"?0:1,P),new li(G,a);case"Polygon":case"MultiPolygon":return G=Br(c,u.type==="Polygon"?1:2,P),new en(G,a);case"GeometryCollection":for(H=0,rt=u.geometries.length;H<rt;H++){var yt=Tr({geometry:u.geometries[H],type:"Feature",properties:i.properties},a);yt&&p.push(yt)}return new fi(p);case"FeatureCollection":for(H=0,rt=u.features.length;H<rt;H++){var xt=Tr(u.features[H],a);xt&&p.push(xt)}return new fi(p);default:throw new Error("Invalid GeoJSON object.")}}function Bo(i,a,u,c){return i?i(a,u):new Fr(u,c&&c.markersInheritOptions&&c)}function fa(i){return new gt(i[1],i[0],i[2])}function Br(i,a,u){for(var c=[],p=0,w=i.length,P;p<w;p++)P=a?Br(i[p],a-1,u):(u||fa)(i[p]),c.push(P);return c}function la(i,a){return i=ct(i),i.alt!==void 0?[m(i.lng,a),m(i.lat,a),m(i.alt,a)]:[m(i.lng,a),m(i.lat,a)]}function Lr(i,a,u,c){for(var p=[],w=0,P=i.length;w<P;w++)p.push(a?Lr(i[w],ke(i[w])?0:a-1,u,c):la(i[w],c));return!a&&u&&p.length>0&&p.push(p[0].slice()),p}function nn(i,a){return i.feature?s({},i.feature,{geometry:a}):Ir(a)}function Ir(i){return i.type==="Feature"||i.type==="FeatureCollection"?i:{type:"Feature",properties:{},geometry:i}}var ca={toGeoJSON:function(i){return nn(this,{type:"Point",coordinates:la(this.getLatLng(),i)})}};Fr.include(ca),ha.include(ca),Nr.include(ca),li.include({toGeoJSON:function(i){var a=!ke(this._latlngs),u=Lr(this._latlngs,a?1:0,!1,i);return nn(this,{type:(a?"Multi":"")+"LineString",coordinates:u})}}),en.include({toGeoJSON:function(i){var a=!ke(this._latlngs),u=a&&!ke(this._latlngs[0]),c=Lr(this._latlngs,u?2:a?1:0,!0,i);return a||(c=[c]),nn(this,{type:(u?"Multi":"")+"Polygon",coordinates:c})}}),Qi.include({toMultiPoint:function(i){var a=[];return this.eachLayer(function(u){a.push(u.toGeoJSON(i).geometry.coordinates)}),nn(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(i){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(i);var u=a==="GeometryCollection",c=[];return this.eachLayer(function(p){if(p.toGeoJSON){var w=p.toGeoJSON(i);if(u)c.push(w.geometry);else{var P=Ir(w);P.type==="FeatureCollection"?c.push.apply(c,P.features):c.push(P)}}}),u?nn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function Lo(i,a){return new ci(i,a)}var tl=Lo,Or=Xe.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(i,a,u){this._url=i,this._bounds=At(a),g(this,u)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ct(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Vt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(i){return this.options.opacity=i,this._image&&this._updateOpacity(),this},setStyle:function(i){return i.opacity&&this.setOpacity(i.opacity),this},bringToFront:function(){return this._map&&Ji(this._image),this},bringToBack:function(){return this._map&&Yi(this._image),this},setUrl:function(i){return this._url=i,this._image&&(this._image.src=i),this},setBounds:function(i){return this._bounds=At(i),this._map&&this._reset(),this},getEvents:function(){var i={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var i=this._url.tagName==="IMG",a=this._image=i?this._url:Tt("img");if(Ct(a,"leaflet-image-layer"),this._zoomAnimated&&Ct(a,"leaflet-zoom-animated"),this.options.className&&Ct(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onload=h(this.fire,this,"load"),a.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),i){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(i){var a=this._map.getZoomScale(i.zoom),u=this._map._latLngBoundsToNewLayerBounds(this._bounds,i.zoom,i.center).min;Ii(this._image,u,a)},_reset:function(){var i=this._image,a=new ft(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),u=a.getSize();re(i,a.min),i.style.width=u.x+"px",i.style.height=u.y+"px"},_updateOpacity:function(){Re(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var i=this.options.errorOverlayUrl;i&&this._url!==i&&(this._url=i,this._image.src=i)},getCenter:function(){return this._bounds.getCenter()}}),el=function(i,a,u){return new Or(i,a,u)},Io=Or.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var i=this._url.tagName==="VIDEO",a=this._image=i?this._url:Tt("video");if(Ct(a,"leaflet-image-layer"),this._zoomAnimated&&Ct(a,"leaflet-zoom-animated"),this.options.className&&Ct(a,this.options.className),a.onselectstart=_,a.onmousemove=_,a.onloadeddata=h(this.fire,this,"load"),i){for(var u=a.getElementsByTagName("source"),c=[],p=0;p<u.length;p++)c.push(u[p].src);this._url=u.length>0?c:[a.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var w=0;w<this._url.length;w++){var P=Tt("source");P.src=this._url[w],a.appendChild(P)}}});function il(i,a,u){return new Io(i,a,u)}var Oo=Or.extend({_initImage:function(){var i=this._image=this._url;Ct(i,"leaflet-image-layer"),this._zoomAnimated&&Ct(i,"leaflet-zoom-animated"),this.options.className&&Ct(i,this.options.className),i.onselectstart=_,i.onmousemove=_}});function nl(i,a,u){return new Oo(i,a,u)}var ni=Xe.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(i,a){i&&(i instanceof gt||M(i))?(this._latlng=ct(i),g(this,a)):(g(this,i),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(i){return i=arguments.length?i:this._source._map,i.hasLayer(this)||i.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(i){return this._map?this.close():(arguments.length?this._source=i:i=this._source,this._prepareOpen(),this.openOn(i._map)),this},onAdd:function(i){this._zoomAnimated=i._zoomAnimated,this._container||this._initLayout(),i._fadeAnimated&&Re(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),i._fadeAnimated&&Re(this._container,1),this.bringToFront(),this.options.interactive&&(Ct(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(i){i._fadeAnimated?(Re(this._container,0),this._removeTimeout=setTimeout(h(Vt,void 0,this._container),200)):Vt(this._container),this.options.interactive&&(te(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(i){return this._latlng=ct(i),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(i){return this._content=i,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var i={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ji(this._container),this},bringToBack:function(){return this._map&&Yi(this._container),this},_prepareOpen:function(i){var a=this._source;if(!a._map)return!1;if(a instanceof fi){a=null;var u=this._source._layers;for(var c in u)if(u[c]._map){a=u[c];break}if(!a)return!1;this._source=a}if(!i)if(a.getCenter)i=a.getCenter();else if(a.getLatLng)i=a.getLatLng();else if(a.getBounds)i=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(i),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var i=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")i.innerHTML=a;else{for(;i.hasChildNodes();)i.removeChild(i.firstChild);i.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var i=this._map.latLngToLayerPoint(this._latlng),a=Q(this.options.offset),u=this._getAnchor();this._zoomAnimated?re(this._container,i.add(u)):a=a.add(i).add(u);var c=this._containerBottom=-a.y,p=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=c+"px",this._container.style.left=p+"px"}},_getAnchor:function(){return[0,0]}});Ft.include({_initOverlay:function(i,a,u,c){var p=a;return p instanceof i||(p=new i(c).setContent(a)),u&&p.setLatLng(u),p}}),Xe.include({_initOverlay:function(i,a,u,c){var p=u;return p instanceof i?(g(p,c),p._source=this):(p=a&&!c?a:new i(c,this),p.setContent(u)),p}});var Gr=ni.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(i){return i=arguments.length?i:this._source._map,!i.hasLayer(this)&&i._popup&&i._popup.options.autoClose&&i.removeLayer(i._popup),i._popup=this,ni.prototype.openOn.call(this,i)},onAdd:function(i){ni.prototype.onAdd.call(this,i),i.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Di||this._source.on("preclick",Gi))},onRemove:function(i){ni.prototype.onRemove.call(this,i),i.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Di||this._source.off("preclick",Gi))},getEvents:function(){var i=ni.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(i.preclick=this.close),this.options.keepInView&&(i.moveend=this._adjustPan),i},_initLayout:function(){var i="leaflet-popup",a=this._container=Tt("div",i+" "+(this.options.className||"")+" leaflet-zoom-animated"),u=this._wrapper=Tt("div",i+"-content-wrapper",a);if(this._contentNode=Tt("div",i+"-content",u),On(a),ea(this._contentNode),Mt(a,"contextmenu",Gi),this._tipContainer=Tt("div",i+"-tip-container",a),this._tip=Tt("div",i+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Tt("a",i+"-close-button",a);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Mt(c,"click",function(p){_e(p),this.close()},this)}},_updateLayout:function(){var i=this._contentNode,a=i.style;a.width="",a.whiteSpace="nowrap";var u=i.offsetWidth;u=Math.min(u,this.options.maxWidth),u=Math.max(u,this.options.minWidth),a.width=u+1+"px",a.whiteSpace="",a.height="";var c=i.offsetHeight,p=this.options.maxHeight,w="leaflet-popup-scrolled";p&&c>p?(a.height=p+"px",Ct(i,w)):te(i,w),this._containerWidth=this._container.offsetWidth},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center),u=this._getAnchor();re(this._container,a.add(u))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var i=this._map,a=parseInt(Tn(this._container,"marginBottom"),10)||0,u=this._container.offsetHeight+a,c=this._containerWidth,p=new J(this._containerLeft,-u-this._containerBottom);p._add(Oi(this._container));var w=i.layerPointToContainerPoint(p),P=Q(this.options.autoPanPadding),O=Q(this.options.autoPanPaddingTopLeft||P),G=Q(this.options.autoPanPaddingBottomRight||P),H=i.getSize(),rt=0,yt=0;w.x+c+G.x>H.x&&(rt=w.x+c-H.x+G.x),w.x-rt-O.x<0&&(rt=w.x-O.x),w.y+u+G.y>H.y&&(yt=w.y+u-H.y+G.y),w.y-yt-O.y<0&&(yt=w.y-O.y),(rt||yt)&&(this.options.keepInView&&(this._autopanning=!0),i.fire("autopanstart").panBy([rt,yt]))}},_getAnchor:function(){return Q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),rl=function(i,a){return new Gr(i,a)};Ft.mergeOptions({closePopupOnClick:!0}),Ft.include({openPopup:function(i,a,u){return this._initOverlay(Gr,i,a,u).openOn(this),this},closePopup:function(i){return i=arguments.length?i:this._popup,i&&i.close(),this}}),Xe.include({bindPopup:function(i,a){return this._popup=this._initOverlay(Gr,this._popup,i,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(i){return this._popup&&(this instanceof fi||(this._popup._source=this),this._popup._prepareOpen(i||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(i){return this._popup&&this._popup.setContent(i),this},getPopup:function(){return this._popup},_openPopup:function(i){if(!(!this._popup||!this._map)){zi(i);var a=i.layer||i.target;if(this._popup._source===a&&!(a instanceof Di)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(i.latlng);return}this._popup._source=a,this.openPopup(i.latlng)}},_movePopup:function(i){this._popup.setLatLng(i.latlng)},_onKeyPress:function(i){i.originalEvent.keyCode===13&&this._openPopup(i)}});var zr=ni.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(i){ni.prototype.onAdd.call(this,i),this.setOpacity(this.options.opacity),i.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(i){ni.prototype.onRemove.call(this,i),i.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var i=ni.prototype.getEvents.call(this);return this.options.permanent||(i.preclick=this.close),i},_initLayout:function(){var i="leaflet-tooltip",a=i+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Tt("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(i){var a,u,c=this._map,p=this._container,w=c.latLngToContainerPoint(c.getCenter()),P=c.layerPointToContainerPoint(i),O=this.options.direction,G=p.offsetWidth,H=p.offsetHeight,rt=Q(this.options.offset),yt=this._getAnchor();O==="top"?(a=G/2,u=H):O==="bottom"?(a=G/2,u=0):O==="center"?(a=G/2,u=H/2):O==="right"?(a=0,u=H/2):O==="left"?(a=G,u=H/2):P.x<w.x?(O="right",a=0,u=H/2):(O="left",a=G+(rt.x+yt.x)*2,u=H/2),i=i.subtract(Q(a,u,!0)).add(rt).add(yt),te(p,"leaflet-tooltip-right"),te(p,"leaflet-tooltip-left"),te(p,"leaflet-tooltip-top"),te(p,"leaflet-tooltip-bottom"),Ct(p,"leaflet-tooltip-"+O),re(p,i)},_updatePosition:function(){var i=this._map.latLngToLayerPoint(this._latlng);this._setPosition(i)},setOpacity:function(i){this.options.opacity=i,this._container&&Re(this._container,i)},_animateZoom:function(i){var a=this._map._latLngToNewLayerPoint(this._latlng,i.zoom,i.center);this._setPosition(a)},_getAnchor:function(){return Q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),sl=function(i,a){return new zr(i,a)};Ft.include({openTooltip:function(i,a,u){return this._initOverlay(zr,i,a,u).openOn(this),this},closeTooltip:function(i){return i.close(),this}}),Xe.include({bindTooltip:function(i,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zr,this._tooltip,i,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(i){if(!(!i&&this._tooltipHandlersAdded)){var a=i?"off":"on",u={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?u.add=this._openTooltip:(u.mouseover=this._openTooltip,u.mouseout=this.closeTooltip,u.click=this._openTooltip,this._map?this._addFocusListeners():u.add=this._addFocusListeners),this._tooltip.options.sticky&&(u.mousemove=this._moveTooltip),this[a](u),this._tooltipHandlersAdded=!i}},openTooltip:function(i){return this._tooltip&&(this instanceof fi||(this._tooltip._source=this),this._tooltip._prepareOpen(i)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(i){return this._tooltip&&this._tooltip.setContent(i),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&(Mt(a,"focus",function(){this._tooltip._source=i,this.openTooltip()},this),Mt(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(i){var a=typeof i.getElement=="function"&&i.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(i){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(i)});return}this._tooltip._source=i.layer||i.target,this.openTooltip(this._tooltip.options.sticky?i.latlng:void 0)}},_moveTooltip:function(i){var a=i.latlng,u,c;this._tooltip.options.sticky&&i.originalEvent&&(u=this._map.mouseEventToContainerPoint(i.originalEvent),c=this._map.containerPointToLayerPoint(u),a=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(a)}});var Go=tn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(i){var a=i&&i.tagName==="DIV"?i:document.createElement("div"),u=this.options;if(u.html instanceof Element?(Ar(a),a.appendChild(u.html)):a.innerHTML=u.html!==!1?u.html:"",u.bgPos){var c=Q(u.bgPos);a.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function al(i){return new Go(i)}tn.Default=Rn;var kn=Xe.extend({options:{tileSize:256,opacity:1,updateWhenIdle:lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(i){g(this,i)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(i){i._addZoomLimit(this)},onRemove:function(i){this._removeAllTiles(),Vt(this._container),i._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ji(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Yi(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(i){return this.options.opacity=i,this._updateOpacity(),this},setZIndex:function(i){return this.options.zIndex=i,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var i=this._clampZoom(this._map.getZoom());i!==this._tileZoom&&(this._tileZoom=i,this._updateLevels()),this._update()}return this},getEvents:function(){var i={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),i.move=this._onMove),this._zoomAnimated&&(i.zoomanim=this._animateZoom),i},createTile:function(){return document.createElement("div")},getTileSize:function(){var i=this.options.tileSize;return i instanceof J?i:new J(i,i)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(i){for(var a=this.getPane().children,u=-i(-1/0,1/0),c=0,p=a.length,w;c<p;c++)w=a[c].style.zIndex,a[c]!==this._container&&w&&(u=i(u,+w));isFinite(u)&&(this.options.zIndex=u+i(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!lt.ielt9){Re(this._container,this.options.opacity);var i=+new Date,a=!1,u=!1;for(var c in this._tiles){var p=this._tiles[c];if(!(!p.current||!p.loaded)){var w=Math.min(1,(i-p.loaded)/200);Re(p.el,w),w<1?a=!0:(p.active?u=!0:this._onOpaqueTile(p),p.active=!0)}}u&&!this._noPrune&&this._pruneTiles(),a&&(W(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Tt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var i=this._tileZoom,a=this.options.maxZoom;if(i!==void 0){for(var u in this._levels)u=Number(u),this._levels[u].el.children.length||u===i?(this._levels[u].el.style.zIndex=a-Math.abs(i-u),this._onUpdateLevel(u)):(Vt(this._levels[u].el),this._removeTilesAtZoom(u),this._onRemoveLevel(u),delete this._levels[u]);var c=this._levels[i],p=this._map;return c||(c=this._levels[i]={},c.el=Tt("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=a,c.origin=p.project(p.unproject(p.getPixelOrigin()),i).round(),c.zoom=i,this._setZoomTransform(c,p.getCenter(),p.getZoom()),_(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var i,a,u=this._map.getZoom();if(u>this.options.maxZoom||u<this.options.minZoom){this._removeAllTiles();return}for(i in this._tiles)a=this._tiles[i],a.retain=a.current;for(i in this._tiles)if(a=this._tiles[i],a.current&&!a.active){var c=a.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(i in this._tiles)this._tiles[i].retain||this._removeTile(i)}},_removeTilesAtZoom:function(i){for(var a in this._tiles)this._tiles[a].coords.z===i&&this._removeTile(a)},_removeAllTiles:function(){for(var i in this._tiles)this._removeTile(i)},_invalidateAll:function(){for(var i in this._levels)Vt(this._levels[i].el),this._onRemoveLevel(Number(i)),delete this._levels[i];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(i,a,u,c){var p=Math.floor(i/2),w=Math.floor(a/2),P=u-1,O=new J(+p,+w);O.z=+P;var G=this._tileCoordsToKey(O),H=this._tiles[G];return H&&H.active?(H.retain=!0,!0):(H&&H.loaded&&(H.retain=!0),P>c?this._retainParent(p,w,P,c):!1)},_retainChildren:function(i,a,u,c){for(var p=2*i;p<2*i+2;p++)for(var w=2*a;w<2*a+2;w++){var P=new J(p,w);P.z=u+1;var O=this._tileCoordsToKey(P),G=this._tiles[O];if(G&&G.active){G.retain=!0;continue}else G&&G.loaded&&(G.retain=!0);u+1<c&&this._retainChildren(p,w,u+1,c)}},_resetView:function(i){var a=i&&(i.pinch||i.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(i){this._setView(i.center,i.zoom,!0,i.noUpdate)},_clampZoom:function(i){var a=this.options;return a.minNativeZoom!==void 0&&i<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<i?a.maxNativeZoom:i},_setView:function(i,a,u,c){var p=Math.round(a);this.options.maxZoom!==void 0&&p>this.options.maxZoom||this.options.minZoom!==void 0&&p<this.options.minZoom?p=void 0:p=this._clampZoom(p);var w=this.options.updateWhenZooming&&p!==this._tileZoom;(!c||w)&&(this._tileZoom=p,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),p!==void 0&&this._update(i),u||this._pruneTiles(),this._noPrune=!!u),this._setZoomTransforms(i,a)},_setZoomTransforms:function(i,a){for(var u in this._levels)this._setZoomTransform(this._levels[u],i,a)},_setZoomTransform:function(i,a,u){var c=this._map.getZoomScale(u,i.zoom),p=i.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(a,u)).round();lt.any3d?Ii(i.el,p,c):re(i.el,p)},_resetGrid:function(){var i=this._map,a=i.options.crs,u=this._tileSize=this.getTileSize(),c=this._tileZoom,p=this._map.getPixelWorldBounds(this._tileZoom);p&&(this._globalTileRange=this._pxBoundsToTileRange(p)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(i.project([0,a.wrapLng[0]],c).x/u.x),Math.ceil(i.project([0,a.wrapLng[1]],c).x/u.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(i.project([a.wrapLat[0],0],c).y/u.x),Math.ceil(i.project([a.wrapLat[1],0],c).y/u.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(i){var a=this._map,u=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),c=a.getZoomScale(u,this._tileZoom),p=a.project(i,this._tileZoom).floor(),w=a.getSize().divideBy(c*2);return new ft(p.subtract(w),p.add(w))},_update:function(i){var a=this._map;if(a){var u=this._clampZoom(a.getZoom());if(i===void 0&&(i=a.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(i),p=this._pxBoundsToTileRange(c),w=p.getCenter(),P=[],O=this.options.keepBuffer,G=new ft(p.getBottomLeft().subtract([O,-O]),p.getTopRight().add([O,-O]));if(!(isFinite(p.min.x)&&isFinite(p.min.y)&&isFinite(p.max.x)&&isFinite(p.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var H in this._tiles){var rt=this._tiles[H].coords;(rt.z!==this._tileZoom||!G.contains(new J(rt.x,rt.y)))&&(this._tiles[H].current=!1)}if(Math.abs(u-this._tileZoom)>1){this._setView(i,u);return}for(var yt=p.min.y;yt<=p.max.y;yt++)for(var xt=p.min.x;xt<=p.max.x;xt++){var Ae=new J(xt,yt);if(Ae.z=this._tileZoom,!!this._isValidTile(Ae)){var le=this._tiles[this._tileCoordsToKey(Ae)];le?le.current=!0:P.push(Ae)}}if(P.sort(function(Se,sn){return Se.distanceTo(w)-sn.distanceTo(w)}),P.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ze=document.createDocumentFragment();for(xt=0;xt<P.length;xt++)this._addTile(P[xt],Ze);this._level.el.appendChild(Ze)}}}},_isValidTile:function(i){var a=this._map.options.crs;if(!a.infinite){var u=this._globalTileRange;if(!a.wrapLng&&(i.x<u.min.x||i.x>u.max.x)||!a.wrapLat&&(i.y<u.min.y||i.y>u.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(i);return At(this.options.bounds).overlaps(c)},_keyToBounds:function(i){return this._tileCoordsToBounds(this._keyToTileCoords(i))},_tileCoordsToNwSe:function(i){var a=this._map,u=this.getTileSize(),c=i.scaleBy(u),p=c.add(u),w=a.unproject(c,i.z),P=a.unproject(p,i.z);return[w,P]},_tileCoordsToBounds:function(i){var a=this._tileCoordsToNwSe(i),u=new Et(a[0],a[1]);return this.options.noWrap||(u=this._map.wrapLatLngBounds(u)),u},_tileCoordsToKey:function(i){return i.x+":"+i.y+":"+i.z},_keyToTileCoords:function(i){var a=i.split(":"),u=new J(+a[0],+a[1]);return u.z=+a[2],u},_removeTile:function(i){var a=this._tiles[i];a&&(Vt(a.el),delete this._tiles[i],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(i)}))},_initTile:function(i){Ct(i,"leaflet-tile");var a=this.getTileSize();i.style.width=a.x+"px",i.style.height=a.y+"px",i.onselectstart=_,i.onmousemove=_,lt.ielt9&&this.options.opacity<1&&Re(i,this.options.opacity)},_addTile:function(i,a){var u=this._getTilePos(i),c=this._tileCoordsToKey(i),p=this.createTile(this._wrapCoords(i),h(this._tileReady,this,i));this._initTile(p),this.createTile.length<2&&k(h(this._tileReady,this,i,null,p)),re(p,u),this._tiles[c]={el:p,coords:i,current:!0},a.appendChild(p),this.fire("tileloadstart",{tile:p,coords:i})},_tileReady:function(i,a,u){a&&this.fire("tileerror",{error:a,tile:u,coords:i});var c=this._tileCoordsToKey(i);u=this._tiles[c],u&&(u.loaded=+new Date,this._map._fadeAnimated?(Re(u.el,0),W(this._fadeFrame),this._fadeFrame=k(this._updateOpacity,this)):(u.active=!0,this._pruneTiles()),a||(Ct(u.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:u.el,coords:i})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),lt.ielt9||!this._map._fadeAnimated?k(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(i){return i.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(i){var a=new J(this._wrapX?v(i.x,this._wrapX):i.x,this._wrapY?v(i.y,this._wrapY):i.y);return a.z=i.z,a},_pxBoundsToTileRange:function(i){var a=this.getTileSize();return new ft(i.min.unscaleBy(a).floor(),i.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var i in this._tiles)if(!this._tiles[i].loaded)return!1;return!0}});function ol(i){return new kn(i)}var rn=kn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(i,a){this._url=i,a=g(this,a),a.detectRetina&&lt.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(i,a){return this._url===i&&a===void 0&&(a=!0),this._url=i,a||this.redraw(),this},createTile:function(i,a){var u=document.createElement("img");return Mt(u,"load",h(this._tileOnLoad,this,a,u)),Mt(u,"error",h(this._tileOnError,this,a,u)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(u.referrerPolicy=this.options.referrerPolicy),u.alt="",u.src=this.getTileUrl(i),u},getTileUrl:function(i){var a={r:lt.retina?"@2x":"",s:this._getSubdomain(i),x:i.x,y:i.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var u=this._globalTileRange.max.y-i.y;this.options.tms&&(a.y=u),a["-y"]=u}return S(this._url,s(a,this.options))},_tileOnLoad:function(i,a){lt.ielt9?setTimeout(h(i,this,null,a),0):i(null,a)},_tileOnError:function(i,a,u){var c=this.options.errorTileUrl;c&&a.getAttribute("src")!==c&&(a.src=c),i(u,a)},_onTileRemove:function(i){i.tile.onload=null},_getZoomForUrl:function(){var i=this._tileZoom,a=this.options.maxZoom,u=this.options.zoomReverse,c=this.options.zoomOffset;return u&&(i=a-i),i+c},_getSubdomain:function(i){var a=Math.abs(i.x+i.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var i,a;for(i in this._tiles)if(this._tiles[i].coords.z!==this._tileZoom&&(a=this._tiles[i].el,a.onload=_,a.onerror=_,!a.complete)){a.src=C;var u=this._tiles[i].coords;Vt(a),delete this._tiles[i],this.fire("tileabort",{tile:a,coords:u})}},_removeTile:function(i){var a=this._tiles[i];if(a)return a.el.setAttribute("src",C),kn.prototype._removeTile.call(this,i)},_tileReady:function(i,a,u){if(!(!this._map||u&&u.getAttribute("src")===C))return kn.prototype._tileReady.call(this,i,a,u)}});function zo(i,a){return new rn(i,a)}var Ro=rn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(i,a){this._url=i;var u=s({},this.defaultWmsParams);for(var c in a)c in this.options||(u[c]=a[c]);a=g(this,a);var p=a.detectRetina&&lt.retina?2:1,w=this.getTileSize();u.width=w.x*p,u.height=w.y*p,this.wmsParams=u},onAdd:function(i){this._crs=this.options.crs||i.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,rn.prototype.onAdd.call(this,i)},getTileUrl:function(i){var a=this._tileCoordsToNwSe(i),u=this._crs,c=wt(u.project(a[0]),u.project(a[1])),p=c.min,w=c.max,P=(this._wmsVersion>=1.3&&this._crs===No?[p.y,p.x,w.y,w.x]:[p.x,p.y,w.x,w.y]).join(","),O=rn.prototype.getTileUrl.call(this,i);return O+D(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+P},setParams:function(i,a){return s(this.wmsParams,i),a||this.redraw(),this}});function ul(i,a){return new Ro(i,a)}rn.WMS=Ro,zo.wms=ul;var di=Xe.extend({options:{padding:.1},initialize:function(i){g(this,i),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ct(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var i={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(i.zoomanim=this._onAnimZoom),i},_onAnimZoom:function(i){this._updateTransform(i.center,i.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(i,a){var u=this._map.getZoomScale(a,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),p=this._map.project(this._center,a),w=c.multiplyBy(-u).add(p).subtract(this._map._getNewPixelOrigin(i,a));lt.any3d?Ii(this._container,w,u):re(this._container,w)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var i in this._layers)this._layers[i]._reset()},_onZoomEnd:function(){for(var i in this._layers)this._layers[i]._project()},_updatePaths:function(){for(var i in this._layers)this._layers[i]._update()},_update:function(){var i=this.options.padding,a=this._map.getSize(),u=this._map.containerPointToLayerPoint(a.multiplyBy(-i)).round();this._bounds=new ft(u,u.add(a.multiplyBy(1+i*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ko=di.extend({options:{tolerance:0},getEvents:function(){var i=di.prototype.getEvents.call(this);return i.viewprereset=this._onViewPreReset,i},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){di.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var i=this._container=document.createElement("canvas");Mt(i,"mousemove",this._onMouseMove,this),Mt(i,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Mt(i,"mouseout",this._handleMouseOut,this),i._leaflet_disable_events=!0,this._ctx=i.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,Vt(this._container),Zt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var i;this._redrawBounds=null;for(var a in this._layers)i=this._layers[a],i._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var i=this._bounds,a=this._container,u=i.getSize(),c=lt.retina?2:1;re(a,i.min),a.width=c*u.x,a.height=c*u.y,a.style.width=u.x+"px",a.style.height=u.y+"px",lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-i.min.x,-i.min.y),this.fire("update")}},_reset:function(){di.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(i){this._updateDashArray(i),this._layers[l(i)]=i;var a=i._order={layer:i,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(i){this._requestRedraw(i)},_removePath:function(i){var a=i._order,u=a.next,c=a.prev;u?u.prev=c:this._drawLast=c,c?c.next=u:this._drawFirst=u,delete i._order,delete this._layers[l(i)],this._requestRedraw(i)},_updatePath:function(i){this._extendRedrawBounds(i),i._project(),i._update(),this._requestRedraw(i)},_updateStyle:function(i){this._updateDashArray(i),this._requestRedraw(i)},_updateDashArray:function(i){if(typeof i.options.dashArray=="string"){var a=i.options.dashArray.split(/[, ]+/),u=[],c,p;for(p=0;p<a.length;p++){if(c=Number(a[p]),isNaN(c))return;u.push(c)}i.options._dashArray=u}else i.options._dashArray=i.options.dashArray},_requestRedraw:function(i){this._map&&(this._extendRedrawBounds(i),this._redrawRequest=this._redrawRequest||k(this._redraw,this))},_extendRedrawBounds:function(i){if(i._pxBounds){var a=(i.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ft,this._redrawBounds.extend(i._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(i._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var i=this._redrawBounds;if(i){var a=i.getSize();this._ctx.clearRect(i.min.x,i.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var i,a=this._redrawBounds;if(this._ctx.save(),a){var u=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,u.x,u.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)i=c.layer,(!a||i._pxBounds&&i._pxBounds.intersects(a))&&i._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(i,a){if(this._drawing){var u,c,p,w,P=i._parts,O=P.length,G=this._ctx;if(O){for(G.beginPath(),u=0;u<O;u++){for(c=0,p=P[u].length;c<p;c++)w=P[u][c],G[c?"lineTo":"moveTo"](w.x,w.y);a&&G.closePath()}this._fillStroke(G,i)}}},_updateCircle:function(i){if(!(!this._drawing||i._empty())){var a=i._point,u=this._ctx,c=Math.max(Math.round(i._radius),1),p=(Math.max(Math.round(i._radiusY),1)||c)/c;p!==1&&(u.save(),u.scale(1,p)),u.beginPath(),u.arc(a.x,a.y/p,c,0,Math.PI*2,!1),p!==1&&u.restore(),this._fillStroke(u,i)}},_fillStroke:function(i,a){var u=a.options;u.fill&&(i.globalAlpha=u.fillOpacity,i.fillStyle=u.fillColor||u.color,i.fill(u.fillRule||"evenodd")),u.stroke&&u.weight!==0&&(i.setLineDash&&i.setLineDash(a.options&&a.options._dashArray||[]),i.globalAlpha=u.opacity,i.lineWidth=u.weight,i.strokeStyle=u.color,i.lineCap=u.lineCap,i.lineJoin=u.lineJoin,i.stroke())},_onClick:function(i){for(var a=this._map.mouseEventToLayerPoint(i),u,c,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(!(i.type==="click"||i.type==="preclick")||!this._map._draggableMoved(u))&&(c=u);this._fireEvent(c?[c]:!1,i)},_onMouseMove:function(i){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(i);this._handleMouseHover(i,a)}},_handleMouseOut:function(i){var a=this._hoveredLayer;a&&(te(this._container,"leaflet-interactive"),this._fireEvent([a],i,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(i,a){if(!this._mouseHoverThrottled){for(var u,c,p=this._drawFirst;p;p=p.next)u=p.layer,u.options.interactive&&u._containsPoint(a)&&(c=u);c!==this._hoveredLayer&&(this._handleMouseOut(i),c&&(Ct(this._container,"leaflet-interactive"),this._fireEvent([c],i,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,i),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(i,a,u){this._map._fireDOMEvent(a,u||a.type,i)},_bringToFront:function(i){var a=i._order;if(a){var u=a.next,c=a.prev;if(u)u.prev=c;else return;c?c.next=u:u&&(this._drawFirst=u),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(i)}},_bringToBack:function(i){var a=i._order;if(a){var u=a.next,c=a.prev;if(c)c.next=u;else return;u?u.prev=c:c&&(this._drawLast=c),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(i)}}});function Zo(i){return lt.canvas?new ko(i):null}var Zn=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(i){return document.createElement("<lvml:"+i+' class="lvml">')}}catch{}return function(i){return document.createElement("<"+i+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),hl={_initContainer:function(){this._container=Tt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(di.prototype._update.call(this),this.fire("update"))},_initPath:function(i){var a=i._container=Zn("shape");Ct(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",i._path=Zn("path"),a.appendChild(i._path),this._updateStyle(i),this._layers[l(i)]=i},_addPath:function(i){var a=i._container;this._container.appendChild(a),i.options.interactive&&i.addInteractiveTarget(a)},_removePath:function(i){var a=i._container;Vt(a),i.removeInteractiveTarget(a),delete this._layers[l(i)]},_updateStyle:function(i){var a=i._stroke,u=i._fill,c=i.options,p=i._container;p.stroked=!!c.stroke,p.filled=!!c.fill,c.stroke?(a||(a=i._stroke=Zn("stroke")),p.appendChild(a),a.weight=c.weight+"px",a.color=c.color,a.opacity=c.opacity,c.dashArray?a.dashStyle=M(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=c.lineCap.replace("butt","flat"),a.joinstyle=c.lineJoin):a&&(p.removeChild(a),i._stroke=null),c.fill?(u||(u=i._fill=Zn("fill")),p.appendChild(u),u.color=c.fillColor||c.color,u.opacity=c.fillOpacity):u&&(p.removeChild(u),i._fill=null)},_updateCircle:function(i){var a=i._point.round(),u=Math.round(i._radius),c=Math.round(i._radiusY||u);this._setPath(i,i._empty()?"M0 0":"AL "+a.x+","+a.y+" "+u+","+c+" 0,"+65535*360)},_setPath:function(i,a){i._path.v=a},_bringToFront:function(i){Ji(i._container)},_bringToBack:function(i){Yi(i._container)}},Rr=lt.vml?Zn:Me,qn=di.extend({_initContainer:function(){this._container=Rr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Rr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Vt(this._container),Zt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){di.prototype._update.call(this);var i=this._bounds,a=i.getSize(),u=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,u.setAttribute("width",a.x),u.setAttribute("height",a.y)),re(u,i.min),u.setAttribute("viewBox",[i.min.x,i.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(i){var a=i._path=Rr("path");i.options.className&&Ct(a,i.options.className),i.options.interactive&&Ct(a,"leaflet-interactive"),this._updateStyle(i),this._layers[l(i)]=i},_addPath:function(i){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(i._path),i.addInteractiveTarget(i._path)},_removePath:function(i){Vt(i._path),i.removeInteractiveTarget(i._path),delete this._layers[l(i)]},_updatePath:function(i){i._project(),i._update()},_updateStyle:function(i){var a=i._path,u=i.options;a&&(u.stroke?(a.setAttribute("stroke",u.color),a.setAttribute("stroke-opacity",u.opacity),a.setAttribute("stroke-width",u.weight),a.setAttribute("stroke-linecap",u.lineCap),a.setAttribute("stroke-linejoin",u.lineJoin),u.dashArray?a.setAttribute("stroke-dasharray",u.dashArray):a.removeAttribute("stroke-dasharray"),u.dashOffset?a.setAttribute("stroke-dashoffset",u.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),u.fill?(a.setAttribute("fill",u.fillColor||u.color),a.setAttribute("fill-opacity",u.fillOpacity),a.setAttribute("fill-rule",u.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(i,a){this._setPath(i,Ge(i._parts,a))},_updateCircle:function(i){var a=i._point,u=Math.max(Math.round(i._radius),1),c=Math.max(Math.round(i._radiusY),1)||u,p="a"+u+","+c+" 0 1,0 ",w=i._empty()?"M0 0":"M"+(a.x-u)+","+a.y+p+u*2+",0 "+p+-u*2+",0 ";this._setPath(i,w)},_setPath:function(i,a){i._path.setAttribute("d",a)},_bringToFront:function(i){Ji(i._path)},_bringToBack:function(i){Yi(i._path)}});lt.vml&&qn.include(hl);function qo(i){return lt.svg||lt.vml?new qn(i):null}Ft.include({getRenderer:function(i){var a=i.options.renderer||this._getPaneRenderer(i.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(i){if(i==="overlayPane"||i===void 0)return!1;var a=this._paneRenderers[i];return a===void 0&&(a=this._createRenderer({pane:i}),this._paneRenderers[i]=a),a},_createRenderer:function(i){return this.options.preferCanvas&&Zo(i)||qo(i)}});var Uo=en.extend({initialize:function(i,a){en.prototype.initialize.call(this,this._boundsToLatLngs(i),a)},setBounds:function(i){return this.setLatLngs(this._boundsToLatLngs(i))},_boundsToLatLngs:function(i){return i=At(i),[i.getSouthWest(),i.getNorthWest(),i.getNorthEast(),i.getSouthEast()]}});function fl(i,a){return new Uo(i,a)}qn.create=Rr,qn.pointsToPath=Ge,ci.geometryToLayer=Tr,ci.coordsToLatLng=fa,ci.coordsToLatLngs=Br,ci.latLngToCoords=la,ci.latLngsToCoords=Lr,ci.getFeature=nn,ci.asFeature=Ir,Ft.mergeOptions({boxZoom:!0});var Wo=ii.extend({initialize:function(i){this._map=i,this._container=i._container,this._pane=i._panes.overlayPane,this._resetStateTimeout=0,i.on("unload",this._destroy,this)},addHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Zt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Vt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(i){if(!i.shiftKey||i.which!==1&&i.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Bn(),js(),this._startPoint=this._map.mouseEventToContainerPoint(i),Mt(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(i){this._moved||(this._moved=!0,this._box=Tt("div","leaflet-zoom-box",this._container),Ct(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(i);var a=new ft(this._point,this._startPoint),u=a.getSize();re(this._box,a.min),this._box.style.width=u.x+"px",this._box.style.height=u.y+"px"},_finish:function(){this._moved&&(Vt(this._box),te(this._container,"leaflet-crosshair")),Ln(),Vs(),Zt(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(i){if(!(i.which!==1&&i.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var a=new Et(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(i){i.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ft.addInitHook("addHandler","boxZoom",Wo),Ft.mergeOptions({doubleClickZoom:!0});var $o=ii.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(i){var a=this._map,u=a.getZoom(),c=a.options.zoomDelta,p=i.originalEvent.shiftKey?u-c:u+c;a.options.doubleClickZoom==="center"?a.setZoom(p):a.setZoomAround(i.containerPoint,p)}});Ft.addInitHook("addHandler","doubleClickZoom",$o),Ft.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ho=ii.extend({addHooks:function(){if(!this._draggable){var i=this._map;this._draggable=new wi(i._mapPane,i._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),i.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),i.on("zoomend",this._onZoomEnd,this),i.whenReady(this._onZoomEnd,this))}Ct(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){te(this._map._container,"leaflet-grab"),te(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var i=this._map;if(i._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=At(this._map.options.maxBounds);this._offsetLimit=wt(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;i.fire("movestart").fire("dragstart"),i.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(i){if(this._map.options.inertia){var a=this._lastTime=+new Date,u=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(u),this._times.push(a),this._prunePositions(a)}this._map.fire("move",i).fire("drag",i)},_prunePositions:function(i){for(;this._positions.length>1&&i-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var i=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(i).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(i,a){return i-(i-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var i=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;i.x<a.min.x&&(i.x=this._viscousLimit(i.x,a.min.x)),i.y<a.min.y&&(i.y=this._viscousLimit(i.y,a.min.y)),i.x>a.max.x&&(i.x=this._viscousLimit(i.x,a.max.x)),i.y>a.max.y&&(i.y=this._viscousLimit(i.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(i)}},_onPreDragWrap:function(){var i=this._worldWidth,a=Math.round(i/2),u=this._initialWorldOffset,c=this._draggable._newPos.x,p=(c-a+u)%i+a-u,w=(c+a+u)%i-a-u,P=Math.abs(p+u)<Math.abs(w+u)?p:w;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=P},_onDragEnd:function(i){var a=this._map,u=a.options,c=!u.inertia||i.noInertia||this._times.length<2;if(a.fire("dragend",i),c)a.fire("moveend");else{this._prunePositions(+new Date);var p=this._lastPos.subtract(this._positions[0]),w=(this._lastTime-this._times[0])/1e3,P=u.easeLinearity,O=p.multiplyBy(P/w),G=O.distanceTo([0,0]),H=Math.min(u.inertiaMaxSpeed,G),rt=O.multiplyBy(H/G),yt=H/(u.inertiaDeceleration*P),xt=rt.multiplyBy(-yt/2).round();!xt.x&&!xt.y?a.fire("moveend"):(xt=a._limitOffset(xt,a.options.maxBounds),k(function(){a.panBy(xt,{duration:yt,easeLinearity:P,noMoveStart:!0,animate:!0})}))}}});Ft.addInitHook("addHandler","dragging",Ho),Ft.mergeOptions({keyboard:!0,keyboardPanDelta:80});var jo=ii.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(i){this._map=i,this._setPanDelta(i.options.keyboardPanDelta),this._setZoomDelta(i.options.zoomDelta)},addHooks:function(){var i=this._map._container;i.tabIndex<=0&&(i.tabIndex="0"),Mt(i,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Zt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var i=document.body,a=document.documentElement,u=i.scrollTop||a.scrollTop,c=i.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(c,u)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(i){var a=this._panKeys={},u=this.keyCodes,c,p;for(c=0,p=u.left.length;c<p;c++)a[u.left[c]]=[-1*i,0];for(c=0,p=u.right.length;c<p;c++)a[u.right[c]]=[i,0];for(c=0,p=u.down.length;c<p;c++)a[u.down[c]]=[0,i];for(c=0,p=u.up.length;c<p;c++)a[u.up[c]]=[0,-1*i]},_setZoomDelta:function(i){var a=this._zoomKeys={},u=this.keyCodes,c,p;for(c=0,p=u.zoomIn.length;c<p;c++)a[u.zoomIn[c]]=i;for(c=0,p=u.zoomOut.length;c<p;c++)a[u.zoomOut[c]]=-i},_addHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Zt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(i){if(!(i.altKey||i.ctrlKey||i.metaKey)){var a=i.keyCode,u=this._map,c;if(a in this._panKeys){if(!u._panAnim||!u._panAnim._inProgress)if(c=this._panKeys[a],i.shiftKey&&(c=Q(c).multiplyBy(3)),u.options.maxBounds&&(c=u._limitOffset(Q(c),u.options.maxBounds)),u.options.worldCopyJump){var p=u.wrapLatLng(u.unproject(u.project(u.getCenter()).add(c)));u.panTo(p)}else u.panBy(c)}else if(a in this._zoomKeys)u.setZoom(u.getZoom()+(i.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&u._popup&&u._popup.options.closeOnEscapeKey)u.closePopup();else return;zi(i)}}});Ft.addInitHook("addHandler","keyboard",jo),Ft.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Vo=ii.extend({addHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Zt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(i){var a=go(i),u=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(i),this._startTime||(this._startTime=+new Date);var c=Math.max(u-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),c),zi(i)},_performZoom:function(){var i=this._map,a=i.getZoom(),u=this._map.options.zoomSnap||0;i._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),p=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,w=u?Math.ceil(p/u)*u:p,P=i._limitZoom(a+(this._delta>0?w:-w))-a;this._delta=0,this._startTime=null,P&&(i.options.scrollWheelZoom==="center"?i.setZoom(a+P):i.setZoomAround(this._lastMousePos,a+P))}});Ft.addInitHook("addHandler","scrollWheelZoom",Vo);var ll=600;Ft.mergeOptions({tapHold:lt.touchNative&&lt.safari&&lt.mobile,tapTolerance:15});var Xo=ii.extend({addHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Zt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(i){if(clearTimeout(this._holdTimeout),i.touches.length===1){var a=i.touches[0];this._startPos=this._newPos=new J(a.clientX,a.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(Mt(document,"touchend",_e),Mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),ll),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function i(){Zt(document,"touchend",_e),Zt(document,"touchend touchcancel",i)},_cancel:function(){clearTimeout(this._holdTimeout),Zt(document,"touchend touchcancel contextmenu",this._cancel,this),Zt(document,"touchmove",this._onMove,this)},_onMove:function(i){var a=i.touches[0];this._newPos=new J(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(i,a){var u=new MouseEvent(i,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});u._simulated=!0,a.target.dispatchEvent(u)}});Ft.addInitHook("addHandler","tapHold",Xo),Ft.mergeOptions({touchZoom:lt.touch,bounceAtZoomLimits:!0});var Ko=ii.extend({addHooks:function(){Ct(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){te(this._map._container,"leaflet-touch-zoom"),Zt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(i){var a=this._map;if(!(!i.touches||i.touches.length!==2||a._animatingZoom||this._zooming)){var u=a.mouseEventToContainerPoint(i.touches[0]),c=a.mouseEventToContainerPoint(i.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(u.add(c)._divideBy(2))),this._startDist=u.distanceTo(c),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),_e(i)}},_onTouchMove:function(i){if(!(!i.touches||i.touches.length!==2||!this._zooming)){var a=this._map,u=a.mouseEventToContainerPoint(i.touches[0]),c=a.mouseEventToContainerPoint(i.touches[1]),p=u.distanceTo(c)/this._startDist;if(this._zoom=a.getScaleZoom(p,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&p<1||this._zoom>a.getMaxZoom()&&p>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,p===1)return}else{var w=u._add(c)._divideBy(2)._subtract(this._centerPoint);if(p===1&&w.x===0&&w.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(w),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var P=h(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=k(P,this,!0),_e(i)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),Zt(document,"touchmove",this._onTouchMove,this),Zt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ft.addInitHook("addHandler","touchZoom",Ko),Ft.BoxZoom=Wo,Ft.DoubleClickZoom=$o,Ft.Drag=Ho,Ft.Keyboard=jo,Ft.ScrollWheelZoom=Vo,Ft.TapHold=Xo,Ft.TouchZoom=Ko,n.Bounds=ft,n.Browser=lt,n.CRS=St,n.Canvas=ko,n.Circle=ha,n.CircleMarker=Nr,n.Class=ot,n.Control=Ve,n.DivIcon=Go,n.DivOverlay=ni,n.DomEvent=Pf,n.DomUtil=xf,n.Draggable=wi,n.Evented=_t,n.FeatureGroup=fi,n.GeoJSON=ci,n.GridLayer=kn,n.Handler=ii,n.Icon=tn,n.ImageOverlay=Or,n.LatLng=gt,n.LatLngBounds=Et,n.Layer=Xe,n.LayerGroup=Qi,n.LineUtil=qf,n.Map=Ft,n.Marker=Fr,n.Mixin=Of,n.Path=Di,n.Point=J,n.PolyUtil=Gf,n.Polygon=en,n.Polyline=li,n.Popup=Gr,n.PosAnimation=yo,n.Projection=Uf,n.Rectangle=Uo,n.Renderer=di,n.SVG=qn,n.SVGOverlay=Oo,n.TileLayer=rn,n.Tooltip=zr,n.Transformation=pe,n.Util=at,n.VideoOverlay=Io,n.bind=h,n.bounds=wt,n.canvas=Zo,n.circle=Jf,n.circleMarker=Kf,n.control=Gn,n.divIcon=al,n.extend=s,n.featureGroup=jf,n.geoJSON=Lo,n.geoJson=tl,n.gridLayer=ol,n.icon=Vf,n.imageOverlay=el,n.latLng=ct,n.latLngBounds=At,n.layerGroup=Hf,n.map=Ff,n.marker=Xf,n.point=Q,n.polygon=Qf,n.polyline=Yf,n.popup=rl,n.rectangle=fl,n.setOptions=g,n.stamp=l,n.svg=qo,n.svgOverlay=nl,n.tileLayer=zo,n.tooltip=sl,n.transformation=Ht,n.version=r,n.videoOverlay=il;var cl=window.L;n.noConflict=function(){return window.L=cl,this},window.L=n}))})(Wn,Wn.exports)),Wn.exports}var Pl=Sl();const an=Dl(Pl);let ki=null,_a=null;function Fl(t,e){ki?ki.removeLayer(_a):ki=an.map("map").setView(t,18),an.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(ki);const n=an.tileLayer("https://tile.openstreetmap.org/{z}/{x}/{y}.png"),r=an.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}");an.control.layers({Карта:n,Супутник:r}).addTo(ki),ki.setView(t,18),_a=an.polygon(e).addTo(ki),_a.bindPopup(t.map(s=>s.toFixed(8)).join(", "))}function Nl(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t("EPSG:5041","+title=WGS 84 / UPS North (E,N) +proj=stere +lat_0=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t("EPSG:5042","+title=WGS 84 / UPS South (E,N) +proj=stere +lat_0=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +datum=WGS84 +units=m"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Wi=1,$i=2,pn=3,Tl=4,Ca=5,iu=6378137,Bl=6356752314e-3,nu=.0066943799901413165,Vn=484813681109536e-20,V=Math.PI/2,Ll=.16666666666666666,Il=.04722222222222222,Ol=.022156084656084655,et=1e-10,Jt=.017453292519943295,Te=57.29577951308232,Gt=Math.PI/4,rr=Math.PI*2,ee=3.14159265359,Ie={};Ie.greenwich=0;Ie.lisbon=-9.131906111111;Ie.paris=2.337229166667;Ie.bogota=-74.080916666667;Ie.madrid=-3.687938888889;Ie.rome=12.452333333333;Ie.bern=7.439583333333;Ie.jakarta=106.807719444444;Ie.ferro=-17.666666666667;Ie.brussels=4.367975;Ie.stockholm=18.058277777778;Ie.athens=23.7163375;Ie.oslo=10.722916666667;const Gl={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.1},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ru=/[\s_\-\/\(\)]/g;function Si(t,e){if(t[e])return t[e];for(var n=Object.keys(t),r=e.toLowerCase().replace(ru,""),s=-1,o,h;++s<n.length;)if(o=n[s],h=o.toLowerCase().replace(ru,""),h===r)return t[o]}function ba(t){var e={},n=t.split("+").map(function(f){return f.trim()}).filter(function(f){return f}).reduce(function(f,l){var d=l.split("=");return d.push(!0),f[d[0].toLowerCase()]=d[1],f},{}),r,s,o,h={proj:"projName",datum:"datumCode",rf:function(f){e.rf=parseFloat(f)},lat_0:function(f){e.lat0=f*Jt},lat_1:function(f){e.lat1=f*Jt},lat_2:function(f){e.lat2=f*Jt},lat_ts:function(f){e.lat_ts=f*Jt},lon_0:function(f){e.long0=f*Jt},lon_1:function(f){e.long1=f*Jt},lon_2:function(f){e.long2=f*Jt},alpha:function(f){e.alpha=parseFloat(f)*Jt},gamma:function(f){e.rectified_grid_angle=parseFloat(f)*Jt},lonc:function(f){e.longc=f*Jt},x_0:function(f){e.x0=parseFloat(f)},y_0:function(f){e.y0=parseFloat(f)},k_0:function(f){e.k0=parseFloat(f)},k:function(f){e.k0=parseFloat(f)},a:function(f){e.a=parseFloat(f)},b:function(f){e.b=parseFloat(f)},r:function(f){e.a=e.b=parseFloat(f)},r_a:function(){e.R_A=!0},zone:function(f){e.zone=parseInt(f,10)},south:function(){e.utmSouth=!0},towgs84:function(f){e.datum_params=f.split(",").map(function(l){return parseFloat(l)})},to_meter:function(f){e.to_meter=parseFloat(f)},units:function(f){e.units=f;var l=Si(Gl,f);l&&(e.to_meter=l.to_meter)},from_greenwich:function(f){e.from_greenwich=f*Jt},pm:function(f){var l=Si(Ie,f);e.from_greenwich=(l||parseFloat(f))*Jt},nadgrids:function(f){f==="@null"?e.datumCode="none":e.nadgrids=f},axis:function(f){var l="ewnsud";f.length===3&&l.indexOf(f.substr(0,1))!==-1&&l.indexOf(f.substr(1,1))!==-1&&l.indexOf(f.substr(2,1))!==-1&&(e.axis=f)},approx:function(){e.approx=!0},over:function(){e.over=!0}};for(r in n)s=n[r],r in h?(o=h[r],typeof o=="function"?o(s):e[o]=s):e[r]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e.projStr=t,e}class uh{static getId(e){const n=e.find(r=>Array.isArray(r)&&r[0]==="ID");return n&&n.length>=3?{authority:n[1],code:parseInt(n[2],10)}:null}static convertUnit(e,n="unit"){if(!e||e.length<3)return{type:n,name:"unknown",conversion_factor:null};const r=e[1],s=parseFloat(e[2])||null,o=e.find(f=>Array.isArray(f)&&f[0]==="ID"),h=o?{authority:o[1],code:parseInt(o[2],10)}:null;return{type:n,name:r,conversion_factor:s,id:h}}static convertAxis(e){const n=e[1]||"Unknown";let r;const s=n.match(/^\((.)\)$/);if(s){const d=s[1].toUpperCase();if(d==="E")r="east";else if(d==="N")r="north";else if(d==="U")r="up";else throw new Error(`Unknown axis abbreviation: ${d}`)}else r=e[2]?e[2].toLowerCase():"unknown";const o=e.find(d=>Array.isArray(d)&&d[0]==="ORDER"),h=o?parseInt(o[1],10):null,f=e.find(d=>Array.isArray(d)&&(d[0]==="LENGTHUNIT"||d[0]==="ANGLEUNIT"||d[0]==="SCALEUNIT")),l=this.convertUnit(f);return{name:n,direction:r,unit:l,order:h}}static extractAxes(e){return e.filter(n=>Array.isArray(n)&&n[0]==="AXIS").map(n=>this.convertAxis(n)).sort((n,r)=>(n.order||0)-(r.order||0))}static convert(e,n={}){switch(e[0]){case"PROJCRS":n.type="ProjectedCRS",n.name=e[1],n.base_crs=e.find(m=>Array.isArray(m)&&m[0]==="BASEGEOGCRS")?this.convert(e.find(m=>Array.isArray(m)&&m[0]==="BASEGEOGCRS")):null,n.conversion=e.find(m=>Array.isArray(m)&&m[0]==="CONVERSION")?this.convert(e.find(m=>Array.isArray(m)&&m[0]==="CONVERSION")):null;const r=e.find(m=>Array.isArray(m)&&m[0]==="CS");r&&(n.coordinate_system={type:r[1],axis:this.extractAxes(e)});const s=e.find(m=>Array.isArray(m)&&m[0]==="LENGTHUNIT");if(s){const m=this.convertUnit(s);n.coordinate_system.unit=m}n.id=this.getId(e);break;case"BASEGEOGCRS":case"GEOGCRS":n.type="GeographicCRS",n.name=e[1];const o=e.find(m=>Array.isArray(m)&&(m[0]==="DATUM"||m[0]==="ENSEMBLE"));if(o){const m=this.convert(o);o[0]==="ENSEMBLE"?n.datum_ensemble=m:n.datum=m;const y=e.find(E=>Array.isArray(E)&&E[0]==="PRIMEM");y&&y[1]!=="Greenwich"&&(m.prime_meridian={name:y[1],longitude:parseFloat(y[2])})}n.coordinate_system={type:"ellipsoidal",axis:this.extractAxes(e)},n.id=this.getId(e);break;case"DATUM":n.type="GeodeticReferenceFrame",n.name=e[1],n.ellipsoid=e.find(m=>Array.isArray(m)&&m[0]==="ELLIPSOID")?this.convert(e.find(m=>Array.isArray(m)&&m[0]==="ELLIPSOID")):null;break;case"ENSEMBLE":n.type="DatumEnsemble",n.name=e[1],n.members=e.filter(m=>Array.isArray(m)&&m[0]==="MEMBER").map(m=>({type:"DatumEnsembleMember",name:m[1],id:this.getId(m)}));const h=e.find(m=>Array.isArray(m)&&m[0]==="ENSEMBLEACCURACY");h&&(n.accuracy=parseFloat(h[1]));const f=e.find(m=>Array.isArray(m)&&m[0]==="ELLIPSOID");f&&(n.ellipsoid=this.convert(f)),n.id=this.getId(e);break;case"ELLIPSOID":n.type="Ellipsoid",n.name=e[1],n.semi_major_axis=parseFloat(e[2]),n.inverse_flattening=parseFloat(e[3]),e.find(m=>Array.isArray(m)&&m[0]==="LENGTHUNIT")&&this.convert(e.find(m=>Array.isArray(m)&&m[0]==="LENGTHUNIT"),n);break;case"CONVERSION":n.type="Conversion",n.name=e[1],n.method=e.find(m=>Array.isArray(m)&&m[0]==="METHOD")?this.convert(e.find(m=>Array.isArray(m)&&m[0]==="METHOD")):null,n.parameters=e.filter(m=>Array.isArray(m)&&m[0]==="PARAMETER").map(m=>this.convert(m));break;case"METHOD":n.type="Method",n.name=e[1],n.id=this.getId(e);break;case"PARAMETER":n.type="Parameter",n.name=e[1],n.value=parseFloat(e[2]),n.unit=this.convertUnit(e.find(m=>Array.isArray(m)&&(m[0]==="LENGTHUNIT"||m[0]==="ANGLEUNIT"||m[0]==="SCALEUNIT"))),n.id=this.getId(e);break;case"BOUNDCRS":n.type="BoundCRS";const l=e.find(m=>Array.isArray(m)&&m[0]==="SOURCECRS");if(l){const m=l.find(y=>Array.isArray(y));n.source_crs=m?this.convert(m):null}const d=e.find(m=>Array.isArray(m)&&m[0]==="TARGETCRS");if(d){const m=d.find(y=>Array.isArray(y));n.target_crs=m?this.convert(m):null}const v=e.find(m=>Array.isArray(m)&&m[0]==="ABRIDGEDTRANSFORMATION");v?n.transformation=this.convert(v):n.transformation=null;break;case"ABRIDGEDTRANSFORMATION":if(n.type="Transformation",n.name=e[1],n.method=e.find(m=>Array.isArray(m)&&m[0]==="METHOD")?this.convert(e.find(m=>Array.isArray(m)&&m[0]==="METHOD")):null,n.parameters=e.filter(m=>Array.isArray(m)&&(m[0]==="PARAMETER"||m[0]==="PARAMETERFILE")).map(m=>{if(m[0]==="PARAMETER")return this.convert(m);if(m[0]==="PARAMETERFILE")return{name:m[1],value:m[2],id:{authority:"EPSG",code:8656}}}),n.parameters.length===7){const m=n.parameters[6];m.name==="Scale difference"&&(m.value=Math.round((m.value-1)*1e12)/1e6)}n.id=this.getId(e);break;case"AXIS":n.coordinate_system||(n.coordinate_system={type:"unspecified",axis:[]}),n.coordinate_system.axis.push(this.convertAxis(e));break;case"LENGTHUNIT":const _=this.convertUnit(e,"LinearUnit");n.coordinate_system&&n.coordinate_system.axis&&n.coordinate_system.axis.forEach(m=>{m.unit||(m.unit=_)}),_.conversion_factor&&_.conversion_factor!==1&&n.semi_major_axis&&(n.semi_major_axis={value:n.semi_major_axis,unit:_});break;default:n.keyword=e[0];break}return n}}class zl extends uh{static convert(e,n={}){return super.convert(e,n),n.coordinate_system&&n.coordinate_system.subtype==="Cartesian"&&delete n.coordinate_system,n.usage&&delete n.usage,n}}class Rl extends uh{static convert(e,n={}){super.convert(e,n);const r=e.find(o=>Array.isArray(o)&&o[0]==="CS");r&&(n.coordinate_system={subtype:r[1],axis:this.extractAxes(e)});const s=e.find(o=>Array.isArray(o)&&o[0]==="USAGE");if(s){const o=s.find(l=>Array.isArray(l)&&l[0]==="SCOPE"),h=s.find(l=>Array.isArray(l)&&l[0]==="AREA"),f=s.find(l=>Array.isArray(l)&&l[0]==="BBOX");n.usage={},o&&(n.usage.scope=o[1]),h&&(n.usage.area=h[1]),f&&(n.usage.bbox=f.slice(1))}return n}}function kl(t){return t.find(e=>Array.isArray(e)&&e[0]==="USAGE")?"2019":(t.find(e=>Array.isArray(e)&&e[0]==="CS")||t[0]==="BOUNDCRS"||t[0]==="PROJCRS"||t[0]==="GEOGCRS","2015")}function Zl(t){return(kl(t)==="2019"?Rl:zl).convert(t)}function ql(t){const e=t.toUpperCase();return e.includes("PROJCRS")||e.includes("GEOGCRS")||e.includes("BOUNDCRS")||e.includes("VERTCRS")||e.includes("LENGTHUNIT")||e.includes("ANGLEUNIT")||e.includes("SCALEUNIT")?"WKT2":(e.includes("PROJCS")||e.includes("GEOGCS")||e.includes("LOCAL_CS")||e.includes("VERT_CS")||e.includes("UNIT"),"WKT1")}var sr=1,hh=2,fh=3,ns=4,lh=5,qa=-1,Ul=/\s/,Wl=/[A-Za-z]/,$l=/[A-Za-z84_]/,Es=/[,\]]/,ch=/[\d\.E\-\+]/;function pi(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=sr}pi.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==ns)for(;Ul.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case sr:return this.neutral(t);case hh:return this.keyword(t);case ns:return this.quoted(t);case lh:return this.afterquote(t);case fh:return this.number(t);case qa:return}};pi.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=ns;return}if(Es.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};pi.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=sr;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=sr,this.currentObject=this.stack.pop(),this.currentObject||(this.state=qa);return}};pi.prototype.number=function(t){if(ch.test(t)){this.word+=t;return}if(Es.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};pi.prototype.quoted=function(t){if(t==='"'){this.state=lh;return}this.word+=t};pi.prototype.keyword=function(t){if($l.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=sr;return}if(Es.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};pi.prototype.neutral=function(t){if(Wl.test(t)){this.word=t,this.state=hh;return}if(t==='"'){this.word="",this.state=ns;return}if(ch.test(t)){this.word=t,this.state=fh;return}if(Es.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};pi.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===qa)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function Hl(t){var e=new pi(t);return e.output()}function ma(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var r=e?{}:t,s=n.reduce(function(o,h){return ln(h,o),o},r);e&&(t[e]=s)}function ln(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},ln(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var r;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&ln(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&ln(t[3],e[n]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":t[0]=["name",t[0]],ma(e,n,t);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":t[0]=["name",t[0]],ma(e,n,t),e[n].type=n;return;default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return ln(t,e[n]);return ma(e,n,t)}}var jl=.017453292519943295;function Je(t){return t*jl}function dh(t){const e=(t.projName||"").toLowerCase().replace(/_/g," ");!t.long0&&t.longc&&(e==="albers conic equal area"||e==="lambert azimuthal equal area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(e==="stereographic south pole"||e==="polar stereographic (variant b)")?(t.lat0=Je(t.lat1>0?90:-90),t.lat_ts=t.lat1,delete t.lat1):!t.lat_ts&&t.lat0&&(e==="polar stereographic"||e==="polar stereographic (variant a)")&&(t.lat_ts=t.lat0,t.lat0=Je(t.lat0>0?90:-90),delete t.lat1)}function su(t){let e={units:null,to_meter:void 0};return typeof t=="string"?(e.units=t.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.units==="meter"&&(e.to_meter=1)):t&&t.name&&(e.units=t.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.to_meter=t.conversion_factor),e}function au(t){return typeof t=="object"?t.value*t.unit.conversion_factor:t}function ou(t,e){t.ellipsoid.radius?(e.a=t.ellipsoid.radius,e.rf=0):(e.a=au(t.ellipsoid.semi_major_axis),t.ellipsoid.inverse_flattening!==void 0?e.rf=t.ellipsoid.inverse_flattening:t.ellipsoid.semi_major_axis!==void 0&&t.ellipsoid.semi_minor_axis!==void 0&&(e.rf=e.a/(e.a-au(t.ellipsoid.semi_minor_axis))))}function rs(t,e={}){return!t||typeof t!="object"?t:t.type==="BoundCRS"?(rs(t.source_crs,e),t.transformation&&(t.transformation.method&&t.transformation.method.name==="NTv2"?e.nadgrids=t.transformation.parameters[0].value:e.datum_params=t.transformation.parameters.map(n=>n.value)),e):(Object.keys(t).forEach(n=>{const r=t[n];if(r!==null)switch(n){case"name":if(e.srsCode)break;e.name=r,e.srsCode=r;break;case"type":r==="GeographicCRS"?e.projName="longlat":r==="ProjectedCRS"&&t.conversion&&t.conversion.method&&(e.projName=t.conversion.method.name);break;case"datum":case"datum_ensemble":r.ellipsoid&&(e.ellps=r.ellipsoid.name,ou(r,e)),r.prime_meridian&&(e.from_greenwich=r.prime_meridian.longitude*Math.PI/180);break;case"ellipsoid":e.ellps=r.name,ou(r,e);break;case"prime_meridian":e.long0=(r.longitude||0)*Math.PI/180;break;case"coordinate_system":if(r.axis){if(e.axis=r.axis.map(s=>{const o=s.direction;if(o==="east")return"e";if(o==="north")return"n";if(o==="west")return"w";if(o==="south")return"s";throw new Error(`Unknown axis direction: ${o}`)}).join("")+"u",r.unit){const{units:s,to_meter:o}=su(r.unit);e.units=s,e.to_meter=o}else if(r.axis[0]&&r.axis[0].unit){const{units:s,to_meter:o}=su(r.axis[0].unit);e.units=s,e.to_meter=o}}break;case"id":r.authority&&r.code&&(e.title=r.authority+":"+r.code);break;case"conversion":r.method&&r.method.name&&(e.projName=r.method.name),r.parameters&&r.parameters.forEach(s=>{const o=s.name.toLowerCase().replace(/\s+/g,"_"),h=s.value;s.unit&&s.unit.conversion_factor?e[o]=h*s.unit.conversion_factor:s.unit==="degree"?e[o]=h*Math.PI/180:e[o]=h});break;case"unit":r.name&&(e.units=r.name.toLowerCase(),e.units==="metre"&&(e.units="meter")),r.conversion_factor&&(e.to_meter=r.conversion_factor);break;case"base_crs":rs(r,e),e.datumCode=r.id?r.id.authority+"_"+r.id.code:r.name;break}}),e.latitude_of_false_origin!==void 0&&(e.lat0=e.latitude_of_false_origin),e.longitude_of_false_origin!==void 0&&(e.long0=e.longitude_of_false_origin),e.latitude_of_standard_parallel!==void 0&&(e.lat0=e.latitude_of_standard_parallel,e.lat1=e.latitude_of_standard_parallel),e.latitude_of_1st_standard_parallel!==void 0&&(e.lat1=e.latitude_of_1st_standard_parallel),e.latitude_of_2nd_standard_parallel!==void 0&&(e.lat2=e.latitude_of_2nd_standard_parallel),e.latitude_of_projection_centre!==void 0&&(e.lat0=e.latitude_of_projection_centre),e.longitude_of_projection_centre!==void 0&&(e.longc=e.longitude_of_projection_centre),e.easting_at_false_origin!==void 0&&(e.x0=e.easting_at_false_origin),e.northing_at_false_origin!==void 0&&(e.y0=e.northing_at_false_origin),e.latitude_of_natural_origin!==void 0&&(e.lat0=e.latitude_of_natural_origin),e.longitude_of_natural_origin!==void 0&&(e.long0=e.longitude_of_natural_origin),e.longitude_of_origin!==void 0&&(e.long0=e.longitude_of_origin),e.false_easting!==void 0&&(e.x0=e.false_easting),e.easting_at_projection_centre&&(e.x0=e.easting_at_projection_centre),e.false_northing!==void 0&&(e.y0=e.false_northing),e.northing_at_projection_centre&&(e.y0=e.northing_at_projection_centre),e.standard_parallel_1!==void 0&&(e.lat1=e.standard_parallel_1),e.standard_parallel_2!==void 0&&(e.lat2=e.standard_parallel_2),e.scale_factor_at_natural_origin!==void 0&&(e.k0=e.scale_factor_at_natural_origin),e.scale_factor_at_projection_centre!==void 0&&(e.k0=e.scale_factor_at_projection_centre),e.scale_factor_on_pseudo_standard_parallel!==void 0&&(e.k0=e.scale_factor_on_pseudo_standard_parallel),e.azimuth!==void 0&&(e.alpha=e.azimuth),e.azimuth_at_projection_centre!==void 0&&(e.alpha=e.azimuth_at_projection_centre),e.angle_from_rectified_to_skew_grid&&(e.rectified_grid_angle=e.angle_from_rectified_to_skew_grid),dh(e),e)}var Vl=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Xl(t,e){var n=e[0],r=e[1];!(n in t)&&r in t&&(t[n]=t[r],e.length===3&&(t[n]=e[2](t[n])))}function _h(t){for(var e=Object.keys(t),n=0,r=e.length;n<r;++n){var s=e[n];Vl.indexOf(s)!==-1&&Kl(t[s]),typeof t[s]=="object"&&_h(t[s])}}function Kl(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",r=0,s=t.AXIS.length;r<s;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];o[0].indexOf("north")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="north"?n+="n":o[0].indexOf("south")!==-1||(o[0]==="y"||o[0]==="lat")&&o[1]==="south"?n+="s":o[0].indexOf("east")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="east"?n+="e":(o[0].indexOf("west")!==-1||(o[0]==="x"||o[0]==="lon")&&o[1]==="west")&&(n+="w")}n.length===2&&(n+="u"),n.length===3&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var h=t.GEOGCS;t.type==="GEOGCS"&&(h=t),h&&(h.DATUM?t.datumCode=h.DATUM.name.toLowerCase():t.datumCode=h.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),t.datumCode==="new_zealand_1949"&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode==="belge_1972"&&(t.datumCode="rnb72"),h.DATUM&&h.DATUM.SPHEROID&&(t.ellps=h.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=h.DATUM.SPHEROID.a,t.rf=parseFloat(h.DATUM.SPHEROID.rf,10)),h.DATUM&&h.DATUM.TOWGS84&&(t.datum_params=h.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),t.rectified_grid_angle&&(t.rectified_grid_angle=Je(t.rectified_grid_angle));function f(v){var _=t.to_meter||1;return v*_}var l=function(v){return Xl(t,v)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Je],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Je],["x0","false_easting",f],["y0","false_northing",f],["long0","central_meridian",Je],["lat0","latitude_of_origin",Je],["lat0","standard_parallel_1",Je],["lat1","standard_parallel_1",Je],["lat2","standard_parallel_2",Je],["azimuth","Azimuth"],["alpha","azimuth",Je],["srsCode","name"]];d.forEach(l),dh(t)}function ss(t){if(typeof t=="object")return rs(t);const e=ql(t);var n=Hl(t);if(e==="WKT2"){const o=Zl(n);return rs(o)}var r=n[0],s={};return ln(n,s),_h(s),s[r]}function me(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?me[t]=ba(arguments[1]):me[t]=ss(arguments[1]):n&&typeof n=="object"&&!("projName"in n)?me[t]=ss(arguments[1]):(me[t]=n,n||delete me[t])}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(r){return Array.isArray(r)?me.apply(e,r):me(r)});if(typeof t=="string"){if(t in me)return me[t]}else"EPSG"in t?me["EPSG:"+t.EPSG]=t:"ESRI"in t?me["ESRI:"+t.ESRI]=t:"IAU2000"in t?me["IAU2000:"+t.IAU2000]=t:console.log(t);return}}Nl(me);function Jl(t){return typeof t=="string"}function Yl(t){return t in me}function Ql(t){return t.indexOf("+")!==0&&t.indexOf("[")!==-1||typeof t=="object"&&!("srsCode"in t)}var tc=["3857","900913","3785","102113"];function ec(t){var e=Si(t,"authority");if(e){var n=Si(e,"epsg");return n&&tc.indexOf(n)>-1}}function ic(t){var e=Si(t,"extension");if(e)return Si(e,"proj4")}function nc(t){return t[0]==="+"}function rc(t){if(Jl(t)){if(Yl(t))return me[t];if(Ql(t)){var e=ss(t);if(ec(e))return me["EPSG:3857"];var n=ic(e);return n?ba(n):e}if(nc(t))return ba(t)}else return"projName"in t?t:ss(t)}function uu(t,e){t=t||{};var n,r;if(!e)return t;for(r in e)n=e[r],n!==void 0&&(t[r]=n);return t}function ai(t,e,n){var r=t*e;return n/Math.sqrt(1-r*r)}function hr(t){return t<0?-1:1}function nt(t,e){return e||Math.abs(t)<=ee?t:t-hr(t)*rr}function Ye(t,e,n){var r=t*n,s=.5*t;return r=Math.pow((1-r)/(1+r),s),Math.tan(.5*(V-e))/r}function ar(t,e){for(var n=.5*t,r,s,o=V-2*Math.atan(e),h=0;h<=15;h++)if(r=t*Math.sin(o),s=V-2*Math.atan(e*Math.pow((1-r)/(1+r),n))-o,o+=s,Math.abs(s)<=1e-10)return o;return-9999}function sc(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ac(t){var e=t.x,n=t.y;if(n*Te>90&&n*Te<-90&&e*Te>180&&e*Te<-180)return null;var r,s;if(Math.abs(Math.abs(n)-V)<=et)return null;if(this.sphere)r=this.x0+this.a*this.k0*nt(e-this.long0,this.over),s=this.y0+this.a*this.k0*Math.log(Math.tan(Gt+.5*n));else{var o=Math.sin(n),h=Ye(this.e,n,o);r=this.x0+this.a*this.k0*nt(e-this.long0,this.over),s=this.y0-this.a*this.k0*Math.log(h)}return t.x=r,t.y=s,t}function oc(t){var e=t.x-this.x0,n=t.y-this.y0,r,s;if(this.sphere)s=V-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var o=Math.exp(-n/(this.a*this.k0));if(s=ar(this.e,o),s===-9999)return null}return r=nt(this.long0+e/(this.a*this.k0),this.over),t.x=r,t.y=s,t}var uc=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","Mercator_Variant_A","merc"];const hc={init:sc,forward:ac,inverse:oc,names:uc};function fc(){}function hu(t){return t}var mh=["longlat","identity"];const lc={init:fc,forward:hu,inverse:hu,names:mh};var cc=[hc,lc],Zi={},cn=[];function vh(t,e){var n=cn.length;return t.names?(cn[n]=t,t.names.forEach(function(r){Zi[r.toLowerCase()]=n}),this):(console.log(e),!0)}function ph(t){return t.replace(/[-\(\)\s]+/g," ").trim().replace(/ /g,"_")}function dc(t){if(!t)return!1;var e=t.toLowerCase();if(typeof Zi[e]<"u"&&cn[Zi[e]]||(e=ph(e),e in Zi&&cn[Zi[e]]))return cn[Zi[e]]}function _c(){cc.forEach(vh)}const mc={start:_c,add:vh,get:dc};var gh={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},andrae:{a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},clrk80:{a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"},WGS84:{a:6378137,rf:298.257223563,ellipseName:"WGS 84"},sphere:{a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}};const vc=gh.WGS84;function pc(t,e,n,r){var s=t*t,o=e*e,h=(s-o)/s,f=0;r?(t*=1-h*(Ll+h*(Il+h*Ol)),s=t*t,h=0):f=Math.sqrt(h);var l=(s-o)/o;return{es:h,e:f,ep2:l}}function gc(t,e,n,r,s){if(!t){var o=Si(gh,r);o||(o=vc),t=o.a,e=o.b,n=o.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<et)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var Xr={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},EPSG_5451:{towgs84:"6.41,-49.05,-11.28,1.5657,0.5242,6.9718,-5.7649"},IGNF_LURESG:{towgs84:"-192.986,13.673,-39.309,-0.4099,-2.9332,2.6881,0.43"},EPSG_4614:{towgs84:"-119.4248,-303.65872,-11.00061,1.164298,0.174458,1.096259,3.657065"},EPSG_4615:{towgs84:"-494.088,-312.129,279.877,-1.423,-1.013,1.59,-0.748"},ESRI_37241:{towgs84:"-76.822,257.457,-12.817,2.136,-0.033,-2.392,-0.031"},ESRI_37249:{towgs84:"-440.296,58.548,296.265,1.128,10.202,4.559,-0.438"},ESRI_37245:{towgs84:"-511.151,-181.269,139.609,1.05,2.703,1.798,3.071"},EPSG_4178:{towgs84:"24.9,-126.4,-93.2,-0.063,-0.247,-0.041,1.01"},EPSG_4622:{towgs84:"-472.29,-5.63,-304.12,0.4362,-0.8374,0.2563,1.8984"},EPSG_4625:{towgs84:"126.93,547.94,130.41,-2.7867,5.1612,-0.8584,13.8227"},EPSG_5252:{towgs84:"0.023,0.036,-0.068,0.00176,0.00912,-0.01136,0.00439"},EPSG_4314:{towgs84:"597.1,71.4,412.1,0.894,0.068,-1.563,7.58"},EPSG_4282:{towgs84:"-178.3,-316.7,-131.5,5.278,6.077,10.979,19.166"},EPSG_4231:{towgs84:"-83.11,-97.38,-117.22,0.0276,-0.2167,0.2147,0.1218"},EPSG_4274:{towgs84:"-230.994,102.591,25.199,0.633,-0.239,0.9,1.95"},EPSG_4134:{towgs84:"-180.624,-225.516,173.919,-0.81,-1.898,8.336,16.71006"},EPSG_4254:{towgs84:"18.38,192.45,96.82,0.056,-0.142,-0.2,-0.0013"},EPSG_4159:{towgs84:"-194.513,-63.978,-25.759,-3.4027,3.756,-3.352,-0.9175"},EPSG_4687:{towgs84:"0.072,-0.507,-0.245,0.0183,-0.0003,0.007,-0.0093"},EPSG_4227:{towgs84:"-83.58,-397.54,458.78,-17.595,-2.847,4.256,3.225"},EPSG_4746:{towgs84:"599.4,72.4,419.2,-0.062,-0.022,-2.723,6.46"},EPSG_4745:{towgs84:"612.4,77,440.2,-0.054,0.057,-2.797,2.55"},EPSG_6311:{towgs84:"8.846,-4.394,-1.122,-0.00237,-0.146528,0.130428,0.783926"},EPSG_4289:{towgs84:"565.7381,50.4018,465.2904,-1.91514,1.60363,-9.09546,4.07244"},EPSG_4230:{towgs84:"-68.863,-134.888,-111.49,-0.53,-0.14,0.57,-3.4"},EPSG_4154:{towgs84:"-123.02,-158.95,-168.47"},EPSG_4156:{towgs84:"570.8,85.7,462.8,4.998,1.587,5.261,3.56"},EPSG_4299:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4179:{towgs84:"33.4,-146.6,-76.3,-0.359,-0.053,0.844,-0.84"},EPSG_4313:{towgs84:"-106.8686,52.2978,-103.7239,0.3366,-0.457,1.8422,-1.2747"},EPSG_4194:{towgs84:"163.511,127.533,-159.789"},EPSG_4195:{towgs84:"105,326,-102.5"},EPSG_4196:{towgs84:"-45,417,-3.5"},EPSG_4611:{towgs84:"-162.619,-276.959,-161.764,0.067753,-2.243649,-1.158827,-1.094246"},EPSG_4633:{towgs84:"137.092,131.66,91.475,-1.9436,-11.5993,-4.3321,-7.4824"},EPSG_4641:{towgs84:"-408.809,366.856,-412.987,1.8842,-0.5308,2.1655,-121.0993"},EPSG_4643:{towgs84:"-480.26,-438.32,-643.429,16.3119,20.1721,-4.0349,-111.7002"},EPSG_4300:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4188:{towgs84:"482.5,-130.6,564.6,-1.042,-0.214,-0.631,8.15"},EPSG_4660:{towgs84:"982.6087,552.753,-540.873,32.39344,-153.25684,-96.2266,16.805"},EPSG_4662:{towgs84:"97.295,-263.247,310.882,-1.5999,0.8386,3.1409,13.3259"},EPSG_3906:{towgs84:"577.88891,165.22205,391.18289,4.9145,-0.94729,-13.05098,7.78664"},EPSG_4307:{towgs84:"-209.3622,-87.8162,404.6198,0.0046,3.4784,0.5805,-1.4547"},EPSG_6892:{towgs84:"-76.269,-16.683,68.562,-6.275,10.536,-4.286,-13.686"},EPSG_4690:{towgs84:"221.597,152.441,176.523,2.403,1.3893,0.884,11.4648"},EPSG_4691:{towgs84:"218.769,150.75,176.75,3.5231,2.0037,1.288,10.9817"},EPSG_4629:{towgs84:"72.51,345.411,79.241,-1.5862,-0.8826,-0.5495,1.3653"},EPSG_4630:{towgs84:"165.804,216.213,180.26,-0.6251,-0.4515,-0.0721,7.4111"},EPSG_4692:{towgs84:"217.109,86.452,23.711,0.0183,-0.0003,0.007,-0.0093"},EPSG_9333:{towgs84:"0,0,0,-8.393,0.749,-10.276,0"},EPSG_9059:{towgs84:"0,0,0"},EPSG_4312:{towgs84:"601.705,84.263,485.227,4.7354,1.3145,5.393,-2.3887"},EPSG_4123:{towgs84:"-96.062,-82.428,-121.753,4.801,0.345,-1.376,1.496"},EPSG_4309:{towgs84:"-124.45,183.74,44.64,-0.4384,0.5446,-0.9706,-2.1365"},ESRI_104106:{towgs84:"-283.088,-70.693,117.445,-1.157,0.059,-0.652,-4.058"},EPSG_4281:{towgs84:"-219.247,-73.802,269.529"},EPSG_4322:{towgs84:"0,0,4.5"},EPSG_4324:{towgs84:"0,0,1.9"},EPSG_4284:{towgs84:"43.822,-108.842,-119.585,1.455,-0.761,0.737,0.549"},EPSG_4277:{towgs84:"446.448,-125.157,542.06,0.15,0.247,0.842,-20.489"},EPSG_4207:{towgs84:"-282.1,-72.2,120,-1.529,0.145,-0.89,-4.46"},EPSG_4688:{towgs84:"347.175,1077.618,2623.677,33.9058,-70.6776,9.4013,186.0647"},EPSG_4689:{towgs84:"410.793,54.542,80.501,-2.5596,-2.3517,-0.6594,17.3218"},EPSG_4720:{towgs84:"0,0,4.5"},EPSG_4273:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},EPSG_4240:{towgs84:"204.64,834.74,293.8"},EPSG_4817:{towgs84:"278.3,93,474.5,7.889,0.05,-6.61,6.21"},ESRI_104131:{towgs84:"426.62,142.62,460.09,4.98,4.49,-12.42,-17.1"},EPSG_4265:{towgs84:"-104.1,-49.1,-9.9,0.971,-2.917,0.714,-11.68"},EPSG_4263:{towgs84:"-111.92,-87.85,114.5,1.875,0.202,0.219,0.032"},EPSG_4298:{towgs84:"-689.5937,623.84046,-65.93566,-0.02331,1.17094,-0.80054,5.88536"},EPSG_4270:{towgs84:"-253.4392,-148.452,386.5267,0.15605,0.43,-0.1013,-0.0424"},EPSG_4229:{towgs84:"-121.8,98.1,-10.7"},EPSG_4220:{towgs84:"-55.5,-348,-229.2"},EPSG_4214:{towgs84:"12.646,-155.176,-80.863"},EPSG_4232:{towgs84:"-345,3,223"},EPSG_4238:{towgs84:"-1.977,-13.06,-9.993,0.364,0.254,0.689,-1.037"},EPSG_4168:{towgs84:"-170,33,326"},EPSG_4131:{towgs84:"199,931,318.9"},EPSG_4152:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_5228:{towgs84:"572.213,85.334,461.94,4.9732,1.529,5.2484,3.5378"},EPSG_8351:{towgs84:"485.021,169.465,483.839,7.786342,4.397554,4.102655,0"},EPSG_4683:{towgs84:"-127.62,-67.24,-47.04,-3.068,4.903,1.578,-1.06"},EPSG_4133:{towgs84:"0,0,0"},EPSG_7373:{towgs84:"0.819,-0.5762,-1.6446,-0.00378,-0.03317,0.00318,0.0693"},EPSG_9075:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9072:{towgs84:"-0.9102,2.0141,0.5602,0.029039,0.010065,0.010101,0"},EPSG_9294:{towgs84:"1.16835,-1.42001,-2.24431,-0.00822,-0.05508,0.01818,0.23388"},EPSG_4212:{towgs84:"-267.434,173.496,181.814,-13.4704,8.7154,7.3926,14.7492"},EPSG_4191:{towgs84:"-44.183,-0.58,-38.489,2.3867,2.7072,-3.5196,-8.2703"},EPSG_4237:{towgs84:"52.684,-71.194,-13.975,-0.312,-0.1063,-0.3729,1.0191"},EPSG_4740:{towgs84:"-1.08,-0.27,-0.9"},EPSG_4124:{towgs84:"419.3836,99.3335,591.3451,0.850389,1.817277,-7.862238,-0.99496"},EPSG_5681:{towgs84:"584.9636,107.7175,413.8067,1.1155,0.2824,-3.1384,7.9922"},EPSG_4141:{towgs84:"23.772,17.49,17.859,-0.3132,-1.85274,1.67299,-5.4262"},EPSG_4204:{towgs84:"-85.645,-273.077,-79.708,2.289,-1.421,2.532,3.194"},EPSG_4319:{towgs84:"226.702,-193.337,-35.371,-2.229,-4.391,9.238,0.9798"},EPSG_4200:{towgs84:"24.82,-131.21,-82.66"},EPSG_4130:{towgs84:"0,0,0"},EPSG_4127:{towgs84:"-82.875,-57.097,-156.768,-2.158,1.524,-0.982,-0.359"},EPSG_4149:{towgs84:"674.374,15.056,405.346"},EPSG_4617:{towgs84:"-0.991,1.9072,0.5129,1.25033e-7,4.6785e-8,5.6529e-8,0"},EPSG_4663:{towgs84:"-210.502,-66.902,-48.476,2.094,-15.067,-5.817,0.485"},EPSG_4664:{towgs84:"-211.939,137.626,58.3,-0.089,0.251,0.079,0.384"},EPSG_4665:{towgs84:"-105.854,165.589,-38.312,-0.003,-0.026,0.024,-0.048"},EPSG_4666:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},EPSG_4756:{towgs84:"-192.873,-39.382,-111.202,-0.00205,-0.0005,0.00335,0.0188"},EPSG_4723:{towgs84:"-179.483,-69.379,-27.584,-7.862,8.163,6.042,-13.925"},EPSG_4726:{towgs84:"8.853,-52.644,180.304,-0.393,-2.323,2.96,-24.081"},EPSG_4267:{towgs84:"-8.0,160.0,176.0"},EPSG_5365:{towgs84:"-0.16959,0.35312,0.51846,0.03385,-0.16325,0.03446,0.03693"},EPSG_4218:{towgs84:"304.5,306.5,-318.1"},EPSG_4242:{towgs84:"-33.722,153.789,94.959,-8.581,-4.478,4.54,8.95"},EPSG_4216:{towgs84:"-292.295,248.758,429.447,4.9971,2.99,6.6906,1.0289"},ESRI_104105:{towgs84:"631.392,-66.551,481.442,1.09,-4.445,-4.487,-4.43"},ESRI_104129:{towgs84:"0,0,0"},EPSG_4673:{towgs84:"174.05,-25.49,112.57"},EPSG_4202:{towgs84:"-124,-60,154"},EPSG_4203:{towgs84:"-117.763,-51.51,139.061,0.292,0.443,0.277,-0.191"},EPSG_3819:{towgs84:"595.48,121.69,515.35,4.115,-2.9383,0.853,-3.408"},EPSG_8694:{towgs84:"-93.799,-132.737,-219.073,-1.844,0.648,-6.37,-0.169"},EPSG_4145:{towgs84:"275.57,676.78,229.6"},EPSG_4283:{towgs84:"61.55,-10.87,-40.19,39.4924,32.7221,32.8979,-9.994"},EPSG_4317:{towgs84:"2.3287,-147.0425,-92.0802,-0.3092483,0.32482185,0.49729934,5.68906266"},EPSG_4272:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993"},EPSG_4248:{towgs84:"-307.7,265.3,-363.5"},EPSG_5561:{towgs84:"24,-121,-76"},EPSG_5233:{towgs84:"-0.293,766.95,87.713,0.195704,1.695068,3.473016,-0.039338"},ESRI_104130:{towgs84:"-86,-98,-119"},ESRI_104102:{towgs84:"682,-203,480"},ESRI_37207:{towgs84:"7,-10,-26"},EPSG_4675:{towgs84:"59.935,118.4,-10.871"},ESRI_104109:{towgs84:"-89.121,-348.182,260.871"},ESRI_104112:{towgs84:"-185.583,-230.096,281.361"},ESRI_104113:{towgs84:"25.1,-275.6,222.6"},IGNF_WGS72G:{towgs84:"0,12,6"},IGNF_NTFG:{towgs84:"-168,-60,320"},IGNF_EFATE57G:{towgs84:"-127,-769,472"},IGNF_PGP50G:{towgs84:"324.8,153.6,172.1"},IGNF_REUN47G:{towgs84:"94,-948,-1262"},IGNF_CSG67G:{towgs84:"-186,230,110"},IGNF_GUAD48G:{towgs84:"-467,-16,-300"},IGNF_TAHI51G:{towgs84:"162,117,154"},IGNF_TAHAAG:{towgs84:"65,342,77"},IGNF_NUKU72G:{towgs84:"84,274,65"},IGNF_PETRELS72G:{towgs84:"365,194,166"},IGNF_WALL78G:{towgs84:"253,-133,-127"},IGNF_MAYO50G:{towgs84:"-382,-59,-262"},IGNF_TANNAG:{towgs84:"-139,-967,436"},IGNF_IGN72G:{towgs84:"-13,-348,292"},IGNF_ATIGG:{towgs84:"1118,23,66"},IGNF_FANGA84G:{towgs84:"150.57,158.33,118.32"},IGNF_RUSAT84G:{towgs84:"202.13,174.6,-15.74"},IGNF_KAUE70G:{towgs84:"126.74,300.1,-75.49"},IGNF_MOP90G:{towgs84:"-10.8,-1.8,12.77"},IGNF_MHPF67G:{towgs84:"338.08,212.58,-296.17"},IGNF_TAHI79G:{towgs84:"160.61,116.05,153.69"},IGNF_ANAA92G:{towgs84:"1.5,3.84,4.81"},IGNF_MARQUI72G:{towgs84:"330.91,-13.92,58.56"},IGNF_APAT86G:{towgs84:"143.6,197.82,74.05"},IGNF_TUBU69G:{towgs84:"237.17,171.61,-77.84"},IGNF_STPM50G:{towgs84:"11.363,424.148,373.13"},EPSG_4150:{towgs84:"674.374,15.056,405.346"},EPSG_4754:{towgs84:"-208.4058,-109.8777,-2.5764"},ESRI_104101:{towgs84:"374,150,588"},EPSG_4693:{towgs84:"0,-0.15,0.68"},EPSG_6207:{towgs84:"293.17,726.18,245.36"},EPSG_4153:{towgs84:"-133.63,-157.5,-158.62"},EPSG_4132:{towgs84:"-241.54,-163.64,396.06"},EPSG_4221:{towgs84:"-154.5,150.7,100.4"},EPSG_4266:{towgs84:"-80.7,-132.5,41.1"},EPSG_4193:{towgs84:"-70.9,-151.8,-41.4"},EPSG_5340:{towgs84:"-0.41,0.46,-0.35"},EPSG_4246:{towgs84:"-294.7,-200.1,525.5"},EPSG_4318:{towgs84:"-3.2,-5.7,2.8"},EPSG_4121:{towgs84:"-199.87,74.79,246.62"},EPSG_4223:{towgs84:"-260.1,5.5,432.2"},EPSG_4158:{towgs84:"-0.465,372.095,171.736"},EPSG_4285:{towgs84:"-128.16,-282.42,21.93"},EPSG_4613:{towgs84:"-404.78,685.68,45.47"},EPSG_4607:{towgs84:"195.671,332.517,274.607"},EPSG_4475:{towgs84:"-381.788,-57.501,-256.673"},EPSG_4208:{towgs84:"-157.84,308.54,-146.6"},EPSG_4743:{towgs84:"70.995,-335.916,262.898"},EPSG_4710:{towgs84:"-323.65,551.39,-491.22"},EPSG_7881:{towgs84:"-0.077,0.079,0.086"},EPSG_4682:{towgs84:"283.729,735.942,261.143"},EPSG_4739:{towgs84:"-156,-271,-189"},EPSG_4679:{towgs84:"-80.01,253.26,291.19"},EPSG_4750:{towgs84:"-56.263,16.136,-22.856"},EPSG_4644:{towgs84:"-10.18,-350.43,291.37"},EPSG_4695:{towgs84:"-103.746,-9.614,-255.95"},EPSG_4292:{towgs84:"-355,21,72"},EPSG_4302:{towgs84:"-61.702,284.488,472.052"},EPSG_4143:{towgs84:"-124.76,53,466.79"},EPSG_4606:{towgs84:"-153,153,307"},EPSG_4699:{towgs84:"-770.1,158.4,-498.2"},EPSG_4247:{towgs84:"-273.5,110.6,-357.9"},EPSG_4160:{towgs84:"8.88,184.86,106.69"},EPSG_4161:{towgs84:"-233.43,6.65,173.64"},EPSG_9251:{towgs84:"-9.5,122.9,138.2"},EPSG_9253:{towgs84:"-78.1,101.6,133.3"},EPSG_4297:{towgs84:"-198.383,-240.517,-107.909"},EPSG_4269:{towgs84:"0,0,0"},EPSG_4301:{towgs84:"-147,506,687"},EPSG_4618:{towgs84:"-59,-11,-52"},EPSG_4612:{towgs84:"0,0,0"},EPSG_4678:{towgs84:"44.585,-131.212,-39.544"},EPSG_4250:{towgs84:"-130,29,364"},EPSG_4144:{towgs84:"214,804,268"},EPSG_4147:{towgs84:"-17.51,-108.32,-62.39"},EPSG_4259:{towgs84:"-254.1,-5.36,-100.29"},EPSG_4164:{towgs84:"-76,-138,67"},EPSG_4211:{towgs84:"-378.873,676.002,-46.255"},EPSG_4182:{towgs84:"-422.651,-172.995,84.02"},EPSG_4224:{towgs84:"-143.87,243.37,-33.52"},EPSG_4225:{towgs84:"-205.57,168.77,-4.12"},EPSG_5527:{towgs84:"-67.35,3.88,-38.22"},EPSG_4752:{towgs84:"98,390,-22"},EPSG_4310:{towgs84:"-30,190,89"},EPSG_9248:{towgs84:"-192.26,65.72,132.08"},EPSG_4680:{towgs84:"124.5,-63.5,-281"},EPSG_4701:{towgs84:"-79.9,-158,-168.9"},EPSG_4706:{towgs84:"-146.21,112.63,4.05"},EPSG_4805:{towgs84:"682,-203,480"},EPSG_4201:{towgs84:"-165,-11,206"},EPSG_4210:{towgs84:"-157,-2,-299"},EPSG_4183:{towgs84:"-104,167,-38"},EPSG_4139:{towgs84:"11,72,-101"},EPSG_4668:{towgs84:"-86,-98,-119"},EPSG_4717:{towgs84:"-2,151,181"},EPSG_4732:{towgs84:"102,52,-38"},EPSG_4280:{towgs84:"-377,681,-50"},EPSG_4209:{towgs84:"-138,-105,-289"},EPSG_4261:{towgs84:"31,146,47"},EPSG_4658:{towgs84:"-73,46,-86"},EPSG_4721:{towgs84:"265.025,384.929,-194.046"},EPSG_4222:{towgs84:"-136,-108,-292"},EPSG_4601:{towgs84:"-255,-15,71"},EPSG_4602:{towgs84:"725,685,536"},EPSG_4603:{towgs84:"72,213.7,93"},EPSG_4605:{towgs84:"9,183,236"},EPSG_4621:{towgs84:"137,248,-430"},EPSG_4657:{towgs84:"-28,199,5"},EPSG_4316:{towgs84:"103.25,-100.4,-307.19"},EPSG_4642:{towgs84:"-13,-348,292"},EPSG_4698:{towgs84:"145,-187,103"},EPSG_4192:{towgs84:"-206.1,-174.7,-87.7"},EPSG_4311:{towgs84:"-265,120,-358"},EPSG_4135:{towgs84:"58,-283,-182"},ESRI_104138:{towgs84:"198,-226,-347"},EPSG_4245:{towgs84:"-11,851,5"},EPSG_4142:{towgs84:"-125,53,467"},EPSG_4213:{towgs84:"-106,-87,188"},EPSG_4253:{towgs84:"-133,-77,-51"},EPSG_4129:{towgs84:"-132,-110,-335"},EPSG_4713:{towgs84:"-77,-128,142"},EPSG_4239:{towgs84:"217,823,299"},EPSG_4146:{towgs84:"295,736,257"},EPSG_4155:{towgs84:"-83,37,124"},EPSG_4165:{towgs84:"-173,253,27"},EPSG_4672:{towgs84:"175,-38,113"},EPSG_4236:{towgs84:"-637,-549,-203"},EPSG_4251:{towgs84:"-90,40,88"},EPSG_4271:{towgs84:"-2,374,172"},EPSG_4175:{towgs84:"-88,4,101"},EPSG_4716:{towgs84:"298,-304,-375"},EPSG_4315:{towgs84:"-23,259,-9"},EPSG_4744:{towgs84:"-242.2,-144.9,370.3"},EPSG_4244:{towgs84:"-97,787,86"},EPSG_4293:{towgs84:"616,97,-251"},EPSG_4714:{towgs84:"-127,-769,472"},EPSG_4736:{towgs84:"260,12,-147"},EPSG_6883:{towgs84:"-235,-110,393"},EPSG_6894:{towgs84:"-63,176,185"},EPSG_4205:{towgs84:"-43,-163,45"},EPSG_4256:{towgs84:"41,-220,-134"},EPSG_4262:{towgs84:"639,405,60"},EPSG_4604:{towgs84:"174,359,365"},EPSG_4169:{towgs84:"-115,118,426"},EPSG_4620:{towgs84:"-106,-129,165"},EPSG_4184:{towgs84:"-203,141,53"},EPSG_4616:{towgs84:"-289,-124,60"},EPSG_9403:{towgs84:"-307,-92,127"},EPSG_4684:{towgs84:"-133,-321,50"},EPSG_4708:{towgs84:"-491,-22,435"},EPSG_4707:{towgs84:"114,-116,-333"},EPSG_4709:{towgs84:"145,75,-272"},EPSG_4712:{towgs84:"-205,107,53"},EPSG_4711:{towgs84:"124,-234,-25"},EPSG_4718:{towgs84:"230,-199,-752"},EPSG_4719:{towgs84:"211,147,111"},EPSG_4724:{towgs84:"208,-435,-229"},EPSG_4725:{towgs84:"189,-79,-202"},EPSG_4735:{towgs84:"647,1777,-1124"},EPSG_4722:{towgs84:"-794,119,-298"},EPSG_4728:{towgs84:"-307,-92,127"},EPSG_4734:{towgs84:"-632,438,-609"},EPSG_4727:{towgs84:"912,-58,1227"},EPSG_4729:{towgs84:"185,165,42"},EPSG_4730:{towgs84:"170,42,84"},EPSG_4733:{towgs84:"276,-57,149"},ESRI_37218:{towgs84:"230,-199,-752"},ESRI_37240:{towgs84:"-7,215,225"},ESRI_37221:{towgs84:"252,-209,-751"},ESRI_4305:{towgs84:"-123,-206,219"},ESRI_104139:{towgs84:"-73,-247,227"},EPSG_4748:{towgs84:"51,391,-36"},EPSG_4219:{towgs84:"-384,664,-48"},EPSG_4255:{towgs84:"-333,-222,114"},EPSG_4257:{towgs84:"-587.8,519.75,145.76"},EPSG_4646:{towgs84:"-963,510,-359"},EPSG_6881:{towgs84:"-24,-203,268"},EPSG_6882:{towgs84:"-183,-15,273"},EPSG_4715:{towgs84:"-104,-129,239"},IGNF_RGF93GDD:{towgs84:"0,0,0"},IGNF_RGM04GDD:{towgs84:"0,0,0"},IGNF_RGSPM06GDD:{towgs84:"0,0,0"},IGNF_RGTAAF07GDD:{towgs84:"0,0,0"},IGNF_RGFG95GDD:{towgs84:"0,0,0"},IGNF_RGNCG:{towgs84:"0,0,0"},IGNF_RGPFGDD:{towgs84:"0,0,0"},IGNF_ETRS89G:{towgs84:"0,0,0"},IGNF_RGR92GDD:{towgs84:"0,0,0"},EPSG_4173:{towgs84:"0,0,0"},EPSG_4180:{towgs84:"0,0,0"},EPSG_4619:{towgs84:"0,0,0"},EPSG_4667:{towgs84:"0,0,0"},EPSG_4075:{towgs84:"0,0,0"},EPSG_6706:{towgs84:"0,0,0"},EPSG_7798:{towgs84:"0,0,0"},EPSG_4661:{towgs84:"0,0,0"},EPSG_4669:{towgs84:"0,0,0"},EPSG_8685:{towgs84:"0,0,0"},EPSG_4151:{towgs84:"0,0,0"},EPSG_9702:{towgs84:"0,0,0"},EPSG_4758:{towgs84:"0,0,0"},EPSG_4761:{towgs84:"0,0,0"},EPSG_4765:{towgs84:"0,0,0"},EPSG_8997:{towgs84:"0,0,0"},EPSG_4023:{towgs84:"0,0,0"},EPSG_4670:{towgs84:"0,0,0"},EPSG_4694:{towgs84:"0,0,0"},EPSG_4148:{towgs84:"0,0,0"},EPSG_4163:{towgs84:"0,0,0"},EPSG_4167:{towgs84:"0,0,0"},EPSG_4189:{towgs84:"0,0,0"},EPSG_4190:{towgs84:"0,0,0"},EPSG_4176:{towgs84:"0,0,0"},EPSG_4659:{towgs84:"0,0,0"},EPSG_3824:{towgs84:"0,0,0"},EPSG_3889:{towgs84:"0,0,0"},EPSG_4046:{towgs84:"0,0,0"},EPSG_4081:{towgs84:"0,0,0"},EPSG_4558:{towgs84:"0,0,0"},EPSG_4483:{towgs84:"0,0,0"},EPSG_5013:{towgs84:"0,0,0"},EPSG_5264:{towgs84:"0,0,0"},EPSG_5324:{towgs84:"0,0,0"},EPSG_5354:{towgs84:"0,0,0"},EPSG_5371:{towgs84:"0,0,0"},EPSG_5373:{towgs84:"0,0,0"},EPSG_5381:{towgs84:"0,0,0"},EPSG_5393:{towgs84:"0,0,0"},EPSG_5489:{towgs84:"0,0,0"},EPSG_5593:{towgs84:"0,0,0"},EPSG_6135:{towgs84:"0,0,0"},EPSG_6365:{towgs84:"0,0,0"},EPSG_5246:{towgs84:"0,0,0"},EPSG_7886:{towgs84:"0,0,0"},EPSG_8431:{towgs84:"0,0,0"},EPSG_8427:{towgs84:"0,0,0"},EPSG_8699:{towgs84:"0,0,0"},EPSG_8818:{towgs84:"0,0,0"},EPSG_4757:{towgs84:"0,0,0"},EPSG_9140:{towgs84:"0,0,0"},EPSG_8086:{towgs84:"0,0,0"},EPSG_4686:{towgs84:"0,0,0"},EPSG_4737:{towgs84:"0,0,0"},EPSG_4702:{towgs84:"0,0,0"},EPSG_4747:{towgs84:"0,0,0"},EPSG_4749:{towgs84:"0,0,0"},EPSG_4674:{towgs84:"0,0,0"},EPSG_4755:{towgs84:"0,0,0"},EPSG_4759:{towgs84:"0,0,0"},EPSG_4762:{towgs84:"0,0,0"},EPSG_4763:{towgs84:"0,0,0"},EPSG_4764:{towgs84:"0,0,0"},EPSG_4166:{towgs84:"0,0,0"},EPSG_4170:{towgs84:"0,0,0"},EPSG_5546:{towgs84:"0,0,0"},EPSG_7844:{towgs84:"0,0,0"},EPSG_4818:{towgs84:"589,76,480"}};for(var yc in Xr){var va=Xr[yc];va.datumName&&(Xr[va.datumName]=va)}function wc(t,e,n,r,s,o,h){var f={};return t===void 0||t==="none"?f.datum_type=Ca:f.datum_type=Tl,e&&(f.datum_params=e.map(parseFloat),(f.datum_params[0]!==0||f.datum_params[1]!==0||f.datum_params[2]!==0)&&(f.datum_type=Wi),f.datum_params.length>3&&(f.datum_params[3]!==0||f.datum_params[4]!==0||f.datum_params[5]!==0||f.datum_params[6]!==0)&&(f.datum_type=$i,f.datum_params[3]*=Vn,f.datum_params[4]*=Vn,f.datum_params[5]*=Vn,f.datum_params[6]=f.datum_params[6]/1e6+1)),h&&(f.datum_type=pn,f.grids=h),f.a=n,f.b=r,f.es=s,f.ep2=o,f}var Ua={};function Dc(t,e,n){return e instanceof ArrayBuffer?Ec(t,e,n):{ready:Mc(t,e)}}function Ec(t,e,n){var r=!0;n!==void 0&&n.includeErrorFields===!1&&(r=!1);var s=new DataView(e),o=bc(s),h=xc(s,o),f=Sc(s,h,o,r),l={header:h,subgrids:f};return Ua[t]=l,l}async function Mc(t,e){for(var n=[],r=await e.getImageCount(),s=r-1;s>=0;s--){var o=await e.getImage(s),h=await o.readRasters(),f=h,l=[o.getWidth(),o.getHeight()],d=o.getBoundingBox().map(fu),v=[o.fileDirectory.ModelPixelScale[0],o.fileDirectory.ModelPixelScale[1]].map(fu),_=d[0]+(l[0]-1)*v[0],m=d[3]-(l[1]-1)*v[1],y=f[0],E=f[1],g=[];for(let S=l[1]-1;S>=0;S--)for(let M=l[0]-1;M>=0;M--){var D=S*l[0]+M;g.push([-Ai(E[D]),Ai(y[D])])}n.push({del:v,lim:l,ll:[-_,m],cvs:g})}var b={header:{nSubgrids:r},subgrids:n};return Ua[t]=b,b}function Ac(t){if(t===void 0)return null;var e=t.split(",");return e.map(Cc)}function Cc(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:Ua[t]||null,isNull:!1}}function fu(t){return t*Math.PI/180}function Ai(t){return t/3600*Math.PI/180}function bc(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function xc(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:xa(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function xa(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function Sc(t,e,n,r){for(var s=176,o=[],h=0;h<e.nSubgrids;h++){var f=Fc(t,s,n),l=Nc(t,s,f,n,r),d=Math.round(1+(f.upperLongitude-f.lowerLongitude)/f.longitudeInterval),v=Math.round(1+(f.upperLatitude-f.lowerLatitude)/f.latitudeInterval);o.push({ll:[Ai(f.lowerLongitude),Ai(f.lowerLatitude)],del:[Ai(f.longitudeInterval),Ai(f.latitudeInterval)],lim:[d,v],count:f.gridNodeCount,cvs:Pc(l)});var _=16;r===!1&&(_=8),s+=176+f.gridNodeCount*_}return o}function Pc(t){return t.map(function(e){return[Ai(e.longitudeShift),Ai(e.latitudeShift)]})}function Fc(t,e,n){return{name:xa(t,e+8,e+16).trim(),parent:xa(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function Nc(t,e,n,r,s){var o=e+176,h=16;s===!1&&(h=8);for(var f=[],l=0;l<n.gridNodeCount;l++){var d={latitudeShift:t.getFloat32(o+l*h,r),longitudeShift:t.getFloat32(o+l*h+4,r)};s!==!1&&(d.latitudeAccuracy=t.getFloat32(o+l*h+8,r),d.longitudeAccuracy=t.getFloat32(o+l*h+12,r)),f.push(d)}return f}function He(t,e){if(!(this instanceof He))return new He(t);this.forward=null,this.inverse=null,this.init=null,this.name,this.names=null,this.title,e=e||function(d){if(d)throw d};var n=rc(t);if(typeof n!="object"){e("Could not parse to valid json: "+t);return}var r=He.projections.get(n.projName);if(!r){e("Could not get projection name from: "+t);return}if(n.datumCode&&n.datumCode!=="none"){var s=Si(Xr,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var o=gc(n.a,n.b,n.rf,n.ellps,n.sphere),h=pc(o.a,o.b,o.rf,n.R_A),f=Ac(n.nadgrids),l=n.datum||wc(n.datumCode,n.datum_params,o.a,o.b,h.es,h.ep2,f);uu(this,n),uu(this,r),this.a=o.a,this.b=o.b,this.rf=o.rf,this.sphere=o.sphere,this.es=h.es,this.e=h.e,this.ep2=h.ep2,this.datum=l,"init"in this&&typeof this.init=="function"&&this.init(),e(null,this)}He.projections=mc;He.projections.start();function Tc(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===Wi?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===$i?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function yh(t,e,n){var r=t.x,s=t.y,o=t.z?t.z:0,h,f,l,d;if(s<-V&&s>-1.001*V)s=-V;else if(s>V&&s<1.001*V)s=V;else{if(s<-V)return{x:-1/0,y:-1/0,z:t.z};if(s>V)return{x:1/0,y:1/0,z:t.z}}return r>Math.PI&&(r-=2*Math.PI),f=Math.sin(s),d=Math.cos(s),l=f*f,h=n/Math.sqrt(1-e*l),{x:(h+o)*d*Math.cos(r),y:(h+o)*d*Math.sin(r),z:(h*(1-e)+o)*f}}function wh(t,e,n,r){var s=1e-12,o=s*s,h=30,f,l,d,v,_,m,y,E,g,D,b,S,M,F=t.x,C=t.y,A=t.z?t.z:0,T,N,I;if(f=Math.sqrt(F*F+C*C),l=Math.sqrt(F*F+C*C+A*A),f/n<s){if(T=0,l/n<s)return N=V,I=-r,{x:t.x,y:t.y,z:t.z}}else T=Math.atan2(C,F);d=A/l,v=f/l,_=1/Math.sqrt(1-e*(2-e)*v*v),E=v*(1-e)*_,g=d*_,M=0;do M++,y=n/Math.sqrt(1-e*g*g),I=f*E+A*g-y*(1-e*g*g),m=e*y/(y+I),_=1/Math.sqrt(1-m*(2-m)*v*v),D=v*(1-m)*_,b=d*_,S=b*E-D*g,E=D,g=b;while(S*S>o&&M<h);return N=Math.atan(b/Math.abs(D)),{x:T,y:N,z:I}}function Bc(t,e,n){if(e===Wi)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===$i){var r=n[0],s=n[1],o=n[2],h=n[3],f=n[4],l=n[5],d=n[6];return{x:d*(t.x-l*t.y+f*t.z)+r,y:d*(l*t.x+t.y-h*t.z)+s,z:d*(-f*t.x+h*t.y+t.z)+o}}}function Lc(t,e,n){if(e===Wi)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===$i){var r=n[0],s=n[1],o=n[2],h=n[3],f=n[4],l=n[5],d=n[6],v=(t.x-r)/d,_=(t.y-s)/d,m=(t.z-o)/d;return{x:v+l*_-f*m,y:-l*v+_+h*m,z:f*v-h*_+m}}}function qr(t){return t===Wi||t===$i}function Ic(t,e,n){if(Tc(t,e)||t.datum_type===Ca||e.datum_type===Ca)return n;var r=t.a,s=t.es;if(t.datum_type===pn){var o=lu(t,!1,n);if(o!==0)return;r=iu,s=nu}var h=e.a,f=e.b,l=e.es;if(e.datum_type===pn&&(h=iu,f=Bl,l=nu),s===l&&r===h&&!qr(t.datum_type)&&!qr(e.datum_type))return n;if(n=yh(n,s,r),qr(t.datum_type)&&(n=Bc(n,t.datum_type,t.datum_params)),qr(e.datum_type)&&(n=Lc(n,e.datum_type,e.datum_params)),n=wh(n,l,h,f),e.datum_type===pn){var d=lu(e,!0,n);if(d!==0)return}return n}function lu(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var r={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},o=[];t:for(var h=0;h<t.grids.length;h++){var f=t.grids[h];if(o.push(f.name),f.isNull){s=r;break}if(f.grid===null){if(f.mandatory)return console.log("Unable to find mandatory grid '"+f.name+"'"),-1;continue}for(var l=f.grid.subgrids,d=0,v=l.length;d<v;d++){var _=l[d],m=(Math.abs(_.del[1])+Math.abs(_.del[0]))/1e4,y=_.ll[0]-m,E=_.ll[1]-m,g=_.ll[0]+(_.lim[0]-1)*_.del[0]+m,D=_.ll[1]+(_.lim[1]-1)*_.del[1]+m;if(!(E>r.y||y>r.x||D<r.y||g<r.x)&&(s=Oc(r,e,_),!isNaN(s.x)))break t}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-r.x*Te+" "+r.y*Te+" tried: '"+o+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function Oc(t,e,n){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=nt(s.x-Math.PI)+Math.PI;var o=cu(s,n);if(e){if(isNaN(o.x))return r;o.x=s.x-o.x,o.y=s.y-o.y;var h=9,f=1e-12,l,d;do{if(d=cu(o,n),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:s.x-(d.x+o.x),y:s.y-(d.y+o.y)},o.x+=l.x,o.y+=l.y}while(h--&&Math.abs(l.x)>f&&Math.abs(l.y)>f);if(h<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=nt(o.x+n.ll[0]),r.y=o.y+n.ll[1]}else isNaN(o.x)||(r.x=t.x+o.x,r.y=t.y+o.y);return r}function cu(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*r.x,y:n.y-1*r.y},o={x:Number.NaN,y:Number.NaN},h;if(r.x<0||r.x>=e.lim[0]||r.y<0||r.y>=e.lim[1])return o;h=r.y*e.lim[0]+r.x;var f={x:e.cvs[h][0],y:e.cvs[h][1]};h++;var l={x:e.cvs[h][0],y:e.cvs[h][1]};h+=e.lim[0];var d={x:e.cvs[h][0],y:e.cvs[h][1]};h--;var v={x:e.cvs[h][0],y:e.cvs[h][1]},_=s.x*s.y,m=s.x*(1-s.y),y=(1-s.x)*(1-s.y),E=(1-s.x)*s.y;return o.x=y*f.x+m*l.x+E*v.x+_*d.x,o.y=y*f.y+m*l.y+E*v.y+_*d.y,o}function du(t,e,n){var r=n.x,s=n.y,o=n.z||0,h,f,l,d={};for(l=0;l<3;l++)if(!(e&&l===2&&n.z===void 0))switch(l===0?(h=r,"ew".indexOf(t.axis[l])!==-1?f="x":f="y"):l===1?(h=s,"ns".indexOf(t.axis[l])!==-1?f="y":f="x"):(h=o,f="z"),t.axis[l]){case"e":d[f]=h;break;case"w":d[f]=-h;break;case"n":d[f]=h;break;case"s":d[f]=-h;break;case"u":n[f]!==void 0&&(d.z=h);break;case"d":n[f]!==void 0&&(d.z=-h);break;default:return null}return d}function Dh(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Gc(t){_u(t.x),_u(t.y)}function _u(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function zc(t,e){return(t.datum.datum_type===Wi||t.datum.datum_type===$i||t.datum.datum_type===pn)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Wi||e.datum.datum_type===$i||e.datum.datum_type===pn)&&t.datumCode!=="WGS84"}function as(t,e,n,r){var s;Array.isArray(n)?n=Dh(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var o=n.z!==void 0;if(Gc(n),t.datum&&e.datum&&zc(t,e)&&(s=new He("WGS84"),n=as(t,s,n,r),t=s),r&&t.axis!=="enu"&&(n=du(t,!1,n)),t.projName==="longlat")n={x:n.x*Jt,y:n.y*Jt,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=Ic(t.datum,e.datum,n),!!n)return n=n,e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*Te,y:n.y*Te,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),r&&e.axis!=="enu"?du(e,!0,n):(n&&!o&&delete n.z,n)}var mu=He("WGS84");function pa(t,e,n,r){var s,o,h;return Array.isArray(n)?(s=as(t,e,n,r)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.slice(3)):[s.x,s.y,n[2]].concat(n.slice(3)):[s.x,s.y].concat(n.slice(2)):[s.x,s.y]):(o=as(t,e,n,r),h=Object.keys(n),h.length===2||h.forEach(function(f){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(f==="x"||f==="y"||f==="z")return}else if(f==="x"||f==="y")return;o[f]=n[f]}),o)}function Ur(t){return t instanceof He?t:typeof t=="object"&&"oProj"in t?t.oProj:He(t)}function Rc(t,e,n){var r,s,o=!1,h;return typeof e>"u"?(s=Ur(t),r=mu,o=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,s=Ur(t),r=mu,o=!0),r||(r=Ur(t)),s||(s=Ur(e)),n?pa(r,s,n):(h={forward:function(f,l){return pa(r,s,f,l)},inverse:function(f,l){return pa(s,r,f,l)}},o&&(h.oProj=s),h)}var vu=6,Eh="AJSAJS",Mh="AFAFAF",dn=65,Pe=73,We=79,$n=86,Hn=90;const kc={forward:Ah,inverse:Zc,toPoint:Ch};function Ah(t,e){return e=e||5,Wc(qc({lat:t[1],lon:t[0]}),e)}function Zc(t){var e=Wa(xh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Ch(t){var e=Wa(xh(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function ga(t){return t*(Math.PI/180)}function pu(t){return 180*(t/Math.PI)}function qc(t){var e=t.lat,n=t.lon,r=6378137,s=.00669438,o=.9996,h,f,l,d,v,_,m,y=ga(e),E=ga(n),g,D;D=Math.floor((n+180)/6)+1,n===180&&(D=60),e>=56&&e<64&&n>=3&&n<12&&(D=32),e>=72&&e<84&&(n>=0&&n<9?D=31:n>=9&&n<21?D=33:n>=21&&n<33?D=35:n>=33&&n<42&&(D=37)),h=(D-1)*6-180+3,g=ga(h),f=s/(1-s),l=r/Math.sqrt(1-s*Math.sin(y)*Math.sin(y)),d=Math.tan(y)*Math.tan(y),v=f*Math.cos(y)*Math.cos(y),_=Math.cos(y)*(E-g),m=r*((1-s/4-3*s*s/64-5*s*s*s/256)*y-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*y)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*y)-35*s*s*s/3072*Math.sin(6*y));var b=o*l*(_+(1-d+v)*_*_*_/6+(5-18*d+d*d+72*v-58*f)*_*_*_*_*_/120)+5e5,S=o*(m+l*Math.tan(y)*(_*_/2+(5-d+9*v+4*v*v)*_*_*_*_/24+(61-58*d+d*d+600*v-330*f)*_*_*_*_*_*_/720));return e<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(b),zoneNumber:D,zoneLetter:Uc(e)}}function Wa(t){var e=t.northing,n=t.easting,r=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var o=.9996,h=6378137,f=.00669438,l,d=(1-Math.sqrt(1-f))/(1+Math.sqrt(1-f)),v,_,m,y,E,g,D,b,S,M=n-5e5,F=e;r<"N"&&(F-=1e7),D=(s-1)*6-180+3,l=f/(1-f),g=F/o,b=g/(h*(1-f/4-3*f*f/64-5*f*f*f/256)),S=b+(3*d/2-27*d*d*d/32)*Math.sin(2*b)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*b)+151*d*d*d/96*Math.sin(6*b),v=h/Math.sqrt(1-f*Math.sin(S)*Math.sin(S)),_=Math.tan(S)*Math.tan(S),m=l*Math.cos(S)*Math.cos(S),y=h*(1-f)/Math.pow(1-f*Math.sin(S)*Math.sin(S),1.5),E=M/(v*o);var C=S-v*Math.tan(S)/y*(E*E/2-(5+3*_+10*m-4*m*m-9*l)*E*E*E*E/24+(61+90*_+298*m+45*_*_-252*l-3*m*m)*E*E*E*E*E*E/720);C=pu(C);var A=(E-(1+2*_+m)*E*E*E/6+(5-2*m+28*_-3*m*m+8*l+24*_*_)*E*E*E*E*E/120)/Math.cos(S);A=D+pu(A);var T;if(t.accuracy){var N=Wa({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});T={top:N.lat,right:N.lon,bottom:C,left:A}}else T={lat:C,lon:A};return T}function Uc(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Wc(t,e){var n="00000"+t.easting,r="00000"+t.northing;return t.zoneNumber+t.zoneLetter+$c(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+r.substr(r.length-5,e)}function $c(t,e,n){var r=bh(n),s=Math.floor(t/1e5),o=Math.floor(e/1e5)%20;return Hc(s,o,r)}function bh(t){var e=t%vu;return e===0&&(e=vu),e}function Hc(t,e,n){var r=n-1,s=Eh.charCodeAt(r),o=Mh.charCodeAt(r),h=s+t-1,f=o+e,l=!1;h>Hn&&(h=h-Hn+dn-1,l=!0),(h===Pe||s<Pe&&h>Pe||(h>Pe||s<Pe)&&l)&&h++,(h===We||s<We&&h>We||(h>We||s<We)&&l)&&(h++,h===Pe&&h++),h>Hn&&(h=h-Hn+dn-1),f>$n?(f=f-$n+dn-1,l=!0):l=!1,(f===Pe||o<Pe&&f>Pe||(f>Pe||o<Pe)&&l)&&f++,(f===We||o<We&&f>We||(f>We||o<We)&&l)&&(f++,f===Pe&&f++),f>$n&&(f=f-$n+dn-1);var d=String.fromCharCode(h)+String.fromCharCode(f);return d}function xh(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,r="",s,o=0;!/[A-Z]/.test(s=t.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+t;r+=s,o++}var h=parseInt(r,10);if(o===0||o+3>e)throw"MGRSPoint bad conversion from: "+t;var f=t.charAt(o++);if(f<="A"||f==="B"||f==="Y"||f>="Z"||f==="I"||f==="O")throw"MGRSPoint zone letter "+f+" not handled: "+t;n=t.substring(o,o+=2);for(var l=bh(h),d=jc(n.charAt(0),l),v=Vc(n.charAt(1),l);v<Xc(f);)v+=2e6;var _=e-o;if(_%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var m=_/2,y=0,E=0,g,D,b,S,M;return m>0&&(g=1e5/Math.pow(10,m),D=t.substring(o,o+m),y=parseFloat(D)*g,b=t.substring(o+m),E=parseFloat(b)*g),S=y+d,M=E+v,{easting:S,northing:M,zoneLetter:f,zoneNumber:h,accuracy:g}}function jc(t,e){for(var n=Eh.charCodeAt(e-1),r=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===Pe&&n++,n===We&&n++,n>Hn){if(s)throw"Bad character: "+t;n=dn,s=!0}r+=1e5}return r}function Vc(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=Mh.charCodeAt(e-1),r=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===Pe&&n++,n===We&&n++,n>$n){if(s)throw"Bad character: "+t;n=dn,s=!0}r+=1e5}return r}function Xc(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function wn(t,e,n){if(!(this instanceof wn))return new wn(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var r=t.split(",");this.x=parseFloat(r[0]),this.y=parseFloat(r[1]),this.z=parseFloat(r[2])||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}wn.fromMGRS=function(t){return new wn(Ch(t))};wn.prototype.toMGRS=function(t){return Ah([this.x,this.y],t)};var Kc=1,Jc=.25,gu=.046875,yu=.01953125,wu=.01068115234375,Yc=.75,Qc=.46875,t0=.013020833333333334,e0=.007120768229166667,i0=.3645833333333333,n0=.005696614583333333,r0=.3076171875;function $a(t){var e=[];e[0]=Kc-t*(Jc+t*(gu+t*(yu+t*wu))),e[1]=t*(Yc-t*(gu+t*(yu+t*wu)));var n=t*t;return e[2]=n*(Qc-t*(t0+t*e0)),n*=t,e[3]=n*(i0-t*n0),e[4]=n*t*r0,e}function An(t,e,n,r){return n*=e,e*=e,r[0]*t-n*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}var s0=20;function Ha(t,e,n){for(var r=1/(1-e),s=t,o=s0;o;--o){var h=Math.sin(s),f=1-e*h*h;if(f=(An(s,h,Math.cos(s),n)-t)*(f*Math.sqrt(f))*r,s-=f,Math.abs(f)<et)return s}return s}function a0(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=$a(this.es),this.ml0=An(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function o0(t){var e=t.x,n=t.y,r=nt(e-this.long0,this.over),s,o,h,f=Math.sin(n),l=Math.cos(n);if(this.es){var v=l*r,_=Math.pow(v,2),m=this.ep2*Math.pow(l,2),y=Math.pow(m,2),E=Math.abs(l)>et?Math.tan(n):0,g=Math.pow(E,2),D=Math.pow(g,2);s=1-this.es*Math.pow(f,2),v=v/Math.sqrt(s);var b=An(n,f,l,this.en);o=this.a*(this.k0*v*(1+_/6*(1-g+m+_/20*(5-18*g+D+14*m-58*g*m+_/42*(61+179*D-D*g-479*g)))))+this.x0,h=this.a*(this.k0*(b-this.ml0+f*r*v/2*(1+_/12*(5-g+9*m+4*y+_/30*(61+D-58*g+270*m-330*g*m+_/56*(1385+543*D-D*g-3111*g))))))+this.y0}else{var d=l*Math.sin(r);if(Math.abs(Math.abs(d)-1)<et)return 93;if(o=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,h=l*Math.cos(r)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(h),d>=1){if(d-1>et)return 93;h=0}else h=Math.acos(h);n<0&&(h=-h),h=this.a*this.k0*(h-this.lat0)+this.y0}return t.x=o,t.y=h,t}function u0(t){var e,n,r,s,o=(t.x-this.x0)*(1/this.a),h=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+h/this.k0,n=Ha(e,this.es,this.en),Math.abs(n)<V){var _=Math.sin(n),m=Math.cos(n),y=Math.abs(m)>et?Math.tan(n):0,E=this.ep2*Math.pow(m,2),g=Math.pow(E,2),D=Math.pow(y,2),b=Math.pow(D,2);e=1-this.es*Math.pow(_,2);var S=o*Math.sqrt(e)/this.k0,M=Math.pow(S,2);e=e*y,r=n-e*M/(1-this.es)*.5*(1-M/12*(5+3*D-9*E*D+E-4*g-M/30*(61+90*D-252*E*D+45*b+46*E-M/56*(1385+3633*D+4095*b+1574*b*D)))),s=nt(this.long0+S*(1-M/6*(1+2*D+E-M/20*(5+28*D+24*b+8*E*D+6*E-M/42*(61+662*D+1320*b+720*b*D))))/m,this.over)}else r=V*hr(h),s=0;else{var f=Math.exp(o/this.k0),l=.5*(f-1/f),d=this.lat0+h/this.k0,v=Math.cos(d);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(l,2))),r=Math.asin(e),h<0&&(r=-r),l===0&&v===0?s=0:s=nt(Math.atan2(l,v)+this.long0,this.over)}return t.x=s,t.y=r,t}var h0=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const Kr={init:a0,forward:o0,inverse:u0,names:h0};function Sh(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function Ne(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),r=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))}function f0(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function l0(t){var e=Math.abs(t);return e=f0(e*(1+e/(Ne(1,e)+1))),t<0?-e:e}function ja(t,e){for(var n=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0,h;--r>=0;)h=-o+n*s+t[r],o=s,s=h;return e+h*Math.sin(2*e)}function c0(t,e){for(var n=2*Math.cos(e),r=t.length-1,s=t[r],o=0,h;--r>=0;)h=-o+n*s+t[r],o=s,s=h;return Math.sin(e)*h}function d0(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function Ph(t,e,n){for(var r=Math.sin(e),s=Math.cos(e),o=Sh(n),h=d0(n),f=2*s*h,l=-2*r*o,d=t.length-1,v=t[d],_=0,m=0,y=0,E,g;--d>=0;)E=m,g=_,m=v,_=y,v=-E+f*m-l*_+t[d],y=-g+l*m+f*_;return f=r*h,l=s*o,[f*v-l*y,f*y+l*v]}function _0(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Kr.init.apply(this),this.forward=Kr.forward,this.inverse=Kr.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var r=ja(this.cbg,this.lat0);this.Zb=-this.Qn*(r+c0(this.gtu,2*r))}function m0(t){var e=nt(t.x-this.long0,this.over),n=t.y;n=ja(this.cbg,n);var r=Math.sin(n),s=Math.cos(n),o=Math.sin(e),h=Math.cos(e);n=Math.atan2(r,h*s),e=Math.atan2(o*s,Ne(r,s*h)),e=l0(Math.tan(e));var f=Ph(this.gtu,2*n,2*e);n=n+f[0],e=e+f[1];var l,d;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,d=this.a*(this.Qn*n+this.Zb)+this.y0):(l=1/0,d=1/0),t.x=l,t.y=d,t}function v0(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var r,s;if(Math.abs(e)<=2.623395162778){var o=Ph(this.utg,2*n,2*e);n=n+o[0],e=e+o[1],e=Math.atan(Sh(e));var h=Math.sin(n),f=Math.cos(n),l=Math.sin(e),d=Math.cos(e);n=Math.atan2(h*d,Ne(l,d*f)),e=Math.atan2(l,d*f),r=nt(e+this.long0,this.over),s=ja(this.cgb,n)}else r=1/0,s=1/0;return t.x=r,t.y=s,t}var p0=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const Jr={init:_0,forward:m0,inverse:v0,names:p0};function g0(t,e){if(t===void 0){if(t=Math.floor((nt(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var y0="etmerc";function w0(){var t=g0(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Jt,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Jr.init.apply(this),this.forward=Jr.forward,this.inverse=Jr.inverse}var D0=["Universal Transverse Mercator System","utm"];const E0={init:w0,names:D0,dependsOn:y0};function Va(t,e){return Math.pow((1-t)/(1+t),e)}var M0=20;function A0(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Gt)/(Math.pow(Math.tan(.5*this.lat0+Gt),this.C)*Va(this.e*t,this.ratexp))}function C0(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+Gt),this.C)*Va(this.e*Math.sin(n),this.ratexp))-V,t.x=this.C*e,t}function b0(t){for(var e=1e-14,n=t.x/this.C,r=t.y,s=Math.pow(Math.tan(.5*r+Gt)/this.K,1/this.C),o=M0;o>0&&(r=2*Math.atan(s*Va(this.e*Math.sin(t.y),-.5*this.e))-V,!(Math.abs(r-t.y)<e));--o)t.y=r;return o?(t.x=n,t.y=r,t):null}const Xa={init:A0,forward:C0,inverse:b0};function x0(){Xa.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function S0(t){var e,n,r,s;return t.x=nt(t.x-this.long0,this.over),Xa.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*r),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*r),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function P0(t){var e,n,r,s,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Ne(t.x,t.y)){var h=2*Math.atan2(o,this.R2);e=Math.sin(h),n=Math.cos(h),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/o),r=Math.atan2(t.x*e,o*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,r=0;return t.x=r,t.y=s,Xa.inverse.apply(this,[t]),t.x=nt(t.x+this.long0,this.over),t}var F0=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const N0={init:x0,forward:S0,inverse:P0,names:F0};function Ka(t,e,n){return e*=n,Math.tan(.5*(V+t))*Math.pow((1-e)/(1+e),.5*n)}function T0(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=et&&(this.k0=.5*(1+hr(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=et&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=et&&Math.abs(Math.cos(this.lat_ts))>et&&(this.k0=.5*this.cons*ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ye(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ai(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(Ka(this.lat0,this.sinlat0,this.e))-V,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function B0(t){var e=t.x,n=t.y,r=Math.sin(n),s=Math.cos(n),o,h,f,l,d,v,_=nt(e-this.long0,this.over);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=et&&Math.abs(n+this.lat0)<=et?(t.x=NaN,t.y=NaN,t):this.sphere?(o=2*this.k0/(1+this.sinlat0*r+this.coslat0*s*Math.cos(_)),t.x=this.a*o*s*Math.sin(_)+this.x0,t.y=this.a*o*(this.coslat0*r-this.sinlat0*s*Math.cos(_))+this.y0,t):(h=2*Math.atan(Ka(n,r,this.e))-V,l=Math.cos(h),f=Math.sin(h),Math.abs(this.coslat0)<=et?(d=Ye(this.e,n*this.con,this.con*r),v=2*this.a*this.k0*d/this.cons,t.x=this.x0+v*Math.sin(e-this.long0),t.y=this.y0-this.con*v*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<et?(o=2*this.a*this.k0/(1+l*Math.cos(_)),t.y=o*f):(o=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*f+this.cosX0*l*Math.cos(_))),t.y=o*(this.cosX0*f-this.sinX0*l*Math.cos(_))+this.y0),t.x=o*l*Math.sin(_)+this.x0,t))}function L0(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,s,o,h=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var f=2*Math.atan(h/(2*this.a*this.k0));return e=this.long0,n=this.lat0,h<=et?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(f)*this.sinlat0+t.y*Math.sin(f)*this.coslat0/h),Math.abs(this.coslat0)<et?this.lat0>0?e=nt(this.long0+Math.atan2(t.x,-1*t.y),this.over):e=nt(this.long0+Math.atan2(t.x,t.y),this.over):e=nt(this.long0+Math.atan2(t.x*Math.sin(f),h*this.coslat0*Math.cos(f)-t.y*this.sinlat0*Math.sin(f)),this.over),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=et){if(h<=et)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,r=h*this.cons/(2*this.a*this.k0),n=this.con*ar(this.e,r),e=this.con*nt(this.con*this.long0+Math.atan2(t.x,-1*t.y),this.over)}else s=2*Math.atan(h*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,h<=et?o=this.X0:(o=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/h),e=nt(this.long0+Math.atan2(t.x*Math.sin(s),h*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)),this.over)),n=-1*ar(this.e,Math.tan(.5*(V+o)));return t.x=e,t.y=n,t}var I0=["stere","Stereographic_South_Pole","Polar_Stereographic_variant_A","Polar_Stereographic_variant_B","Polar_Stereographic"];const O0={init:T0,forward:B0,inverse:L0,names:I0,ssfn_:Ka};function G0(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,r=this.rf,s=1/r,o=2*s-Math.pow(s,2),h=this.e=Math.sqrt(o);this.R=this.k0*n*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var f=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),d=Math.log((1+h*e)/(1-h*e));this.K=f-this.alpha*l+this.alpha*h/2*d}function z0(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),h=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(o))),f=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(f))/(1-Math.sin(f)))+this.y0,t.x=this.R*h+this.x0,t}function R0(t){for(var e=t.x-this.x0,n=t.y-this.y0,r=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(r)),h=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(s))),f=this.lambda0+h/this.alpha,l=0,d=o,v=-1e3,_=0;Math.abs(d-v)>1e-7;){if(++_>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),v=d,d=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=f,t.y=d,t}var k0=["somerc"];const Z0={init:G0,forward:z0,inverse:R0,names:k0};var fn=1e-7;function q0(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.projName=="object"?Object.keys(t.projName)[0]:t.projName;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1||e.indexOf(ph(n))!==-1}function U0(){var t,e,n,r,s,o,h,f,l,d,v=0,_,m=0,y=0,E=0,g=0,D=0,b=0;this.no_off=q0(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),S&&(b=this.alpha),M&&(v=this.rectified_grid_angle),S||M)m=this.longc;else if(y=this.long1,g=this.lat1,E=this.long2,D=this.lat2,Math.abs(g-D)<=fn||(t=Math.abs(g))<=fn||Math.abs(t-V)<=fn||Math.abs(Math.abs(this.lat0)-V)<=fn||Math.abs(Math.abs(D)-V)<=fn)throw new Error;var F=1-this.es;e=Math.sqrt(F),Math.abs(this.lat0)>et?(f=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*f*f,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/F),this.A=this.B*this.k0*e/t,r=this.B*e/(n*Math.sqrt(t)),s=r*r-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=r,this.E*=Math.pow(Ye(this.e,this.lat0,f),this.B)):(this.B=1/e,this.A=this.k0,this.E=r=s=1),S||M?(S?(_=Math.asin(Math.sin(b)/r),M||(v=b)):(_=v,b=Math.asin(r*Math.sin(_))),this.lam0=m-Math.asin(.5*(s-1/s)*Math.tan(_))/this.B):(o=Math.pow(Ye(this.e,g,Math.sin(g)),this.B),h=Math.pow(Ye(this.e,D,Math.sin(D)),this.B),s=this.E/o,l=(h-o)/(h+o),d=this.E*this.E,d=(d-h*o)/(d+h*o),t=y-E,t<-Math.PI?E-=rr:t>Math.PI&&(E+=rr),this.lam0=nt(.5*(y+E)-Math.atan(d*Math.tan(.5*this.B*(y-E))/l)/this.B,this.over),_=Math.atan(2*Math.sin(this.B*nt(y-this.lam0,this.over))/(s-1/s)),v=b=Math.asin(r*Math.sin(_))),this.singam=Math.sin(_),this.cosgam=Math.cos(_),this.sinrot=Math.sin(v),this.cosrot=Math.cos(v),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(r*r-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*_,this.v_pole_n=this.ArB*Math.log(Math.tan(Gt-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(Gt+s))}function W0(t){var e={},n,r,s,o,h,f,l,d;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-V)>et){if(h=this.E/Math.pow(Ye(this.e,t.y,Math.sin(t.y)),this.B),f=1/h,n=.5*(h-f),r=.5*(h+f),o=Math.sin(this.B*t.x),s=(n*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(s)-1)<et)throw new Error;d=.5*this.ArB*Math.log((1-s)/(1+s)),f=Math.cos(this.B*t.x),Math.abs(f)<fn?l=this.A*t.x:l=this.ArB*Math.atan2(n*this.cosgam+o*this.singam,f)}else d=t.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*t.y;return this.no_rot?(e.x=l,e.y=d):(l-=this.u_0,e.x=d*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-d*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function $0(t){var e,n,r,s,o,h,f,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=Math.exp(-this.BrA*n),s=.5*(r-1/r),o=.5*(r+1/r),h=Math.sin(this.BrA*e),f=(h*this.cosgam+s*this.singam)/o,Math.abs(Math.abs(f)-1)<et)l.x=0,l.y=f<0?-V:V;else{if(l.y=this.E/Math.sqrt((1+f)/(1-f)),l.y=ar(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(s*this.cosgam-h*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var H0=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_variant_A","Hotine_Oblique_Mercator_Variant_B","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const j0={init:U0,forward:W0,inverse:$0,names:H0};function V0(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<et)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),r=ai(this.e,e,n),s=Ye(this.e,this.lat1,e),o=Math.sin(this.lat2),h=Math.cos(this.lat2),f=ai(this.e,o,h),l=Ye(this.e,this.lat2,o),d=Math.abs(Math.abs(this.lat0)-V)<et?0:Ye(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>et?this.ns=Math.log(r/f)/Math.log(s/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function X0(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=et&&(n=hr(n)*(V-2*et));var r=Math.abs(Math.abs(n)-V),s,o;if(r>et)s=Ye(this.e,n,Math.sin(n)),o=this.a*this.f0*Math.pow(s,this.ns);else{if(r=n*this.ns,r<=0)return null;o=0}var h=this.ns*nt(e-this.long0,this.over);return t.x=this.k0*(o*Math.sin(h))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(h))+this.y0,t}function K0(t){var e,n,r,s,o,h=(t.x-this.x0)/this.k0,f=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(h*h+f*f),n=1):(e=-Math.sqrt(h*h+f*f),n=-1);var l=0;if(e!==0&&(l=Math.atan2(n*h,n*f)),e!==0||this.ns>0){if(n=1/this.ns,r=Math.pow(e/(this.a*this.f0),n),s=ar(this.e,r),s===-9999)return null}else s=-V;return o=nt(l/this.ns+this.long0,this.over),t.x=o,t.y=s,t}var J0=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const Y0={init:V0,forward:X0,inverse:K0,names:J0};function Q0(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function td(t){var e,n,r,s,o,h,f,l=t.x,d=t.y,v=nt(l-this.long0,this.over);return e=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/e)-this.s45),r=-v*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(s)),h=this.n*o,f=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=f*Math.cos(h)/1,t.x=f*Math.sin(h)/1,this.czech||(t.y*=-1,t.x*=-1),t}function ed(t){var e,n,r,s,o,h,f,l,d=t.x;t.x=t.y,t.y=d,this.czech||(t.y*=-1,t.x*=-1),h=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x),s=o/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/h,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(s)),n=Math.asin(Math.cos(r)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,f=e,l=0;var v=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(f))/(1-this.e*Math.sin(f)),this.e/2))-this.s45),Math.abs(f-t.y)<1e-10&&(l=1),f=t.y,v+=1;while(l===0&&v<15);return v>=15?null:t}var id=["Krovak","krovak"];const nd={init:Q0,forward:td,inverse:ed,names:id};function Ce(t,e,n,r,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)}function fr(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function lr(t){return .375*t*(1+.25*t*(1+.46875*t))}function cr(t){return .05859375*t*t*(1+.75*t)}function dr(t){return t*t*t*(35/3072)}function Ja(t,e,n){var r=e*n;return t/Math.sqrt(1-r*r)}function Ni(t){return Math.abs(t)<V?t:t-hr(t)*Math.PI}function os(t,e,n,r,s){var o,h;o=t/e;for(var f=0;f<15;f++)if(h=(t-(e*o-n*Math.sin(2*o)+r*Math.sin(4*o)-s*Math.sin(6*o)))/(e-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*s*Math.cos(6*o)),o+=h,Math.abs(h)<=1e-10)return o;return NaN}function rd(){this.sphere||(this.e0=fr(this.es),this.e1=lr(this.es),this.e2=cr(this.es),this.e3=dr(this.es),this.ml0=this.a*Ce(this.e0,this.e1,this.e2,this.e3,this.lat0))}function sd(t){var e,n,r=t.x,s=t.y;if(r=nt(r-this.long0,this.over),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(r))-this.lat0);else{var o=Math.sin(s),h=Math.cos(s),f=Ja(this.a,this.e,o),l=Math.tan(s)*Math.tan(s),d=r*Math.cos(s),v=d*d,_=this.es*h*h/(1-this.es),m=this.a*Ce(this.e0,this.e1,this.e2,this.e3,s);e=f*d*(1-v*l*(1/6-(8-l+8*_)*v/120)),n=m-this.ml0+f*o/h*v*(.5+(5-l+6*_)*v/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function ad(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,s;if(this.sphere){var o=n+this.lat0;r=Math.asin(Math.sin(o)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(o))}else{var h=this.ml0/this.a+n,f=os(h,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(f)-V)<=et)return t.x=this.long0,t.y=V,n<0&&(t.y*=-1),t;var l=Ja(this.a,this.e,Math.sin(f)),d=l*l*l/this.a/this.a*(1-this.es),v=Math.pow(Math.tan(f),2),_=e*this.a/l,m=_*_;r=f-l*Math.tan(f)/d*_*_*(.5-(1+3*v)*_*_/24),s=_*(1-m*(v/3+(1+3*v)*v*m/15))/Math.cos(f)}return t.x=nt(s+this.long0,this.over),t.y=Ni(r),t}var od=["Cassini","Cassini_Soldner","cass"];const ud={init:rd,forward:sd,inverse:ad,names:od};function bi(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var Sa=1,Pa=2,Fa=3,Yr=4;function hd(){var t=Math.abs(this.lat0);if(Math.abs(t-V)<et?this.mode=this.lat0<0?Sa:Pa:Math.abs(t)<et?this.mode=Fa:this.mode=Yr,this.es>0){var e;switch(this.qp=bi(this.e,1),this.mmf=.5/(1-this.es),this.apa=gd(this.es),this.mode){case Pa:this.dd=1;break;case Sa:this.dd=1;break;case Fa:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case Yr:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=bi(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===Yr&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function fd(t){var e,n,r,s,o,h,f,l,d,v,_=t.x,m=t.y;if(_=nt(_-this.long0,this.over),this.sphere){if(o=Math.sin(m),v=Math.cos(m),r=Math.cos(_),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+v*r:1+this.sinph0*o+this.cosph0*v*r,n<=et)return null;n=Math.sqrt(2/n),e=n*v*Math.sin(_),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*v*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(m+this.lat0)<et)return null;n=Gt-m*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(_),n*=r}}else{switch(f=0,l=0,d=0,r=Math.cos(_),s=Math.sin(_),o=Math.sin(m),h=bi(this.e,o),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=h/this.qp,l=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:d=1+this.sinb1*f+this.cosb1*l*r;break;case this.EQUIT:d=1+l*r;break;case this.N_POLE:d=V+m,h=this.qp-h;break;case this.S_POLE:d=m-V,h=this.qp+h;break}if(Math.abs(d)<et)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?n=this.ymf*d*(this.cosb1*f-this.sinb1*l*r):n=(d=Math.sqrt(2/(1+l*r)))*f*this.ymf,e=this.xmf*d*l*s;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(d=Math.sqrt(h))*s,n=r*(this.mode===this.S_POLE?d:-d)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function ld(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,r,s,o,h,f,l,d;if(this.sphere){var v=0,_,m=0;if(_=Math.sqrt(e*e+n*n),s=_*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(m=Math.sin(s),v=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(_)<=et?0:Math.asin(n*m/_),e*=m,n=v*_;break;case this.OBLIQ:s=Math.abs(_)<=et?this.lat0:Math.asin(v*this.sinph0+n*m*this.cosph0/_),e*=m*this.cosph0,n=(v-Math.sin(s)*this.sinph0)*_;break;case this.N_POLE:n=-n,s=V-s;break;case this.S_POLE:s-=V;break}r=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,l=Math.sqrt(e*e+n*n),l<et)return t.x=this.long0,t.y=this.lat0,t;h=2*Math.asin(.5*l/this.rq),o=Math.cos(h),e*=h=Math.sin(h),this.mode===this.OBLIQ?(d=o*this.sinb1+n*h*this.cosb1/l,f=this.qp*d,n=l*this.cosb1*o-n*this.sinb1*h):(d=n*h/l,f=this.qp*d,n=l*o)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),f=e*e+n*n,!f)return t.x=this.long0,t.y=this.lat0,t;d=1-f/this.qp,this.mode===this.S_POLE&&(d=-d)}r=Math.atan2(e,n),s=yd(Math.asin(d),this.apa)}return t.x=nt(this.long0+r,this.over),t.y=s,t}var cd=.3333333333333333,dd=.17222222222222222,_d=.10257936507936508,md=.06388888888888888,vd=.0664021164021164,pd=.016415012942191543;function gd(t){var e,n=[];return n[0]=t*cd,e=t*t,n[0]+=e*dd,n[1]=e*md,e*=t,n[0]+=e*_d,n[1]+=e*vd,n[2]=e*pd,n}function yd(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var wd=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const Dd={init:hd,forward:fd,inverse:ld,names:wd,S_POLE:Sa,N_POLE:Pa,EQUIT:Fa,OBLIQ:Yr};function Pi(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function Ed(){Math.abs(this.lat1+this.lat2)<et||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ai(this.e3,this.sin_po,this.cos_po),this.qs1=bi(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ai(this.e3,this.sin_po,this.cos_po),this.qs2=bi(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=bi(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>et?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Md(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=bi(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*nt(e-this.long0,this.over),h=s*Math.sin(o)+this.x0,f=this.rh-s*Math.cos(o)+this.y0;return t.x=h,t.y=f,t}function Ad(t){var e,n,r,s,o,h;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),s=0,e!==0&&(s=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?h=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,h=this.phi1z(this.e3,n)),o=nt(s/this.ns0+this.long0,this.over),t.x=o,t.y=h,t}function Cd(t,e){var n,r,s,o,h,f=Pi(.5*e);if(t<et)return f;for(var l=t*t,d=1;d<=25;d++)if(n=Math.sin(f),r=Math.cos(f),s=t*n,o=1-s*s,h=.5*o*o/r*(e/(1-l)-n/o+.5/t*Math.log((1-s)/(1+s))),f=f+h,Math.abs(h)<=1e-7)return f;return null}var bd=["Albers_Conic_Equal_Area","Albers_Equal_Area","Albers","aea"];const xd={init:Ed,forward:Md,inverse:Ad,names:bd,phi1z:Cd};function Sd(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Pd(t){var e,n,r,s,o,h,f,l,d=t.x,v=t.y;return r=nt(d-this.long0,this.over),e=Math.sin(v),n=Math.cos(v),s=Math.cos(r),h=this.sin_p14*e+this.cos_p14*n*s,o=1,h>0||Math.abs(h)<=et?(f=this.x0+this.a*o*n*Math.sin(r)/h,l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*n*s)/h):(f=this.x0+this.infinity_dist*n*Math.sin(r),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=f,t.y=l,t}function Fd(t){var e,n,r,s,o,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),r=Math.cos(s),h=Pi(r*this.sin_p14+t.y*n*this.cos_p14/e),o=Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n),o=nt(this.long0+o,this.over)):(h=this.phic0,o=0),t.x=o,t.y=h,t}var Nd=["gnom"];const Td={init:Sd,forward:Pd,inverse:Fd,names:Nd};function Bd(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*V:V;for(var r=Math.asin(.5*e),s,o,h,f,l=0;l<30;l++)if(o=Math.sin(r),h=Math.cos(r),f=t*o,s=Math.pow(1-f*f,2)/(2*h)*(e/(1-t*t)-o/(1-f*f)+.5/t*Math.log((1-f)/(1+f))),r+=s,Math.abs(s)<=1e-10)return r;return NaN}function Ld(){this.sphere||(this.k0=ai(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Id(t){var e=t.x,n=t.y,r,s,o=nt(e-this.long0,this.over);if(this.sphere)r=this.x0+this.a*o*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var h=bi(this.e,Math.sin(n));r=this.x0+this.a*this.k0*o,s=this.y0+this.a*h*.5/this.k0}return t.x=r,t.y=s,t}function Od(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=nt(this.long0+t.x/this.a/Math.cos(this.lat_ts),this.over),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=Bd(this.e,2*t.y*this.k0/this.a),e=nt(this.long0+t.x/(this.a*this.k0),this.over)),t.x=e,t.y=n,t}var Gd=["cea"];const zd={init:Ld,forward:Id,inverse:Od,names:Gd};function Rd(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function kd(t){var e=t.x,n=t.y,r=nt(e-this.long0,this.over),s=Ni(n-this.lat0);return t.x=this.x0+this.a*r*this.rc,t.y=this.y0+this.a*s,t}function Zd(t){var e=t.x,n=t.y;return t.x=nt(this.long0+(e-this.x0)/(this.a*this.rc),this.over),t.y=Ni(this.lat0+(n-this.y0)/this.a),t}var qd=["Equirectangular","Equidistant_Cylindrical","Equidistant_Cylindrical_Spherical","eqc"];const Ud={init:Rd,forward:kd,inverse:Zd,names:qd};var Du=20;function Wd(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fr(this.es),this.e1=lr(this.es),this.e2=cr(this.es),this.e3=dr(this.es),this.ml0=this.a*Ce(this.e0,this.e1,this.e2,this.e3,this.lat0)}function $d(t){var e=t.x,n=t.y,r,s,o,h=nt(e-this.long0,this.over);if(o=h*Math.sin(n),this.sphere)Math.abs(n)<=et?(r=this.a*h,s=-1*this.a*this.lat0):(r=this.a*Math.sin(o)/Math.tan(n),s=this.a*(Ni(n-this.lat0)+(1-Math.cos(o))/Math.tan(n)));else if(Math.abs(n)<=et)r=this.a*h,s=-1*this.ml0;else{var f=Ja(this.a,this.e,Math.sin(n))/Math.tan(n);r=f*Math.sin(o),s=this.a*Ce(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+f*(1-Math.cos(o))}return t.x=r+this.x0,t.y=s+this.y0,t}function Hd(t){var e,n,r,s,o,h,f,l,d;if(r=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=et)e=nt(r/this.a+this.long0,this.over),n=0;else{h=this.lat0+s/this.a,f=r*r/this.a/this.a+h*h,l=h;var v;for(o=Du;o;--o)if(v=Math.tan(l),d=-1*(h*(l*v+1)-l-.5*(l*l+f)*v)/((l-h)/v-1),l+=d,Math.abs(d)<=et){n=l;break}e=nt(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n),this.over)}else if(Math.abs(s+this.ml0)<=et)n=0,e=nt(this.long0+r/this.a,this.over);else{h=(this.ml0+s)/this.a,f=r*r/this.a/this.a+h*h,l=h;var _,m,y,E,g;for(o=Du;o;--o)if(g=this.e*Math.sin(l),_=Math.sqrt(1-g*g)*Math.tan(l),m=this.a*Ce(this.e0,this.e1,this.e2,this.e3,l),y=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),E=m/this.a,d=(h*(_*E+1)-E-.5*_*(E*E+f))/(this.es*Math.sin(2*l)*(E*E+f-2*h*E)/(4*_)+(h-E)*(_*y-2/Math.sin(2*l))-y),l-=d,Math.abs(d)<=et){n=l;break}_=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=nt(this.long0+Math.asin(r*_/this.a)/Math.sin(n),this.over)}return t.x=e,t.y=n,t}var jd=["Polyconic","American_Polyconic","poly"];const Vd={init:Wd,forward:$d,inverse:Hd,names:jd};function Xd(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Kd(t){var e,n=t.x,r=t.y,s=r-this.lat0,o=n-this.long0,h=s/Vn*1e-5,f=o,l=1,d=0;for(e=1;e<=10;e++)l=l*h,d=d+this.A[e]*l;var v=d,_=f,m=1,y=0,E,g,D=0,b=0;for(e=1;e<=6;e++)E=m*v-y*_,g=y*v+m*_,m=E,y=g,D=D+this.B_re[e]*m-this.B_im[e]*y,b=b+this.B_im[e]*m+this.B_re[e]*y;return t.x=b*this.a+this.x0,t.y=D*this.a+this.y0,t}function Jd(t){var e,n=t.x,r=t.y,s=n-this.x0,o=r-this.y0,h=o/this.a,f=s/this.a,l=1,d=0,v,_,m=0,y=0;for(e=1;e<=6;e++)v=l*h-d*f,_=d*h+l*f,l=v,d=_,m=m+this.C_re[e]*l-this.C_im[e]*d,y=y+this.C_im[e]*l+this.C_re[e]*d;for(var E=0;E<this.iterations;E++){var g=m,D=y,b,S,M=h,F=f;for(e=2;e<=6;e++)b=g*m-D*y,S=D*m+g*y,g=b,D=S,M=M+(e-1)*(this.B_re[e]*g-this.B_im[e]*D),F=F+(e-1)*(this.B_im[e]*g+this.B_re[e]*D);g=1,D=0;var C=this.B_re[1],A=this.B_im[1];for(e=2;e<=6;e++)b=g*m-D*y,S=D*m+g*y,g=b,D=S,C=C+e*(this.B_re[e]*g-this.B_im[e]*D),A=A+e*(this.B_im[e]*g+this.B_re[e]*D);var T=C*C+A*A;m=(M*C+F*A)/T,y=(F*C-M*A)/T}var N=m,I=y,q=1,k=0;for(e=1;e<=9;e++)q=q*N,k=k+this.D[e]*q;var W=this.lat0+k*Vn*1e5,at=this.long0+I;return t.x=at,t.y=W,t}var Yd=["New_Zealand_Map_Grid","nzmg"];const Qd={init:Xd,forward:Kd,inverse:Jd,names:Yd};function t1(){}function e1(t){var e=t.x,n=t.y,r=nt(e-this.long0,this.over),s=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=o,t}function i1(t){t.x-=this.x0,t.y-=this.y0;var e=nt(this.long0+t.x/this.a,this.over),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var n1=["Miller_Cylindrical","mill"];const r1={init:t1,forward:e1,inverse:i1,names:n1};var s1=20;function a1(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=$a(this.es)}function o1(t){var e,n,r=t.x,s=t.y;if(r=nt(r-this.long0,this.over),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var o=this.n*Math.sin(s),h=s1;h;--h){var f=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=f,Math.abs(f)<et)break}e=this.a*this.C_x*r*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var l=Math.sin(s),d=Math.cos(s);n=this.a*An(s,l,d,this.en),e=this.a*r*d/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function u1(t){var e,n,r,s;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r=r/(this.C_x*(this.m+Math.cos(e))),this.m?e=Pi((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Pi(Math.sin(e)/this.n)),r=nt(r+this.long0,this.over),e=Ni(e)):(e=Ha(t.y/this.a,this.es,this.en),s=Math.abs(e),s<V?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),r=nt(n,this.over)):s-et<V&&(r=this.long0)),t.x=r,t.y=e,t}var h1=["Sinusoidal","sinu"];const f1={init:a1,forward:o1,inverse:u1,names:h1};function l1(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0}function c1(t){for(var e=t.x,n=t.y,r=nt(e-this.long0,this.over),s=n,o=Math.PI*Math.sin(n);;){var h=-(s+Math.sin(s)-o)/(1+Math.cos(s));if(s+=h,Math.abs(h)<et)break}s/=2,Math.PI/2-Math.abs(n)<et&&(r=0);var f=.900316316158*this.a*r*Math.cos(s)+this.x0,l=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=f,t.y=l,t}function d1(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var r=nt(this.long0+t.x/(.900316316158*this.a*Math.cos(e)),this.over);r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=r,t.y=s,t}var _1=["Mollweide","moll"];const m1={init:l1,forward:c1,inverse:d1,names:_1};function v1(){Math.abs(this.lat1+this.lat2)<et||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=fr(this.es),this.e1=lr(this.es),this.e2=cr(this.es),this.e3=dr(this.es),this.sin_phi=Math.sin(this.lat1),this.cos_phi=Math.cos(this.lat1),this.ms1=ai(this.e,this.sin_phi,this.cos_phi),this.ml1=Ce(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<et?this.ns=this.sin_phi:(this.sin_phi=Math.sin(this.lat2),this.cos_phi=Math.cos(this.lat2),this.ms2=ai(this.e,this.sin_phi,this.cos_phi),this.ml2=Ce(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Ce(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function p1(t){var e=t.x,n=t.y,r;if(this.sphere)r=this.a*(this.g-n);else{var s=Ce(this.e0,this.e1,this.e2,this.e3,n);r=this.a*(this.g-s)}var o=this.ns*nt(e-this.long0,this.over),h=this.x0+r*Math.sin(o),f=this.y0+this.rh-r*Math.cos(o);return t.x=h,t.y=f,t}function g1(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,r,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var o=0;if(n!==0&&(o=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=nt(this.long0+o/this.ns,this.over),r=Ni(this.g-n/this.a),t.x=s,t.y=r,t;var h=this.g-n/this.a;return r=os(h,this.e0,this.e1,this.e2,this.e3),s=nt(this.long0+o/this.ns,this.over),t.x=s,t.y=r,t}var y1=["Equidistant_Conic","eqdc"];const w1={init:v1,forward:p1,inverse:g1,names:y1};function D1(){this.R=this.a}function E1(t){var e=t.x,n=t.y,r=nt(e-this.long0,this.over),s,o;Math.abs(n)<=et&&(s=this.x0+this.R*r,o=this.y0);var h=Pi(2*Math.abs(n/Math.PI));(Math.abs(r)<=et||Math.abs(Math.abs(n)-V)<=et)&&(s=this.x0,n>=0?o=this.y0+Math.PI*this.R*Math.tan(.5*h):o=this.y0+Math.PI*this.R*-Math.tan(.5*h));var f=.5*Math.abs(Math.PI/r-r/Math.PI),l=f*f,d=Math.sin(h),v=Math.cos(h),_=v/(d+v-1),m=_*_,y=_*(2/d-1),E=y*y,g=Math.PI*this.R*(f*(_-E)+Math.sqrt(l*(_-E)*(_-E)-(E+l)*(m-E)))/(E+l);r<0&&(g=-g),s=this.x0+g;var D=l+_;return g=Math.PI*this.R*(y*D-f*Math.sqrt((E+l)*(l+1)-D*D))/(E+l),n>=0?o=this.y0+g:o=this.y0-g,t.x=s,t.y=o,t}function M1(t){var e,n,r,s,o,h,f,l,d,v,_,m,y;return t.x-=this.x0,t.y-=this.y0,_=Math.PI*this.R,r=t.x/_,s=t.y/_,o=r*r+s*s,h=-Math.abs(s)*(1+o),f=h-2*s*s+r*r,l=-2*h+1+2*s*s+o*o,y=s*s/l+(2*f*f*f/l/l/l-9*h*f/l/l)/27,d=(h-f*f/3/l)/l,v=2*Math.sqrt(-d/3),_=3*y/d/v,Math.abs(_)>1&&(_>=0?_=1:_=-1),m=Math.acos(_)/3,t.y>=0?n=(-v*Math.cos(m+Math.PI/3)-f/3/l)*Math.PI:n=-(-v*Math.cos(m+Math.PI/3)-f/3/l)*Math.PI,Math.abs(r)<et?e=this.long0:e=nt(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-s*s)+o*o))/2/r,this.over),t.x=e,t.y=n,t}var A1=["Van_der_Grinten_I","VanDerGrinten","Van_der_Grinten","vandg"];const C1={init:D1,forward:E1,inverse:M1,names:A1};function b1(t,e,n,r,s,o){const h=r-e,f=Math.atan((1-o)*Math.tan(t)),l=Math.atan((1-o)*Math.tan(n)),d=Math.sin(f),v=Math.cos(f),_=Math.sin(l),m=Math.cos(l);let y=h,E,g=100,D,b,S,M,F,C,A,T,N,I,q,k,W,at;do{if(D=Math.sin(y),b=Math.cos(y),S=Math.sqrt(m*D*(m*D)+(v*_-d*m*b)*(v*_-d*m*b)),S===0)return{azi1:0,s12:0};M=d*_+v*m*b,F=Math.atan2(S,M),C=v*m*D/S,A=1-C*C,T=A!==0?M-2*d*_/A:0,N=o/16*A*(4+o*(4-3*A)),E=y,y=h+(1-N)*o*C*(F+N*S*(T+N*M*(-1+2*T*T)))}while(Math.abs(y-E)>1e-12&&--g>0);return g===0?{azi1:NaN,s12:NaN}:(I=A*(s*s-s*(1-o)*(s*(1-o)))/(s*(1-o)*(s*(1-o))),q=1+I/16384*(4096+I*(-768+I*(320-175*I))),k=I/1024*(256+I*(-128+I*(74-47*I))),W=k*S*(T+k/4*(M*(-1+2*T*T)-k/6*T*(-3+4*S*S)*(-3+4*T*T))),at=s*(1-o)*q*(F-W),{azi1:Math.atan2(m*D,v*_-d*m*b),s12:at})}function x1(t,e,n,r,s,o){const h=Math.atan((1-o)*Math.tan(t)),f=Math.sin(h),l=Math.cos(h),d=Math.sin(n),v=Math.cos(n),_=Math.atan2(f,l*v),m=l*d,y=1-m*m,E=y*(s*s-s*(1-o)*(s*(1-o)))/(s*(1-o)*(s*(1-o))),g=1+E/16384*(4096+E*(-768+E*(320-175*E))),D=E/1024*(256+E*(-128+E*(74-47*E)));let b=r/(s*(1-o)*g),S,M=100,F,C,A,T;do F=Math.cos(2*_+b),C=Math.sin(b),A=Math.cos(b),T=D*C*(F+D/4*(A*(-1+2*F*F)-D/6*F*(-3+4*C*C)*(-3+4*F*F))),S=b,b=r/(s*(1-o)*g)+T;while(Math.abs(b-S)>1e-12&&--M>0);if(M===0)return{lat2:NaN,lon2:NaN};const N=f*C-l*A*v,I=Math.atan2(f*A+l*C*v,(1-o)*Math.sqrt(m*m+N*N)),q=Math.atan2(C*d,l*A-f*C*v),k=o/16*y*(4+o*(4-3*y)),W=q-(1-k)*o*m*(b+k*C*(F+k*A*(-1+2*F*F))),at=e+W;return{lat2:I,lon2:at}}function S1(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0),this.f=this.es/(1+Math.sqrt(1-this.es))}function P1(t){var e=t.x,n=t.y,r=Math.sin(t.y),s=Math.cos(t.y),o=nt(e-this.long0,this.over),h,f,l,d,v,_,m,y,E,g,D;return this.sphere?Math.abs(this.sin_p12-1)<=et?(t.x=this.x0+this.a*(V-n)*Math.sin(o),t.y=this.y0-this.a*(V-n)*Math.cos(o),t):Math.abs(this.sin_p12+1)<=et?(t.x=this.x0+this.a*(V+n)*Math.sin(o),t.y=this.y0+this.a*(V+n)*Math.cos(o),t):(E=this.sin_p12*r+this.cos_p12*s*Math.cos(o),m=Math.acos(E),y=m?m/Math.sin(m):1,t.x=this.x0+this.a*y*s*Math.sin(o),t.y=this.y0+this.a*y*(this.cos_p12*r-this.sin_p12*s*Math.cos(o)),t):(h=fr(this.es),f=lr(this.es),l=cr(this.es),d=dr(this.es),Math.abs(this.sin_p12-1)<=et?(v=this.a*Ce(h,f,l,d,V),_=this.a*Ce(h,f,l,d,n),t.x=this.x0+(v-_)*Math.sin(o),t.y=this.y0-(v-_)*Math.cos(o),t):Math.abs(this.sin_p12+1)<=et?(v=this.a*Ce(h,f,l,d,V),_=this.a*Ce(h,f,l,d,n),t.x=this.x0+(v+_)*Math.sin(o),t.y=this.y0+(v+_)*Math.cos(o),t):Math.abs(e)<et&&Math.abs(n-this.lat0)<et?(t.x=t.y=0,t):(g=b1(this.lat0,this.long0,n,e,this.a,this.f),D=g.azi1,t.x=g.s12*Math.sin(D),t.y=g.s12*Math.cos(D),t))}function F1(t){t.x-=this.x0,t.y-=this.y0;var e,n,r,s,o,h,f,l,d,v,_,m,y,E,g,D;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*V*this.a?void 0:(n=e/this.a,r=Math.sin(n),s=Math.cos(n),o=this.long0,Math.abs(e)<=et?h=this.lat0:(h=Pi(s*this.sin_p12+t.y*r*this.cos_p12/e),f=Math.abs(this.lat0)-V,Math.abs(f)<=et?this.lat0>=0?o=nt(this.long0+Math.atan2(t.x,-t.y),this.over):o=nt(this.long0-Math.atan2(-t.x,t.y),this.over):o=nt(this.long0+Math.atan2(t.x*r,e*this.cos_p12*s-t.y*this.sin_p12*r),this.over)),t.x=o,t.y=h,t)):(l=fr(this.es),d=lr(this.es),v=cr(this.es),_=dr(this.es),Math.abs(this.sin_p12-1)<=et?(m=this.a*Ce(l,d,v,_,V),e=Math.sqrt(t.x*t.x+t.y*t.y),y=m-e,h=os(y/this.a,l,d,v,_),o=nt(this.long0+Math.atan2(t.x,-1*t.y),this.over),t.x=o,t.y=h,t):Math.abs(this.sin_p12+1)<=et?(m=this.a*Ce(l,d,v,_,V),e=Math.sqrt(t.x*t.x+t.y*t.y),y=e-m,h=os(y/this.a,l,d,v,_),o=nt(this.long0+Math.atan2(t.x,t.y),this.over),t.x=o,t.y=h,t):(E=Math.atan2(t.x,t.y),g=Math.sqrt(t.x*t.x+t.y*t.y),D=x1(this.lat0,this.long0,E,g,this.a,this.f),t.x=D.lon2,t.y=D.lat2,t))}var N1=["Azimuthal_Equidistant","aeqd"];const T1={init:S1,forward:P1,inverse:F1,names:N1};function B1(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function L1(t){var e,n,r,s,o,h,f,l,d=t.x,v=t.y;return r=nt(d-this.long0,this.over),e=Math.sin(v),n=Math.cos(v),s=Math.cos(r),h=this.sin_p14*e+this.cos_p14*n*s,o=1,(h>0||Math.abs(h)<=et)&&(f=this.a*o*n*Math.sin(r),l=this.y0+this.a*o*(this.cos_p14*e-this.sin_p14*n*s)),t.x=f,t.y=l,t}function I1(t){var e,n,r,s,o,h,f;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Pi(e/this.a),r=Math.sin(n),s=Math.cos(n),h=this.long0,Math.abs(e)<=et?(f=this.lat0,t.x=h,t.y=f,t):(f=Pi(s*this.sin_p14+t.y*r*this.cos_p14/e),o=Math.abs(this.lat0)-V,Math.abs(o)<=et?(this.lat0>=0?h=nt(this.long0+Math.atan2(t.x,-t.y),this.over):h=nt(this.long0-Math.atan2(-t.x,t.y),this.over),t.x=h,t.y=f,t):(h=nt(this.long0+Math.atan2(t.x*r,e*this.cos_p14*s-t.y*this.sin_p14*r),this.over),t.x=h,t.y=f,t))}var O1=["ortho"];const G1={init:B1,forward:L1,inverse:I1,names:O1};var Xt={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},zt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function z1(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=V-Gt/2?this.face=Xt.TOP:this.lat0<=-(V-Gt/2)?this.face=Xt.BOTTOM:Math.abs(this.long0)<=Gt?this.face=Xt.FRONT:Math.abs(this.long0)<=V+Gt?this.face=this.long0>0?Xt.RIGHT:Xt.LEFT:this.face=Xt.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function R1(t){var e={x:0,y:0},n,r,s,o,h,f,l={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,r=t.x,this.face===Xt.TOP)o=V-n,r>=Gt&&r<=V+Gt?(l.value=zt.AREA_0,s=r-V):r>V+Gt||r<=-(V+Gt)?(l.value=zt.AREA_1,s=r>0?r-ee:r+ee):r>-(V+Gt)&&r<=-Gt?(l.value=zt.AREA_2,s=r+V):(l.value=zt.AREA_3,s=r);else if(this.face===Xt.BOTTOM)o=V+n,r>=Gt&&r<=V+Gt?(l.value=zt.AREA_0,s=-r+V):r<Gt&&r>=-Gt?(l.value=zt.AREA_1,s=-r):r<-Gt&&r>=-(V+Gt)?(l.value=zt.AREA_2,s=-r-V):(l.value=zt.AREA_3,s=r>0?-r+ee:-r-ee);else{var d,v,_,m,y,E,g;this.face===Xt.RIGHT?r=gn(r,+V):this.face===Xt.BACK?r=gn(r,+ee):this.face===Xt.LEFT&&(r=gn(r,-V)),m=Math.sin(n),y=Math.cos(n),E=Math.sin(r),g=Math.cos(r),d=y*g,v=y*E,_=m,this.face===Xt.FRONT?(o=Math.acos(d),s=Wr(o,_,v,l)):this.face===Xt.RIGHT?(o=Math.acos(v),s=Wr(o,_,-d,l)):this.face===Xt.BACK?(o=Math.acos(-d),s=Wr(o,_,-v,l)):this.face===Xt.LEFT?(o=Math.acos(-v),s=Wr(o,_,d,l)):(o=s=0,l.value=zt.AREA_0)}return f=Math.atan(12/ee*(s+Math.acos(Math.sin(s)*Math.cos(Gt))-V)),h=Math.sqrt((1-Math.cos(o))/(Math.cos(f)*Math.cos(f))/(1-Math.cos(Math.atan(1/Math.cos(s))))),l.value===zt.AREA_1?f+=V:l.value===zt.AREA_2?f+=ee:l.value===zt.AREA_3&&(f+=1.5*ee),e.x=h*Math.cos(f),e.y=h*Math.sin(f),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function k1(t){var e={lam:0,phi:0},n,r,s,o,h,f,l,d,v,_={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?_.value=zt.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(_.value=zt.AREA_1,n-=V):t.x<0&&-t.x>=Math.abs(t.y)?(_.value=zt.AREA_2,n=n<0?n+ee:n-ee):(_.value=zt.AREA_3,n+=V),v=ee/12*Math.tan(n),h=Math.sin(v)/(Math.cos(v)-1/Math.sqrt(2)),f=Math.atan(h),s=Math.cos(n),o=Math.tan(r),l=1-s*s*o*o*(1-Math.cos(Math.atan(1/Math.cos(f)))),l<-1?l=-1:l>1&&(l=1),this.face===Xt.TOP)d=Math.acos(l),e.phi=V-d,_.value===zt.AREA_0?e.lam=f+V:_.value===zt.AREA_1?e.lam=f<0?f+ee:f-ee:_.value===zt.AREA_2?e.lam=f-V:e.lam=f;else if(this.face===Xt.BOTTOM)d=Math.acos(l),e.phi=d-V,_.value===zt.AREA_0?e.lam=-f+V:_.value===zt.AREA_1?e.lam=-f:_.value===zt.AREA_2?e.lam=-f-V:e.lam=f<0?-f-ee:-f+ee;else{var m,y,E;m=l,v=m*m,v>=1?E=0:E=Math.sqrt(1-v)*Math.sin(f),v+=E*E,v>=1?y=0:y=Math.sqrt(1-v),_.value===zt.AREA_1?(v=y,y=-E,E=v):_.value===zt.AREA_2?(y=-y,E=-E):_.value===zt.AREA_3&&(v=y,y=E,E=-v),this.face===Xt.RIGHT?(v=m,m=-y,y=v):this.face===Xt.BACK?(m=-m,y=-y):this.face===Xt.LEFT&&(v=m,m=y,y=-v),e.phi=Math.acos(-E)-V,e.lam=Math.atan2(y,m),this.face===Xt.RIGHT?e.lam=gn(e.lam,-V):this.face===Xt.BACK?e.lam=gn(e.lam,-ee):this.face===Xt.LEFT&&(e.lam=gn(e.lam,+V))}if(this.es!==0){var g,D,b;g=e.phi<0?1:0,D=Math.tan(e.phi),b=this.b/Math.sqrt(D*D+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-b*b)/(this.one_minus_f*b)),g&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function Wr(t,e,n,r){var s;return t<et?(r.value=zt.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=Gt?r.value=zt.AREA_0:s>Gt&&s<=V+Gt?(r.value=zt.AREA_1,s-=V):s>V+Gt||s<=-(V+Gt)?(r.value=zt.AREA_2,s=s>=0?s-ee:s+ee):(r.value=zt.AREA_3,s+=V)),s}function gn(t,e){var n=t+e;return n<-ee?n+=rr:n>+ee&&(n-=rr),n}var Z1=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const q1={init:z1,forward:R1,inverse:k1,names:Z1};var Na=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],jn=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Fh=.8487,Nh=1.3523,Th=Te/5,U1=1/Th,_n=18,us=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},W1=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function $1(t,e,n,r){for(var s=e;r;--r){var o=t(s);if(s-=o,Math.abs(o)<n)break}return s}function H1(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function j1(t){var e=nt(t.x-this.long0,this.over),n=Math.abs(t.y),r=Math.floor(n*Th);r<0?r=0:r>=_n&&(r=_n-1),n=Te*(n-U1*r);var s={x:us(Na[r],n)*e,y:us(jn[r],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*Fh+this.x0,s.y=s.y*this.a*Nh+this.y0,s}function V1(t){var e={x:(t.x-this.x0)/(this.a*Fh),y:Math.abs(t.y-this.y0)/(this.a*Nh)};if(e.y>=1)e.x/=Na[_n][0],e.y=t.y<0?-V:V;else{var n=Math.floor(e.y*_n);for(n<0?n=0:n>=_n&&(n=_n-1);;)if(jn[n][0]>e.y)--n;else if(jn[n+1][0]<=e.y)++n;else break;var r=jn[n],s=5*(e.y-r[0])/(jn[n+1][0]-r[0]);s=$1(function(o){return(us(r,o)-e.y)/W1(r,o)},s,et,100),e.x/=us(Na[n],s),e.y=(5*n+s)*Jt,t.y<0&&(e.y=-e.y)}return e.x=nt(e.x+this.long0,this.over),e}var X1=["Robinson","robin"];const K1={init:H1,forward:j1,inverse:V1,names:X1};function J1(){this.name="geocent"}function Y1(t){var e=yh(t,this.es,this.a);return e}function Q1(t){var e=wh(t,this.es,this.a,this.b);return e}var t_=["Geocentric","geocentric","geocent","Geocent"];const e_={init:J1,forward:Y1,inverse:Q1,names:t_};var De={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Un={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function i_(){if(Object.keys(Un).forEach((function(n){if(typeof this[n]>"u")this[n]=Un[n].def;else{if(Un[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);Un[n].num&&(this[n]=parseFloat(this[n]))}Un[n].degrees&&(this[n]=this[n]*Jt)}).bind(this)),Math.abs(Math.abs(this.lat0)-V)<et?this.mode=this.lat0<0?De.S_POLE:De.N_POLE:Math.abs(this.lat0)<et?this.mode=De.EQUIT:(this.mode=De.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function n_(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),r=Math.cos(t.x),s,o;switch(this.mode){case De.OBLIQ:o=this.sinph0*e+this.cosph0*n*r;break;case De.EQUIT:o=n*r;break;case De.S_POLE:o=-e;break;case De.N_POLE:o=e;break}switch(o=this.pn1/(this.p-o),s=o*n*Math.sin(t.x),this.mode){case De.OBLIQ:o*=this.cosph0*e-this.sinph0*n*r;break;case De.EQUIT:o*=e;break;case De.N_POLE:o*=-(n*r);break;case De.S_POLE:o*=n*r;break}var h,f;return h=o*this.cg+s*this.sg,f=1/(h*this.sw*this.h1+this.cw),s=(s*this.cg-o*this.sg)*this.cw*f,o=h*f,t.x=s*this.a,t.y=o*this.a,t}function r_(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,r,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,r=this.pn1*t.y*this.cw*s,t.x=n*this.cg+r*this.sg,t.y=r*this.cg-n*this.sg;var o=Ne(t.x,t.y);if(Math.abs(o)<et)e.x=0,e.y=t.y;else{var h,f;switch(f=1-o*o*this.pfact,f=(this.p-Math.sqrt(f))/(this.pn1/o+o/this.pn1),h=Math.sqrt(1-f*f),this.mode){case De.OBLIQ:e.y=Math.asin(h*this.sinph0+t.y*f*this.cosph0/o),t.y=(h-this.sinph0*Math.sin(e.y))*o,t.x*=f*this.cosph0;break;case De.EQUIT:e.y=Math.asin(t.y*f/o),t.y=h*o,t.x*=f;break;case De.N_POLE:e.y=Math.asin(h),t.y=-t.y;break;case De.S_POLE:e.y=-Math.asin(h);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var s_=["Tilted_Perspective","tpers"];const a_={init:i_,forward:n_,inverse:r_,names:s_};function o_(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function u_(t){var e=t.x,n=t.y,r,s,o,h;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var f=this.radius_p/Ne(this.radius_p*Math.cos(n),Math.sin(n));if(s=f*Math.cos(e)*Math.cos(n),o=f*Math.sin(e)*Math.cos(n),h=f*Math.sin(n),(this.radius_g-s)*s-o*o-h*h*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(o/Ne(h,r)),t.y=this.radius_g_1*Math.atan(h/r)):(t.x=this.radius_g_1*Math.atan(o/r),t.y=this.radius_g_1*Math.atan(h/Ne(o,r)))}else this.shape==="sphere"&&(r=Math.cos(n),s=Math.cos(e)*r,o=Math.sin(e)*r,h=Math.sin(n),r=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(o/Ne(h,r)),t.y=this.radius_g_1*Math.atan(h/r)):(t.x=this.radius_g_1*Math.atan(o/r),t.y=this.radius_g_1*Math.atan(h/Ne(o,r))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function h_(t){var e=-1,n=0,r=0,s,o,h,f;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Ne(1,r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Ne(1,n));var l=r/this.radius_p;if(s=n*n+l*l+e*e,o=2*this.radius_g*e,h=o*o-4*s*this.C,h<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-o-Math.sqrt(h))/(2*s),e=this.radius_g+f*e,n*=f,r*=f,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(r=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+r*r)):(n=Math.tan(t.x/this.radius_g_1),r=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+r*r+e*e,o=2*this.radius_g*e,h=o*o-4*s*this.C,h<0)return t.x=Number.NaN,t.y=Number.NaN,t;f=(-o-Math.sqrt(h))/(2*s),e=this.radius_g+f*e,n*=f,r*=f,t.x=Math.atan2(n,e),t.y=Math.atan(r*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var f_=["Geostationary Satellite View","Geostationary_Satellite","geos"];const l_={init:o_,forward:u_,inverse:h_,names:f_};var Xn=1.340264,Kn=-.081106,Jn=893e-6,Yn=.003796,hs=Math.sqrt(3)/2;function c_(){this.es=0,this.long0=this.long0!==void 0?this.long0:0,this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0}function d_(t){var e=nt(t.x-this.long0,this.over),n=t.y,r=Math.asin(hs*Math.sin(n)),s=r*r,o=s*s*s;return t.x=e*Math.cos(r)/(hs*(Xn+3*Kn*s+o*(7*Jn+9*Yn*s))),t.y=r*(Xn+Kn*s+o*(Jn+Yn*s)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function __(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e=1e-9,n=12,r=t.y,s,o,h,f,l,d;for(d=0;d<n&&(s=r*r,o=s*s*s,h=r*(Xn+Kn*s+o*(Jn+Yn*s))-t.y,f=Xn+3*Kn*s+o*(7*Jn+9*Yn*s),r-=l=h/f,!(Math.abs(l)<e));++d);return s=r*r,o=s*s*s,t.x=hs*t.x*(Xn+3*Kn*s+o*(7*Jn+9*Yn*s))/Math.cos(r),t.y=Math.asin(Math.sin(r)/hs),t.x=nt(t.x+this.long0,this.over),t}var m_=["eqearth","Equal Earth","Equal_Earth"];const v_={init:c_,forward:d_,inverse:__,names:m_};var or=1e-10;function p_(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<or)throw new Error;this.es?(this.en=$a(this.es),this.m1=An(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=y_,this.forward=g_):(Math.abs(this.phi1)+or>=V?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=D_,this.forward=w_)}function g_(t){var e=nt(t.x-(this.long0||0),this.over),n=t.y,r,s,o;return r=this.am1+this.m1-An(n,s=Math.sin(n),o=Math.cos(n),this.en),s=o*e/(r*Math.sqrt(1-this.es*s*s)),t.x=r*Math.sin(s),t.y=this.am1-r*Math.cos(s),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function y_(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r,s;if(n=Ne(t.x,t.y=this.am1-t.y),s=Ha(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(s))<V)e=Math.sin(s),r=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(s);else if(Math.abs(e-V)<=or)r=0;else throw new Error;return t.x=nt(r+(this.long0||0),this.over),t.y=Ni(s),t}function w_(t){var e=nt(t.x-(this.long0||0),this.over),n=t.y,r,s;return s=this.cphi1+this.phi1-n,Math.abs(s)>or?(t.x=s*Math.sin(r=e*Math.cos(n)/s),t.y=this.cphi1-s*Math.cos(r)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function D_(t){t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var e,n,r=Ne(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-r,Math.abs(n)>V)throw new Error;return Math.abs(Math.abs(n)-V)<=or?e=0:e=r*Math.atan2(t.x,t.y)/Math.cos(n),t.x=nt(e+(this.long0||0),this.over),t.y=Ni(n),t}var E_=["bonne","Bonne (Werner lat_1=90)"];const M_={init:p_,names:E_},Eu={OBLIQUE:{forward:S_,inverse:F_},TRANSVERSE:{forward:P_,inverse:N_}},fs={ROTATE:{o_alpha:"oAlpha",o_lon_c:"oLongC",o_lat_c:"oLatC"},NEW_POLE:{o_lat_p:"oLatP",o_lon_p:"oLongP"},NEW_EQUATOR:{o_lon_1:"oLong1",o_lat_1:"oLat1",o_lon_2:"oLong2",o_lat_2:"oLat2"}};function A_(){if(this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.title=this.title||"General Oblique Transformation",this.isIdentity=mh.includes(this.o_proj),!this.o_proj)throw new Error("Missing parameter: o_proj");if(this.o_proj==="ob_tran")throw new Error("Invalid value for o_proj: "+this.o_proj);const t=this.projStr.replace("+proj=ob_tran","").replace("+o_proj=","+proj=").trim(),e=He(t);if(!e)throw new Error("Invalid parameter: o_proj. Unknown projection "+this.o_proj);e.long0=0,this.obliqueProjection=e;let n;const r=Object.keys(fs),s=f=>{if(typeof this[f]>"u")return;const l=parseFloat(this[f])*Jt;if(isNaN(l))throw new Error("Invalid value for "+f+": "+this[f]);return l};for(let f=0;f<r.length;f++){const l=r[f],d=fs[l],v=Object.entries(d);if(v.some(([m])=>typeof this[m]<"u")){n=d;for(let m=0;m<v.length;m++){const[y,E]=v[m],g=s(y);if(typeof g>"u")throw new Error("Missing parameter: "+y+".");this[E]=g}break}}if(!n)throw new Error("No valid parameters provided for ob_tran projection.");const{lamp:o,phip:h}=x_(this,n);this.lamp=o,Math.abs(h)>et?(this.cphip=Math.cos(h),this.sphip=Math.sin(h),this.projectionType=Eu.OBLIQUE):this.projectionType=Eu.TRANSVERSE}function C_(t){return this.projectionType.forward(this,t)}function b_(t){return this.projectionType.inverse(this,t)}function x_(t,e){let n,r;if(e===fs.ROTATE){let s=t.oLongC,o=t.oLatC,h=t.oAlpha;if(Math.abs(Math.abs(o)-V)<=et)throw new Error("Invalid value for o_lat_c: "+t.o_lat_c+" should be < 90°");r=s+Math.atan2(-1*Math.cos(h),-1*Math.sin(h)*Math.sin(o)),n=Math.asin(Math.cos(o)*Math.sin(h))}else if(e===fs.NEW_POLE)r=t.oLongP,n=t.oLatP;else{let s=t.oLong1,o=t.oLat1,h=t.oLong2,f=t.oLat2,l=Math.abs(o);if(Math.abs(o)>V-et)throw new Error("Invalid value for o_lat_1: "+t.o_lat_1+" should be < 90°");if(Math.abs(f)>V-et)throw new Error("Invalid value for o_lat_2: "+t.o_lat_2+" should be < 90°");if(Math.abs(o-f)<et)throw new Error("Invalid value for o_lat_1 and o_lat_2: o_lat_1 should be different from o_lat_2");if(l<et)throw new Error("Invalid value for o_lat_1: o_lat_1 should be different from zero");r=Math.atan2(Math.cos(o)*Math.sin(f)*Math.cos(s)-Math.sin(o)*Math.cos(f)*Math.cos(h),Math.sin(o)*Math.cos(f)*Math.sin(h)-Math.cos(o)*Math.sin(f)*Math.sin(s)),n=Math.atan(-1*Math.cos(r-s)/Math.tan(o))}return{lamp:r,phip:n}}function S_(t,e){let{x:n,y:r}=e;n+=t.long0;const s=Math.cos(n),o=Math.sin(r),h=Math.cos(r);e.x=nt(Math.atan2(h*Math.sin(n),t.sphip*h*s+t.cphip*o)+t.lamp),e.y=Math.asin(t.sphip*o-t.cphip*h*s);const f=t.obliqueProjection.forward(e);return t.isIdentity&&(f.x*=Te,f.y*=Te),f}function P_(t,e){let{x:n,y:r}=e;n+=t.long0;const s=Math.cos(r),o=Math.cos(n);e.x=nt(Math.atan2(s*Math.sin(n),Math.sin(r))+t.lamp),e.y=Math.asin(-1*s*o);const h=t.obliqueProjection.forward(e);return t.isIdentity&&(h.x*=Te,h.y*=Te),h}function F_(t,e){t.isIdentity&&(e.x*=Jt,e.y*=Jt);const n=t.obliqueProjection.inverse(e);let{x:r,y:s}=n;if(r<Number.MAX_VALUE){r-=t.lamp;const o=Math.cos(r),h=Math.sin(s),f=Math.cos(s);e.x=Math.atan2(f*Math.sin(r),t.sphip*f*o-t.cphip*h),e.y=Math.asin(t.sphip*h+t.cphip*f*o)}return e.x=nt(e.x+t.long0),e}function N_(t,e){t.isIdentity&&(e.x*=Jt,e.y*=Jt);const n=t.obliqueProjection.inverse(e);let{x:r,y:s}=n;if(r<Number.MAX_VALUE){const o=Math.cos(s);r-=t.lamp,e.x=Math.atan2(o*Math.sin(r),-1*Math.sin(s)),e.y=Math.asin(o*Math.cos(r))}return e.x=nt(e.x+t.long0),e}var T_=["General Oblique Transformation","General_Oblique_Transformation","ob_tran"];const B_={init:A_,forward:C_,inverse:b_,names:T_};function L_(t){t.Proj.projections.add(Kr),t.Proj.projections.add(Jr),t.Proj.projections.add(E0),t.Proj.projections.add(N0),t.Proj.projections.add(O0),t.Proj.projections.add(Z0),t.Proj.projections.add(j0),t.Proj.projections.add(Y0),t.Proj.projections.add(nd),t.Proj.projections.add(ud),t.Proj.projections.add(Dd),t.Proj.projections.add(xd),t.Proj.projections.add(Td),t.Proj.projections.add(zd),t.Proj.projections.add(Ud),t.Proj.projections.add(Vd),t.Proj.projections.add(Qd),t.Proj.projections.add(r1),t.Proj.projections.add(f1),t.Proj.projections.add(m1),t.Proj.projections.add(w1),t.Proj.projections.add(C1),t.Proj.projections.add(T1),t.Proj.projections.add(G1),t.Proj.projections.add(q1),t.Proj.projections.add(K1),t.Proj.projections.add(e_),t.Proj.projections.add(a_),t.Proj.projections.add(l_),t.Proj.projections.add(v_),t.Proj.projections.add(M_),t.Proj.projections.add(B_)}const Ti=Object.assign(Rc,{defaultDatum:"WGS84",Proj:He,WGS84:new He("WGS84"),Point:wn,toPoint:Dh,defs:me,nadgrid:Dc,transform:as,mgrs:kc,version:"__VERSION__"});L_(Ti);function ls(){return ls=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ls.apply(null,arguments)}var Bh={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null,legacySubset:!1};function I_(t,e){if(cs(t,e))return t[e];throw typeof t[e]=="function"&&G_(t,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function O_(t,e,n){if(cs(t,e))return t[e]=n,n;throw new Error('No access to property "'+e+'"')}function cs(t,e){return!z_(t)&&!Array.isArray(t)?!1:_s(R_,e)?!0:!(e in Object.prototype||e in Function.prototype)}function G_(t,e){return t==null||typeof t[e]!="function"||_s(t,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(t)?!1:_s(k_,e)?!0:!(e in Object.prototype||e in Function.prototype)}function z_(t){return typeof t=="object"&&t&&t.constructor===Object}var R_={length:!0,name:!0},k_={toString:!0,valueOf:!0,toLocaleString:!0};class Z_{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).filter(e=>this.has(e)).values()}get(e){return I_(this.wrappedObject,e)}set(e,n){return O_(this.wrappedObject,e,n),this}has(e){return cs(this.wrappedObject,e)&&e in this.wrappedObject}entries(){return q_(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var n of this.keys())e(this.get(n),n,this)}delete(e){cs(this.wrappedObject,e)&&delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function q_(t,e){return{next:()=>{var n=t.next();return n.done?n:{value:e(n.value),done:!1}}}}function Rt(t){return typeof t=="number"}function ae(t){return!t||typeof t!="object"||typeof t.constructor!="function"?!1:t.isBigNumber===!0&&typeof t.constructor.prototype=="object"&&t.constructor.prototype.isBigNumber===!0||typeof t.constructor.isDecimal=="function"&&t.constructor.isDecimal(t)===!0}function U_(t){return typeof t=="bigint"}function Lh(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isComplex===!0||!1}function Ih(t){return t&&typeof t=="object"&&Object.getPrototypeOf(t).isFraction===!0||!1}function Oh(t){return t&&t.constructor.prototype.isUnit===!0||!1}function ri(t){return typeof t=="string"}var ue=Array.isArray;function oe(t){return t&&t.constructor.prototype.isMatrix===!0||!1}function ds(t){return Array.isArray(t)||oe(t)}function W_(t){return t&&t.isDenseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function $_(t){return t&&t.isSparseMatrix&&t.constructor.prototype.isMatrix===!0||!1}function H_(t){return t&&t.constructor.prototype.isRange===!0||!1}function Ya(t){return t&&t.constructor.prototype.isIndex===!0||!1}function j_(t){return typeof t=="boolean"}function V_(t){return t&&t.constructor.prototype.isResultSet===!0||!1}function X_(t){return t&&t.constructor.prototype.isHelp===!0||!1}function K_(t){return typeof t=="function"}function J_(t){return t instanceof Date}function Y_(t){return t instanceof RegExp}function Qa(t){return!!(t&&typeof t=="object"&&t.constructor===Object&&!Lh(t)&&!Ih(t))}function Q_(t){return t?t instanceof Map||t instanceof Z_||typeof t.set=="function"&&typeof t.get=="function"&&typeof t.keys=="function"&&typeof t.has=="function":!1}function tm(t){return t===null}function em(t){return t===void 0}function im(t){return t&&t.isAccessorNode===!0&&t.constructor.prototype.isNode===!0||!1}function nm(t){return t&&t.isArrayNode===!0&&t.constructor.prototype.isNode===!0||!1}function rm(t){return t&&t.isAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function sm(t){return t&&t.isBlockNode===!0&&t.constructor.prototype.isNode===!0||!1}function am(t){return t&&t.isConditionalNode===!0&&t.constructor.prototype.isNode===!0||!1}function om(t){return t&&t.isConstantNode===!0&&t.constructor.prototype.isNode===!0||!1}function um(t){return t&&t.isFunctionAssignmentNode===!0&&t.constructor.prototype.isNode===!0||!1}function hm(t){return t&&t.isFunctionNode===!0&&t.constructor.prototype.isNode===!0||!1}function fm(t){return t&&t.isIndexNode===!0&&t.constructor.prototype.isNode===!0||!1}function lm(t){return t&&t.isNode===!0&&t.constructor.prototype.isNode===!0||!1}function cm(t){return t&&t.isObjectNode===!0&&t.constructor.prototype.isNode===!0||!1}function dm(t){return t&&t.isOperatorNode===!0&&t.constructor.prototype.isNode===!0||!1}function _m(t){return t&&t.isParenthesisNode===!0&&t.constructor.prototype.isNode===!0||!1}function mm(t){return t&&t.isRangeNode===!0&&t.constructor.prototype.isNode===!0||!1}function vm(t){return t&&t.isRelationalNode===!0&&t.constructor.prototype.isNode===!0||!1}function pm(t){return t&&t.isSymbolNode===!0&&t.constructor.prototype.isNode===!0||!1}function gm(t){return t&&t.constructor.prototype.isChain===!0||!1}function xi(t){var e=typeof t;return e==="object"?t===null?"null":ae(t)?"BigNumber":t.constructor&&t.constructor.name?t.constructor.name:"Object":e}function Wt(t){var e=typeof t;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||t===null||t===void 0)return t;if(typeof t.clone=="function")return t.clone();if(Array.isArray(t))return t.map(function(n){return Wt(n)});if(t instanceof Date)return new Date(t.valueOf());if(ae(t))return t;if(Qa(t))return ym(t,Wt);if(e==="function")return t;throw new TypeError("Cannot clone: unknown type of value (value: ".concat(t,")"))}function ym(t,e){var n={};for(var r in t)_s(t,r)&&(n[r]=e(t[r]));return n}function Dn(t,e){var n,r,s;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(r=0,s=t.length;r<s;r++)if(!Dn(t[r],e[r]))return!1;return!0}else{if(typeof t=="function")return t===e;if(t instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(n in t)if(!(n in e)||!Dn(t[n],e[n]))return!1;for(n in e)if(!(n in t))return!1;return!0}else return t===e}}function _s(t,e){return t&&Object.hasOwnProperty.call(t,e)}function wm(t,e){for(var n={},r=0;r<e.length;r++){var s=e[r],o=t[s];o!==void 0&&(n[s]=o)}return n}var Dm=["Matrix","Array"],Em=["number","BigNumber","bigint","Fraction"],_r=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Bh)};ls(_r,Bh,{MATRIX_OPTIONS:Dm,NUMBER_OPTIONS:Em});function Mu(){return!0}function qe(){return!1}function on(){}const Au="Argument is not a typed-function.";function Gh(){function t(x){return typeof x=="object"&&x!==null&&x.constructor===Object}const e=[{name:"number",test:function(x){return typeof x=="number"}},{name:"string",test:function(x){return typeof x=="string"}},{name:"boolean",test:function(x){return typeof x=="boolean"}},{name:"Function",test:function(x){return typeof x=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(x){return x instanceof Date}},{name:"RegExp",test:function(x){return x instanceof RegExp}},{name:"Object",test:t},{name:"null",test:function(x){return x===null}},{name:"undefined",test:function(x){return x===void 0}}],n={name:"any",test:Mu,isAny:!0};let r,s,o=0,h={createCount:0};function f(x){const B=r.get(x);if(B)return B;let R='Unknown type "'+x+'"';const Z=x.toLowerCase();let X;for(X of s)if(X.toLowerCase()===Z){R+='. Did you mean "'+X+'" ?';break}throw new TypeError(R)}function l(x){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const R=B?f(B).index:s.length,Z=[];for(let U=0;U<x.length;++U){if(!x[U]||typeof x[U].name!="string"||typeof x[U].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const tt=x[U].name;if(r.has(tt))throw new TypeError('Duplicate type name "'+tt+'"');Z.push(tt),r.set(tt,{name:tt,test:x[U].test,isAny:x[U].isAny,index:R+U,conversionsTo:[]})}const X=s.slice(R);s=s.slice(0,R).concat(Z).concat(X);for(let U=R+Z.length;U<s.length;++U)r.get(s[U]).index=U}function d(){r=new Map,s=[],o=0,l([n],!1)}d(),l(e);function v(){let x;for(x of s)r.get(x).conversionsTo=[];o=0}function _(x){const B=s.filter(R=>{const Z=r.get(R);return!Z.isAny&&Z.test(x)});return B.length?B:["any"]}function m(x){return x&&typeof x=="function"&&"_typedFunctionData"in x}function y(x,B,R){if(!m(x))throw new TypeError(Au);const Z=R&&R.exact,X=Array.isArray(B)?B.join(","):B,U=F(X),tt=D(U);if(!Z||tt in x.signatures){const vt=x._typedFunctionData.signatureMap.get(tt);if(vt)return vt}const Y=U.length;let st;if(Z){st=[];let vt;for(vt in x.signatures)st.push(x._typedFunctionData.signatureMap.get(vt))}else st=x._typedFunctionData.signatures;for(let vt=0;vt<Y;++vt){const Pt=U[vt],jt=[];let ge;for(ge of st){const Kt=N(ge.params,vt);if(!(!Kt||Pt.restParam&&!Kt.restParam)){if(!Kt.hasAny){const be=M(Kt);if(Pt.types.some(xe=>!be.has(xe.name)))continue}jt.push(ge)}}if(st=jt,st.length===0)break}let j;for(j of st)if(j.params.length<=Y)return j;throw new TypeError("Signature not found (signature: "+(x.name||"unnamed")+"("+D(U,", ")+"))")}function E(x,B,R){return y(x,B,R).implementation}function g(x,B){const R=f(B);if(R.test(x))return x;const Z=R.conversionsTo;if(Z.length===0)throw new Error("There are no conversions to "+B+" defined.");for(let X=0;X<Z.length;X++)if(f(Z[X].from).test(x))return Z[X].convert(x);throw new Error("Cannot convert "+x+" to "+B)}function D(x){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return x.map(R=>R.name).join(B)}function b(x){const B=x.indexOf("...")===0,Z=(B?x.length>3?x.slice(3):"any":x).split("|").map(Y=>f(Y.trim()));let X=!1,U=B?"...":"";return{types:Z.map(function(Y){return X=Y.isAny||X,U+=Y.name+"|",{name:Y.name,typeIndex:Y.index,test:Y.test,isAny:Y.isAny,conversion:null,conversionIndex:-1}}),name:U.slice(0,-1),hasAny:X,hasConversion:!1,restParam:B}}function S(x){const B=x.types.map(tt=>tt.name),R=_t(B);let Z=x.hasAny,X=x.name;const U=R.map(function(tt){const Y=f(tt.from);return Z=Y.isAny||Z,X+="|"+tt.from,{name:tt.from,typeIndex:Y.index,test:Y.test,isAny:Y.isAny,conversion:tt,conversionIndex:tt.index}});return{types:x.types.concat(U),name:X,hasAny:Z,hasConversion:U.length>0,restParam:x.restParam}}function M(x){return x.typeSet||(x.typeSet=new Set,x.types.forEach(B=>x.typeSet.add(B.name))),x.typeSet}function F(x){const B=[];if(typeof x!="string")throw new TypeError("Signatures must be strings");const R=x.trim();if(R==="")return B;const Z=R.split(",");for(let X=0;X<Z.length;++X){const U=b(Z[X].trim());if(U.restParam&&X!==Z.length-1)throw new SyntaxError('Unexpected rest parameter "'+Z[X]+'": only allowed for the last parameter');if(U.types.length===0)return null;B.push(U)}return B}function C(x){const B=Ot(x);return B?B.restParam:!1}function A(x){if(!x||x.types.length===0)return Mu;if(x.types.length===1)return f(x.types[0].name).test;if(x.types.length===2){const B=f(x.types[0].name).test,R=f(x.types[1].name).test;return function(X){return B(X)||R(X)}}else{const B=x.types.map(function(R){return f(R.name).test});return function(Z){for(let X=0;X<B.length;X++)if(B[X](Z))return!0;return!1}}}function T(x){let B,R,Z;if(C(x)){B=qt(x).map(A);const X=B.length,U=A(Ot(x)),tt=function(Y){for(let st=X;st<Y.length;st++)if(!U(Y[st]))return!1;return!0};return function(st){for(let j=0;j<B.length;j++)if(!B[j](st[j]))return!1;return tt(st)&&st.length>=X+1}}else return x.length===0?function(U){return U.length===0}:x.length===1?(R=A(x[0]),function(U){return R(U[0])&&U.length===1}):x.length===2?(R=A(x[0]),Z=A(x[1]),function(U){return R(U[0])&&Z(U[1])&&U.length===2}):(B=x.map(A),function(U){for(let tt=0;tt<B.length;tt++)if(!B[tt](U[tt]))return!1;return U.length===B.length})}function N(x,B){return B<x.length?x[B]:C(x)?Ot(x):null}function I(x,B){const R=N(x,B);return R?M(R):new Set}function q(x){return x.conversion===null||x.conversion===void 0}function k(x,B){const R=new Set;return x.forEach(Z=>{const X=I(Z.params,B);let U;for(U of X)R.add(U)}),R.has("any")?["any"]:Array.from(R)}function W(x,B,R){let Z,X;const U=x||"unnamed";let tt=R,Y;for(Y=0;Y<B.length;Y++){const Pt=[];if(tt.forEach(jt=>{const ge=N(jt.params,Y),Kt=A(ge);(Y<jt.params.length||C(jt.params))&&Kt(B[Y])&&Pt.push(jt)}),Pt.length===0){if(X=k(tt,Y),X.length>0){const jt=_(B[Y]);return Z=new TypeError("Unexpected type of argument in function "+U+" (expected: "+X.join(" or ")+", actual: "+jt.join(" | ")+", index: "+Y+")"),Z.data={category:"wrongType",fn:U,index:Y,actual:jt,expected:X},Z}}else tt=Pt}const st=tt.map(function(Pt){return C(Pt.params)?1/0:Pt.params.length});if(B.length<Math.min.apply(null,st))return X=k(tt,Y),Z=new TypeError("Too few arguments in function "+U+" (expected: "+X.join(" or ")+", index: "+B.length+")"),Z.data={category:"tooFewArgs",fn:U,index:B.length,expected:X},Z;const j=Math.max.apply(null,st);if(B.length>j)return Z=new TypeError("Too many arguments in function "+U+" (expected: "+j+", actual: "+B.length+")"),Z.data={category:"tooManyArgs",fn:U,index:B.length,expectedLength:j},Z;const vt=[];for(let Pt=0;Pt<B.length;++Pt)vt.push(_(B[Pt]).join("|"));return Z=new TypeError('Arguments of type "'+vt.join(", ")+'" do not match any of the defined signatures of function '+U+"."),Z.data={category:"mismatch",actual:vt},Z}function at(x){let B=s.length+1;for(let R=0;R<x.types.length;R++)B=Math.min(B,x.types[R].typeIndex);return B}function ot(x){let B=o+1;for(let R=0;R<x.types.length;R++)q(x.types[R])||(B=Math.min(B,x.types[R].conversionIndex));return B}function ut(x,B){if(x.hasAny){if(!B.hasAny)return .1}else if(B.hasAny)return-.1;if(x.restParam){if(!B.restParam)return .01}else if(B.restParam)return-.01;const R=at(x)-at(B);if(R<0)return-.001;if(R>0)return .001;const Z=ot(x),X=ot(B);if(x.hasConversion){if(!B.hasConversion)return(1+Z)*1e-6}else if(B.hasConversion)return-(1+X)*1e-6;const U=Z-X;return U<0?-1e-7:U>0?1e-7:0}function K(x,B){const R=x.params,Z=B.params,X=Ot(R),U=Ot(Z),tt=C(R),Y=C(Z);if(tt&&X.hasAny){if(!Y||!U.hasAny)return 1e7}else if(Y&&U.hasAny)return-1e7;let st=0,j=0,vt;for(vt of R)vt.hasAny&&++st,vt.hasConversion&&++j;let Pt=0,jt=0;for(vt of Z)vt.hasAny&&++Pt,vt.hasConversion&&++jt;if(st!==Pt)return(st-Pt)*1e6;if(tt&&X.hasConversion){if(!Y||!U.hasConversion)return 1e5}else if(Y&&U.hasConversion)return-1e5;if(j!==jt)return(j-jt)*1e4;if(tt){if(!Y)return 1e3}else if(Y)return-1e3;const ge=(R.length-Z.length)*(tt?-100:100);if(ge!==0)return ge;const Kt=[];let be=0;for(let hi=0;hi<R.length;++hi){const Xi=ut(R[hi],Z[hi]);Kt.push(Xi),be+=Xi}if(be!==0)return(be<0?-10:10)+be;let xe,ui=9;const Vi=ui/(Kt.length+1);for(xe of Kt){if(xe!==0)return(xe<0?-ui:ui)+xe;ui-=Vi}return 0}function _t(x){if(x.length===0)return[];const B=x.map(f);if(x.length===1)return B[0].conversionsTo;const R=new Set(x),Z=new Set;for(let U=0;U<B.length;++U)for(const tt of B[U].conversionsTo)R.has(tt.from)||Z.add(tt.from);const X=[];for(const U of Z){let tt=o+1,Y=null;for(let st=0;st<B.length;++st)for(const j of B[st].conversionsTo)j.from===U&&j.index<tt&&(tt=j.index,Y=j);X.push(Y)}return X}function J(x,B){let R=B,Z="";if(x.some(U=>U.hasConversion)){const U=C(x),tt=x.map(mt);Z=tt.map(Y=>Y.name).join(";"),R=function(){const st=[],j=U?arguments.length-1:arguments.length;for(let vt=0;vt<j;vt++)st[vt]=tt[vt](arguments[vt]);return U&&(st[j]=arguments[j].map(tt[j])),B.apply(this,st)}}let X=R;if(C(x)){const U=x.length-1;X=function(){return R.apply(this,Nt(arguments,0,U).concat([Nt(arguments,U)]))}}return Z&&Object.defineProperty(X,"name",{value:Z}),X}function mt(x){let B,R,Z,X;const U=[],tt=[];let Y="";x.types.forEach(function(j){j.conversion&&(Y+=j.conversion.from+"~>"+j.conversion.to+",",U.push(f(j.conversion.from).test),tt.push(j.conversion.convert))}),Y?Y=Y.slice(0,-1):Y="pass";let st=j=>j;switch(tt.length){case 0:break;case 1:B=U[0],Z=tt[0],st=function(vt){return B(vt)?Z(vt):vt};break;case 2:B=U[0],R=U[1],Z=tt[0],X=tt[1],st=function(vt){return B(vt)?Z(vt):R(vt)?X(vt):vt};break;default:st=function(vt){for(let Pt=0;Pt<tt.length;Pt++)if(U[Pt](vt))return tt[Pt](vt);return vt}}return Object.defineProperty(st,"name",{value:Y}),st}function Q(x){function B(R,Z,X){if(Z<R.length){const U=R[Z];let tt=[];if(U.restParam){const Y=U.types.filter(q);Y.length<U.types.length&&tt.push({types:Y,name:"..."+Y.map(st=>st.name).join("|"),hasAny:Y.some(st=>st.isAny),hasConversion:!1,restParam:!0}),tt.push(U)}else tt=U.types.map(function(Y){return{types:[Y],name:Y.name,hasAny:Y.isAny,hasConversion:Y.conversion,restParam:!1}});return Ht(tt,function(Y){return B(R,Z+1,X.concat([Y]))})}else return[X]}return B(x,0,[])}function ft(x,B){const R=Math.max(x.length,B.length);for(let Y=0;Y<R;Y++){const st=I(x,Y),j=I(B,Y);let vt=!1,Pt;for(Pt of j)if(st.has(Pt)){vt=!0;break}if(!vt)return!1}const Z=x.length,X=B.length,U=C(x),tt=C(B);return U?tt?Z===X:X>=Z:tt?Z>=X:Z===X}function wt(x){return x.map(B=>Oe(B)?Me(B.referToSelf.callback):Ge(B)?ne(B.referTo.references,B.referTo.callback):B)}function Et(x,B,R){const Z=[];let X;for(X of x){let U=R[X];if(typeof U!="number")throw new TypeError('No definition for referenced signature "'+X+'"');if(U=B[U],typeof U!="function")return!1;Z.push(U)}return Z}function At(x,B,R){const Z=wt(x),X=new Array(Z.length).fill(!1);let U=!0;for(;U;){U=!1;let tt=!0;for(let Y=0;Y<Z.length;++Y){if(X[Y])continue;const st=Z[Y];if(Oe(st))Z[Y]=st.referToSelf.callback(R),Z[Y].referToSelf=st.referToSelf,X[Y]=!0,tt=!1;else if(Ge(st)){const j=Et(st.referTo.references,Z,B);j?(Z[Y]=st.referTo.callback.apply(this,j),Z[Y].referTo=st.referTo,X[Y]=!0,tt=!1):U=!0}}if(tt&&U)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return Z}function gt(x){const B=/\bthis(\(|\.signatures\b)/;Object.keys(x).forEach(R=>{const Z=x[R];if(B.test(Z.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function ct(x,B){if(h.createCount++,Object.keys(B).length===0)throw new SyntaxError("No signatures provided");h.warnAgainstDeprecatedThis&&gt(B);const R=[],Z=[],X={},U=[];let tt;for(tt in B){if(!Object.prototype.hasOwnProperty.call(B,tt))continue;const It=F(tt);if(!It)continue;R.forEach(function(Li){if(ft(Li,It))throw new TypeError('Conflicting signatures "'+D(Li)+'" and "'+D(It)+'".')}),R.push(It);const ye=Z.length;Z.push(B[tt]);const Us=It.map(S);let Ki;for(Ki of Q(Us)){const Li=D(Ki);U.push({params:Ki,name:Li,fn:ye}),Ki.every(Fn=>!Fn.hasConversion)&&(X[Li]=ye)}}U.sort(K);const Y=At(Z,X,ti);let st;for(st in X)Object.prototype.hasOwnProperty.call(X,st)&&(X[st]=Y[X[st]]);const j=[],vt=new Map;for(st of U)vt.has(st.name)||(st.fn=Y[st.fn],j.push(st),vt.set(st.name,st));const Pt=j[0]&&j[0].params.length<=2&&!C(j[0].params),jt=j[1]&&j[1].params.length<=2&&!C(j[1].params),ge=j[2]&&j[2].params.length<=2&&!C(j[2].params),Kt=j[3]&&j[3].params.length<=2&&!C(j[3].params),be=j[4]&&j[4].params.length<=2&&!C(j[4].params),xe=j[5]&&j[5].params.length<=2&&!C(j[5].params),ui=Pt&&jt&&ge&&Kt&&be&&xe;for(let It=0;It<j.length;++It)j[It].test=T(j[It].params);const Vi=Pt?A(j[0].params[0]):qe,hi=jt?A(j[1].params[0]):qe,Xi=ge?A(j[2].params[0]):qe,Ps=Kt?A(j[3].params[0]):qe,Fs=be?A(j[4].params[0]):qe,Ns=xe?A(j[5].params[0]):qe,Ts=Pt?A(j[0].params[1]):qe,Bs=jt?A(j[1].params[1]):qe,Sn=ge?A(j[2].params[1]):qe,Ls=Kt?A(j[3].params[1]):qe,Is=be?A(j[4].params[1]):qe,Os=xe?A(j[5].params[1]):qe;for(let It=0;It<j.length;++It)j[It].implementation=J(j[It].params,j[It].fn);const Gs=Pt?j[0].implementation:on,ze=jt?j[1].implementation:on,lt=ge?j[2].implementation:on,pr=Kt?j[3].implementation:on,gr=be?j[4].implementation:on,yr=xe?j[5].implementation:on,wr=Pt?j[0].params.length:-1,Pn=jt?j[1].params.length:-1,Dr=ge?j[2].params.length:-1,yi=Kt?j[3].params.length:-1,Er=be?j[4].params.length:-1,zs=xe?j[5].params.length:-1,Rs=ui?6:0,ks=j.length,Zs=j.map(It=>It.test),Mr=j.map(It=>It.implementation),qs=function(){for(let ye=Rs;ye<ks;ye++)if(Zs[ye](arguments))return Mr[ye].apply(this,arguments);return h.onMismatch(x,arguments,j)};function ti(It,ye){return arguments.length===wr&&Vi(It)&&Ts(ye)?Gs.apply(this,arguments):arguments.length===Pn&&hi(It)&&Bs(ye)?ze.apply(this,arguments):arguments.length===Dr&&Xi(It)&&Sn(ye)?lt.apply(this,arguments):arguments.length===yi&&Ps(It)&&Ls(ye)?pr.apply(this,arguments):arguments.length===Er&&Fs(It)&&Is(ye)?gr.apply(this,arguments):arguments.length===zs&&Ns(It)&&Os(ye)?yr.apply(this,arguments):qs.apply(this,arguments)}try{Object.defineProperty(ti,"name",{value:x})}catch{}return ti.signatures=X,ti._typedFunctionData={signatures:j,signatureMap:vt},ti}function St(x,B,R){throw W(x,B,R)}function qt(x){return Nt(x,0,x.length-1)}function Ot(x){return x[x.length-1]}function Nt(x,B,R){return Array.prototype.slice.call(x,B,R)}function pe(x,B){for(let R=0;R<x.length;R++)if(B(x[R]))return x[R]}function Ht(x,B){return Array.prototype.concat.apply([],x.map(B))}function Lt(){const x=qt(arguments).map(R=>D(F(R))),B=Ot(arguments);if(typeof B!="function")throw new TypeError("Callback function expected as last argument");return ne(x,B)}function ne(x,B){return{referTo:{references:x,callback:B}}}function Me(x){if(typeof x!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:x}}}function Ge(x){return x&&typeof x.referTo=="object"&&Array.isArray(x.referTo.references)&&typeof x.referTo.callback=="function"}function Oe(x){return x&&typeof x.referToSelf=="object"&&typeof x.referToSelf.callback=="function"}function je(x,B){if(!x)return B;if(B&&B!==x){const R=new Error("Function names do not match (expected: "+x+", actual: "+B+")");throw R.data={actual:B,expected:x},R}return x}function gi(x){let B;for(const R in x)Object.prototype.hasOwnProperty.call(x,R)&&(m(x[R])||typeof x[R].signature=="string")&&(B=je(B,x[R].name));return B}function ji(x,B){let R;for(R in B)if(Object.prototype.hasOwnProperty.call(B,R)){if(R in x&&B[R]!==x[R]){const Z=new Error('Signature "'+R+'" is defined twice');throw Z.data={signature:R,sourceFunction:B[R],destFunction:x[R]},Z}x[R]=B[R]}}const bn=h;h=function(x){const B=typeof x=="string",R=B?1:0;let Z=B?x:"";const X={};for(let U=R;U<arguments.length;++U){const tt=arguments[U];let Y={},st;if(typeof tt=="function"?(st=tt.name,typeof tt.signature=="string"?Y[tt.signature]=tt:m(tt)&&(Y=tt.signatures)):t(tt)&&(Y=tt,B||(st=gi(tt))),Object.keys(Y).length===0){const j=new TypeError("Argument to 'typed' at index "+U+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw j.data={index:U,argument:tt},j}B||(Z=je(Z,st)),ji(X,Y)}return ct(Z||"",X)},h.create=Gh,h.createCount=bn.createCount,h.onMismatch=St,h.throwMismatchError=St,h.createError=W,h.clear=d,h.clearConversions=v,h.addTypes=l,h._findType=f,h.referTo=Lt,h.referToSelf=Me,h.convert=g,h.findSignature=y,h.find=E,h.isTypedFunction=m,h.warnAgainstDeprecatedThis=!0,h.addType=function(x,B){let R="any";B!==!1&&r.has("Object")&&(R="Object"),h.addTypes([x],R)};function xn(x){if(!x||typeof x.from!="string"||typeof x.to!="string"||typeof x.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(x.to===x.from)throw new SyntaxError('Illegal to define conversion from "'+x.from+'" to itself.')}return h.addConversion=function(x){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};xn(x);const R=f(x.to),Z=R.conversionsTo.find(X=>X.from===x.from);if(Z)if(B&&B.override)h.removeConversion({from:Z.from,to:x.to,convert:Z.convert});else throw new Error('There is already a conversion from "'+x.from+'" to "'+R.name+'"');R.conversionsTo.push({from:x.from,to:R.name,convert:x.convert,index:o++})},h.addConversions=function(x,B){x.forEach(R=>h.addConversion(R,B))},h.removeConversion=function(x){xn(x);const B=f(x.to),R=pe(B.conversionsTo,X=>X.from===x.from);if(!R)throw new Error("Attempt to remove nonexistent conversion from "+x.from+" to "+x.to);if(R.convert!==x.convert)throw new Error("Conversion to remove does not match existing conversion");const Z=B.conversionsTo.indexOf(R);B.conversionsTo.splice(Z,1)},h.resolve=function(x,B){if(!m(x))throw new TypeError(Au);const R=x._typedFunctionData.signatures;for(let Z=0;Z<R.length;++Z)if(R[Z].test(B))return R[Z];return null},h}const ms=Gh();function Bt(t,e,n,r){function s(o){var h=wm(o,e.map(Cm));return Mm(t,e,o),n(h)}return s.isFactory=!0,s.fn=t,s.dependencies=e.slice().sort(),r&&(s.meta=r),s}function Mm(t,e,n){var r=e.filter(o=>!Am(o)).every(o=>n[o]!==void 0);if(!r){var s=e.filter(o=>n[o]===void 0);throw new Error('Cannot create function "'.concat(t,'", ')+"some dependencies are missing: ".concat(s.map(o=>'"'.concat(o,'"')).join(", "),"."))}}function Am(t){return t&&t[0]==="?"}function Cm(t){return t&&t[0]==="?"?t.slice(1):t}function fe(t){return typeof t=="boolean"?!0:Number.isFinite(t)?t===Math.round(t):!1}function ya(t,e,n){var r={2:"0b",8:"0o",16:"0x"},s=r[e],o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!fe(n))throw new Error("size must be an integer");if(t>2**(n-1)-1||t<-(2**(n-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!fe(t))throw new Error("Value must be an integer");t<0&&(t=t+2**n),o="i".concat(n)}var h="";return t<0&&(t=-t,h="-"),"".concat(h).concat(s).concat(t.toString(e)).concat(o)}function Ta(t,e){if(typeof e=="function")return e(t);if(t===1/0)return"Infinity";if(t===-1/0)return"-Infinity";if(isNaN(t))return"NaN";var{notation:n,precision:r,wordSize:s}=zh(e);switch(n){case"fixed":return xm(t,r);case"exponential":return Rh(t,r);case"engineering":return bm(t,r);case"bin":return ya(t,2,s);case"oct":return ya(t,8,s);case"hex":return ya(t,16,s);case"auto":return Sm(t,r,e).replace(/((\.\d*?)(0+))($|e)/,function(){var o=arguments[2],h=arguments[4];return o!=="."?o+h:h});default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function zh(t){var e="auto",n,r;if(t!==void 0)if(Rt(t))n=t;else if(ae(t))n=t.toNumber();else if(Qa(t))t.precision!==void 0&&(n=Cu(t.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),t.wordSize!==void 0&&(r=Cu(t.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),t.notation&&(e=t.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:n,wordSize:r}}function Ms(t){var e=String(t).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+t);var n=e[1],r=e[2],s=parseFloat(e[4]||"0"),o=r.indexOf(".");s+=o!==-1?o-1:r.length-1;var h=r.replace(".","").replace(/^0*/,function(f){return s-=f.length,""}).replace(/0*$/,"").split("").map(function(f){return parseInt(f)});return h.length===0&&(h.push(0),s++),{sign:n,coefficients:h,exponent:s}}function bm(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=Ms(t),r=As(n,e),s=r.exponent,o=r.coefficients,h=s%3===0?s:s<0?s-3-s%3:s-s%3;if(Rt(e))for(;e>o.length||s-h+1>o.length;)o.push(0);else for(var f=Math.abs(s-h)-(o.length-1),l=0;l<f;l++)o.push(0);for(var d=Math.abs(s-h),v=1;d>0;)v++,d--;var _=o.slice(v).join(""),m=Rt(e)&&_.length||_.match(/[1-9]/)?"."+_:"",y=o.slice(0,v).join("")+m+"e"+(s>=0?"+":"")+h.toString();return r.sign+y}function xm(t,e){if(isNaN(t)||!Number.isFinite(t))return String(t);var n=Ms(t),r=typeof e=="number"?As(n,n.exponent+1+e):n,s=r.coefficients,o=r.exponent+1,h=o+(e||0);return s.length<h&&(s=s.concat(yn(h-s.length))),o<0&&(s=yn(-o+1).concat(s),o=1),o<s.length&&s.splice(o,0,o===0?"0.":"."),r.sign+s.join("")}function Rh(t,e){if(isNaN(t)||!Number.isFinite(Number(t)))return String(t);var n=Ms(t),r=e?As(n,e):n,s=r.coefficients,o=r.exponent;s.length<e&&(s=s.concat(yn(e-s.length)));var h=s.shift();return r.sign+h+(s.length>0?"."+s.join(""):"")+"e"+(o>=0?"+":"")+o}function Sm(t,e,n){if(isNaN(t)||!Number.isFinite(t))return String(t);var r=bu(n?.lowerExp,-3),s=bu(n?.upperExp,5),o=Ms(t),h=e?As(o,e):o;if(h.exponent<r||h.exponent>=s)return Rh(t,e);var f=h.coefficients,l=h.exponent;f.length<e&&(f=f.concat(yn(e-f.length))),f=f.concat(yn(l-f.length+1+(f.length<e?e-f.length:0))),f=yn(-l).concat(f);var d=l>0?l:0;return d<f.length-1&&f.splice(d+1,0,"."),h.sign+f.join("")}function As(t,e){for(var n={sign:t.sign,coefficients:t.coefficients,exponent:t.exponent},r=n.coefficients;e<=0;)r.unshift(0),n.exponent++,e++;if(r.length>e){var s=r.splice(e,r.length-e);if(s[0]>=5){var o=e-1;for(r[o]++;r[o]===10;)r.pop(),o===0&&(r.unshift(0),n.exponent++,o++),o--,r[o]++}}return n}function yn(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function Pm(t){return t.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function vs(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(t)||isNaN(e)?!1:!Number.isFinite(t)||!Number.isFinite(e)?t===e:t===e?!0:Math.abs(t-e)<=Math.max(n*Math.max(Math.abs(t),Math.abs(e)),r)}function Cu(t,e){if(Rt(t))return t;if(ae(t))return t.toNumber();e()}function bu(t,e){return Rt(t)?t:ae(t)?t.toNumber():e}var kh=function(){return kh=ms.create,ms},Fm=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],Nm=Bt("typed",Fm,function(e){var{BigNumber:n,Complex:r,DenseMatrix:s,Fraction:o}=e,h=kh();return h.clear(),h.addTypes([{name:"number",test:Rt},{name:"Complex",test:Lh},{name:"BigNumber",test:ae},{name:"bigint",test:U_},{name:"Fraction",test:Ih},{name:"Unit",test:Oh},{name:"identifier",test:f=>ri&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088F\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5C\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDC-\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C8A\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7DC\uA7F1-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDDC0-\uDDF3\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD40-\uDD59\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDD4A-\uDD65\uDD6F-\uDD85\uDE80-\uDEA9\uDEB0\uDEB1\uDEC2-\uDEC7\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61\uDF80-\uDF89\uDF8B\uDF8E\uDF90-\uDFB5\uDFB7\uDFD1\uDFD3]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8\uDFC0-\uDFE0]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDB0-\uDDDB\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD80E\uD80F\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46\uDC60-\uDFFF]|\uD810[\uDC00-\uDFFA]|\uD811[\uDC00-\uDE46]|\uD818[\uDD00-\uDD1D]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDD40-\uDD6C\uDE40-\uDE7F\uDEA0-\uDEB8\uDEBB-\uDED3\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3\uDFF2\uDFF3]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDDD0-\uDDED\uDDF0\uDEC0-\uDEDE\uDEE0-\uDEE2\uDEE4\uDEE5\uDEE7-\uDEED\uDEF0-\uDEF4\uDEFE\uDEFF\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79])*$/.test(f)},{name:"string",test:ri},{name:"Chain",test:gm},{name:"Array",test:ue},{name:"Matrix",test:oe},{name:"DenseMatrix",test:W_},{name:"SparseMatrix",test:$_},{name:"Range",test:H_},{name:"Index",test:Ya},{name:"boolean",test:j_},{name:"ResultSet",test:V_},{name:"Help",test:X_},{name:"function",test:K_},{name:"Date",test:J_},{name:"RegExp",test:Y_},{name:"null",test:tm},{name:"undefined",test:em},{name:"AccessorNode",test:im},{name:"ArrayNode",test:nm},{name:"AssignmentNode",test:rm},{name:"BlockNode",test:sm},{name:"ConditionalNode",test:am},{name:"ConstantNode",test:om},{name:"FunctionNode",test:hm},{name:"FunctionAssignmentNode",test:um},{name:"IndexNode",test:fm},{name:"Node",test:lm},{name:"ObjectNode",test:cm},{name:"OperatorNode",test:dm},{name:"ParenthesisNode",test:_m},{name:"RangeNode",test:mm},{name:"RelationalNode",test:vm},{name:"SymbolNode",test:pm},{name:"Map",test:Q_},{name:"Object",test:Qa}]),h.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(n||$r(l),Pm(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new n(l)}},{from:"number",to:"Complex",convert:function(l){return r||Hr(l),new r(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return r||Hr(l),new r(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return n||$r(l),new n(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return o||jr(l),new o(l)}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return r||Hr(l),new r(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){o||jr(l);var d=new o(l);if(d.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return d}},{from:"string",to:"number",convert:function(l){var d=Number(l);if(isNaN(d))throw new Error('Cannot convert "'+l+'" to a number');return d}},{from:"string",to:"BigNumber",convert:function(l){n||$r(l);try{return new n(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){o||jr(l);try{return new o(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){r||Hr(l);try{return new r(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return n||$r(l),new n(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return o||jr(l),new o(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return s||Tm(),new s(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),h.onMismatch=(f,l,d)=>{var v=h.createError(f,l,d);if(["wrongType","mismatch"].includes(v.data.category)&&l.length===1&&ds(l[0])&&d.some(m=>!m.params.includes(","))){var _=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw _.data=v.data,_}throw v},h.onMismatch=(f,l,d)=>{var v=h.createError(f,l,d);if(["wrongType","mismatch"].includes(v.data.category)&&l.length===1&&ds(l[0])&&d.some(m=>!m.params.includes(","))){var _=new TypeError("Function '".concat(f,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(f,")'."));throw _.data=v.data,_}throw v},h});function $r(t){throw new Error("Cannot convert value ".concat(t," into a BigNumber: no class 'BigNumber' provided"))}function Hr(t){throw new Error("Cannot convert value ".concat(t," into a Complex number: no class 'Complex' provided"))}function Tm(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function jr(t){throw new Error("Cannot convert value ".concat(t," into a Fraction, no class 'Fraction' provided."))}var mn=9e15,Bi=1e9,Ba="0123456789abcdef",ps="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",gs="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",La={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-mn,maxE:mn,crypto:!1},Zh,mi,Dt=!0,Cs="[DecimalError] ",Fi=Cs+"Invalid argument: ",qh=Cs+"Precision limit exceeded",Uh=Cs+"crypto unavailable",Wh="[object Decimal]",Ee=Math.floor,he=Math.pow,Bm=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Lm=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Im=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,$h=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Qe=1e7,pt=7,Om=9007199254740991,Gm=ps.length-1,Ia=gs.length-1,$={toStringTag:Wh};$.absoluteValue=$.abs=function(){var t=new this.constructor(this);return t.s<0&&(t.s=1),dt(t)};$.ceil=function(){return dt(new this.constructor(this),this.e+1,2)};$.clampedTo=$.clamp=function(t,e){var n,r=this,s=r.constructor;if(t=new s(t),e=new s(e),!t.s||!e.s)return new s(NaN);if(t.gt(e))throw Error(Fi+e);return n=r.cmp(t),n<0?t:r.cmp(e)>0?e:new s(r)};$.comparedTo=$.cmp=function(t){var e,n,r,s,o=this,h=o.d,f=(t=new o.constructor(t)).d,l=o.s,d=t.s;if(!h||!f)return!l||!d?NaN:l!==d?l:h===f?0:!h^l<0?1:-1;if(!h[0]||!f[0])return h[0]?l:f[0]?-d:0;if(l!==d)return l;if(o.e!==t.e)return o.e>t.e^l<0?1:-1;for(r=h.length,s=f.length,e=0,n=r<s?r:s;e<n;++e)if(h[e]!==f[e])return h[e]>f[e]^l<0?1:-1;return r===s?0:r>s^l<0?1:-1};$.cosine=$.cos=function(){var t,e,n=this,r=n.constructor;return n.d?n.d[0]?(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+pt,r.rounding=1,n=zm(r,Kh(r,n)),r.precision=t,r.rounding=e,dt(mi==2||mi==3?n.neg():n,t,e,!0)):new r(1):new r(NaN)};$.cubeRoot=$.cbrt=function(){var t,e,n,r,s,o,h,f,l,d,v=this,_=v.constructor;if(!v.isFinite()||v.isZero())return new _(v);for(Dt=!1,o=v.s*he(v.s*v,1/3),!o||Math.abs(o)==1/0?(n=ve(v.d),t=v.e,(o=(t-n.length+1)%3)&&(n+=o==1||o==-2?"0":"00"),o=he(n,1/3),t=Ee((t+1)/3)-(t%3==(t<0?-1:2)),o==1/0?n="5e"+t:(n=o.toExponential(),n=n.slice(0,n.indexOf("e")+1)+t),r=new _(n),r.s=v.s):r=new _(o.toString()),h=(t=_.precision)+3;;)if(f=r,l=f.times(f).times(f),d=l.plus(v),r=kt(d.plus(v).times(f),d.plus(l),h+2,1),ve(f.d).slice(0,h)===(n=ve(r.d)).slice(0,h))if(n=n.slice(h-3,h+1),n=="9999"||!s&&n=="4999"){if(!s&&(dt(f,t+1,0),f.times(f).times(f).eq(v))){r=f;break}h+=4,s=1}else{(!+n||!+n.slice(1)&&n.charAt(0)=="5")&&(dt(r,t+1,1),e=!r.times(r).times(r).eq(v));break}return Dt=!0,dt(r,t,_.rounding,e)};$.decimalPlaces=$.dp=function(){var t,e=this.d,n=NaN;if(e){if(t=e.length-1,n=(t-Ee(this.e/pt))*pt,t=e[t],t)for(;t%10==0;t/=10)n--;n<0&&(n=0)}return n};$.dividedBy=$.div=function(t){return kt(this,new this.constructor(t))};$.dividedToIntegerBy=$.divToInt=function(t){var e=this,n=e.constructor;return dt(kt(e,new n(t),0,1,1),n.precision,n.rounding)};$.equals=$.eq=function(t){return this.cmp(t)===0};$.floor=function(){return dt(new this.constructor(this),this.e+1,3)};$.greaterThan=$.gt=function(t){return this.cmp(t)>0};$.greaterThanOrEqualTo=$.gte=function(t){var e=this.cmp(t);return e==1||e===0};$.hyperbolicCosine=$.cosh=function(){var t,e,n,r,s,o=this,h=o.constructor,f=new h(1);if(!o.isFinite())return new h(o.s?1/0:NaN);if(o.isZero())return f;n=h.precision,r=h.rounding,h.precision=n+Math.max(o.e,o.sd())+4,h.rounding=1,s=o.d.length,s<32?(t=Math.ceil(s/3),e=(1/xs(4,t)).toString()):(t=16,e="2.3283064365386962890625e-10"),o=En(h,1,o.times(e),new h(1),!0);for(var l,d=t,v=new h(8);d--;)l=o.times(o),o=f.minus(l.times(v.minus(l.times(v))));return dt(o,h.precision=n,h.rounding=r,!0)};$.hyperbolicSine=$.sinh=function(){var t,e,n,r,s=this,o=s.constructor;if(!s.isFinite()||s.isZero())return new o(s);if(e=o.precision,n=o.rounding,o.precision=e+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<3)s=En(o,2,s,s,!0);else{t=1.4*Math.sqrt(r),t=t>16?16:t|0,s=s.times(1/xs(5,t)),s=En(o,2,s,s,!0);for(var h,f=new o(5),l=new o(16),d=new o(20);t--;)h=s.times(s),s=s.times(f.plus(h.times(l.times(h).plus(d))))}return o.precision=e,o.rounding=n,dt(s,e,n,!0)};$.hyperbolicTangent=$.tanh=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+7,r.rounding=1,kt(n.sinh(),n.cosh(),r.precision=t,r.rounding=e)):new r(n.s)};$.inverseCosine=$.acos=function(){var t=this,e=t.constructor,n=t.abs().cmp(1),r=e.precision,s=e.rounding;return n!==-1?n===0?t.isNeg()?si(e,r,s):new e(0):new e(NaN):t.isZero()?si(e,r+4,s).times(.5):(e.precision=r+6,e.rounding=1,t=new e(1).minus(t).div(t.plus(1)).sqrt().atan(),e.precision=r,e.rounding=s,t.times(2))};$.inverseHyperbolicCosine=$.acosh=function(){var t,e,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(t=r.precision,e=r.rounding,r.precision=t+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,Dt=!1,n=n.times(n).minus(1).sqrt().plus(n),Dt=!0,r.precision=t,r.rounding=e,n.ln()):new r(n)};$.inverseHyperbolicSine=$.asinh=function(){var t,e,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,Dt=!1,n=n.times(n).plus(1).sqrt().plus(n),Dt=!0,r.precision=t,r.rounding=e,n.ln())};$.inverseHyperbolicTangent=$.atanh=function(){var t,e,n,r,s=this,o=s.constructor;return s.isFinite()?s.e>=0?new o(s.abs().eq(1)?s.s/0:s.isZero()?s:NaN):(t=o.precision,e=o.rounding,r=s.sd(),Math.max(r,t)<2*-s.e-1?dt(new o(s),t,e,!0):(o.precision=n=r-s.e,s=kt(s.plus(1),new o(1).minus(s),n+t,1),o.precision=t+4,o.rounding=1,s=s.ln(),o.precision=t,o.rounding=e,s.times(.5))):new o(NaN)};$.inverseSine=$.asin=function(){var t,e,n,r,s=this,o=s.constructor;return s.isZero()?new o(s):(e=s.abs().cmp(1),n=o.precision,r=o.rounding,e!==-1?e===0?(t=si(o,n+4,r).times(.5),t.s=s.s,t):new o(NaN):(o.precision=n+6,o.rounding=1,s=s.div(new o(1).minus(s.times(s)).sqrt().plus(1)).atan(),o.precision=n,o.rounding=r,s.times(2)))};$.inverseTangent=$.atan=function(){var t,e,n,r,s,o,h,f,l,d=this,v=d.constructor,_=v.precision,m=v.rounding;if(d.isFinite()){if(d.isZero())return new v(d);if(d.abs().eq(1)&&_+4<=Ia)return h=si(v,_+4,m).times(.25),h.s=d.s,h}else{if(!d.s)return new v(NaN);if(_+4<=Ia)return h=si(v,_+4,m).times(.5),h.s=d.s,h}for(v.precision=f=_+10,v.rounding=1,n=Math.min(28,f/pt+2|0),t=n;t;--t)d=d.div(d.times(d).plus(1).sqrt().plus(1));for(Dt=!1,e=Math.ceil(f/pt),r=1,l=d.times(d),h=new v(d),s=d;t!==-1;)if(s=s.times(l),o=h.minus(s.div(r+=2)),s=s.times(l),h=o.plus(s.div(r+=2)),h.d[e]!==void 0)for(t=e;h.d[t]===o.d[t]&&t--;);return n&&(h=h.times(2<<n-1)),Dt=!0,dt(h,v.precision=_,v.rounding=m,!0)};$.isFinite=function(){return!!this.d};$.isInteger=$.isInt=function(){return!!this.d&&Ee(this.e/pt)>this.d.length-2};$.isNaN=function(){return!this.s};$.isNegative=$.isNeg=function(){return this.s<0};$.isPositive=$.isPos=function(){return this.s>0};$.isZero=function(){return!!this.d&&this.d[0]===0};$.lessThan=$.lt=function(t){return this.cmp(t)<0};$.lessThanOrEqualTo=$.lte=function(t){return this.cmp(t)<1};$.logarithm=$.log=function(t){var e,n,r,s,o,h,f,l,d=this,v=d.constructor,_=v.precision,m=v.rounding,y=5;if(t==null)t=new v(10),e=!0;else{if(t=new v(t),n=t.d,t.s<0||!n||!n[0]||t.eq(1))return new v(NaN);e=t.eq(10)}if(n=d.d,d.s<0||!n||!n[0]||d.eq(1))return new v(n&&!n[0]?-1/0:d.s!=1?NaN:n?0:1/0);if(e)if(n.length>1)o=!0;else{for(s=n[0];s%10===0;)s/=10;o=s!==1}if(Dt=!1,f=_+y,h=Ci(d,f),r=e?ys(v,f+10):Ci(t,f),l=kt(h,r,f,1),ur(l.d,s=_,m))do if(f+=10,h=Ci(d,f),r=e?ys(v,f+10):Ci(t,f),l=kt(h,r,f,1),!o){+ve(l.d).slice(s+1,s+15)+1==1e14&&(l=dt(l,_+1,0));break}while(ur(l.d,s+=10,m));return Dt=!0,dt(l,_,m)};$.minus=$.sub=function(t){var e,n,r,s,o,h,f,l,d,v,_,m,y=this,E=y.constructor;if(t=new E(t),!y.d||!t.d)return!y.s||!t.s?t=new E(NaN):y.d?t.s=-t.s:t=new E(t.d||y.s!==t.s?y:NaN),t;if(y.s!=t.s)return t.s=-t.s,y.plus(t);if(d=y.d,m=t.d,f=E.precision,l=E.rounding,!d[0]||!m[0]){if(m[0])t.s=-t.s;else if(d[0])t=new E(y);else return new E(l===3?-0:0);return Dt?dt(t,f,l):t}if(n=Ee(t.e/pt),v=Ee(y.e/pt),d=d.slice(),o=v-n,o){for(_=o<0,_?(e=d,o=-o,h=m.length):(e=m,n=v,h=d.length),r=Math.max(Math.ceil(f/pt),h)+2,o>r&&(o=r,e.length=1),e.reverse(),r=o;r--;)e.push(0);e.reverse()}else{for(r=d.length,h=m.length,_=r<h,_&&(h=r),r=0;r<h;r++)if(d[r]!=m[r]){_=d[r]<m[r];break}o=0}for(_&&(e=d,d=m,m=e,t.s=-t.s),h=d.length,r=m.length-h;r>0;--r)d[h++]=0;for(r=m.length;r>o;){if(d[--r]<m[r]){for(s=r;s&&d[--s]===0;)d[s]=Qe-1;--d[s],d[r]+=Qe}d[r]-=m[r]}for(;d[--h]===0;)d.pop();for(;d[0]===0;d.shift())--n;return d[0]?(t.d=d,t.e=bs(d,n),Dt?dt(t,f,l):t):new E(l===3?-0:0)};$.modulo=$.mod=function(t){var e,n=this,r=n.constructor;return t=new r(t),!n.d||!t.s||t.d&&!t.d[0]?new r(NaN):!t.d||n.d&&!n.d[0]?dt(new r(n),r.precision,r.rounding):(Dt=!1,r.modulo==9?(e=kt(n,t.abs(),0,3,1),e.s*=t.s):e=kt(n,t,0,r.modulo,1),e=e.times(t),Dt=!0,n.minus(e))};$.naturalExponential=$.exp=function(){return Oa(this)};$.naturalLogarithm=$.ln=function(){return Ci(this)};$.negated=$.neg=function(){var t=new this.constructor(this);return t.s=-t.s,dt(t)};$.plus=$.add=function(t){var e,n,r,s,o,h,f,l,d,v,_=this,m=_.constructor;if(t=new m(t),!_.d||!t.d)return!_.s||!t.s?t=new m(NaN):_.d||(t=new m(t.d||_.s===t.s?_:NaN)),t;if(_.s!=t.s)return t.s=-t.s,_.minus(t);if(d=_.d,v=t.d,f=m.precision,l=m.rounding,!d[0]||!v[0])return v[0]||(t=new m(_)),Dt?dt(t,f,l):t;if(o=Ee(_.e/pt),r=Ee(t.e/pt),d=d.slice(),s=o-r,s){for(s<0?(n=d,s=-s,h=v.length):(n=v,r=o,h=d.length),o=Math.ceil(f/pt),h=o>h?o+1:h+1,s>h&&(s=h,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(h=d.length,s=v.length,h-s<0&&(s=h,n=v,v=d,d=n),e=0;s;)e=(d[--s]=d[s]+v[s]+e)/Qe|0,d[s]%=Qe;for(e&&(d.unshift(e),++r),h=d.length;d[--h]==0;)d.pop();return t.d=d,t.e=bs(d,r),Dt?dt(t,f,l):t};$.precision=$.sd=function(t){var e,n=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(Fi+t);return n.d?(e=Hh(n.d),t&&n.e+1>e&&(e=n.e+1)):e=NaN,e};$.round=function(){var t=this,e=t.constructor;return dt(new e(t),t.e+1,e.rounding)};$.sine=$.sin=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+Math.max(n.e,n.sd())+pt,r.rounding=1,n=km(r,Kh(r,n)),r.precision=t,r.rounding=e,dt(mi>2?n.neg():n,t,e,!0)):new r(NaN)};$.squareRoot=$.sqrt=function(){var t,e,n,r,s,o,h=this,f=h.d,l=h.e,d=h.s,v=h.constructor;if(d!==1||!f||!f[0])return new v(!d||d<0&&(!f||f[0])?NaN:f?h:1/0);for(Dt=!1,d=Math.sqrt(+h),d==0||d==1/0?(e=ve(f),(e.length+l)%2==0&&(e+="0"),d=Math.sqrt(e),l=Ee((l+1)/2)-(l<0||l%2),d==1/0?e="5e"+l:(e=d.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),r=new v(e)):r=new v(d.toString()),n=(l=v.precision)+3;;)if(o=r,r=o.plus(kt(h,o,n+2,1)).times(.5),ve(o.d).slice(0,n)===(e=ve(r.d)).slice(0,n))if(e=e.slice(n-3,n+1),e=="9999"||!s&&e=="4999"){if(!s&&(dt(o,l+1,0),o.times(o).eq(h))){r=o;break}n+=4,s=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(dt(r,l+1,1),t=!r.times(r).eq(h));break}return Dt=!0,dt(r,l,v.rounding,t)};$.tangent=$.tan=function(){var t,e,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(t=r.precision,e=r.rounding,r.precision=t+10,r.rounding=1,n=n.sin(),n.s=1,n=kt(n,new r(1).minus(n.times(n)).sqrt(),t+10,0),r.precision=t,r.rounding=e,dt(mi==2||mi==4?n.neg():n,t,e,!0)):new r(NaN)};$.times=$.mul=function(t){var e,n,r,s,o,h,f,l,d,v=this,_=v.constructor,m=v.d,y=(t=new _(t)).d;if(t.s*=v.s,!m||!m[0]||!y||!y[0])return new _(!t.s||m&&!m[0]&&!y||y&&!y[0]&&!m?NaN:!m||!y?t.s/0:t.s*0);for(n=Ee(v.e/pt)+Ee(t.e/pt),l=m.length,d=y.length,l<d&&(o=m,m=y,y=o,h=l,l=d,d=h),o=[],h=l+d,r=h;r--;)o.push(0);for(r=d;--r>=0;){for(e=0,s=l+r;s>r;)f=o[s]+y[r]*m[s-r-1]+e,o[s--]=f%Qe|0,e=f/Qe|0;o[s]=(o[s]+e)%Qe|0}for(;!o[--h];)o.pop();return e?++n:o.shift(),t.d=o,t.e=bs(o,n),Dt?dt(t,_.precision,_.rounding):t};$.toBinary=function(t,e){return to(this,2,t,e)};$.toDecimalPlaces=$.toDP=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(Le(t,0,Bi),e===void 0?e=r.rounding:Le(e,0,8),dt(n,t+n.e+1,e))};$.toExponential=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=oi(r,!0):(Le(t,0,Bi),e===void 0?e=s.rounding:Le(e,0,8),r=dt(new s(r),t+1,e),n=oi(r,!0,t+1)),r.isNeg()&&!r.isZero()?"-"+n:n};$.toFixed=function(t,e){var n,r,s=this,o=s.constructor;return t===void 0?n=oi(s):(Le(t,0,Bi),e===void 0?e=o.rounding:Le(e,0,8),r=dt(new o(s),t+s.e+1,e),n=oi(r,!1,t+r.e+1)),s.isNeg()&&!s.isZero()?"-"+n:n};$.toFraction=function(t){var e,n,r,s,o,h,f,l,d,v,_,m,y=this,E=y.d,g=y.constructor;if(!E)return new g(y);if(d=n=new g(1),r=l=new g(0),e=new g(r),o=e.e=Hh(E)-y.e-1,h=o%pt,e.d[0]=he(10,h<0?pt+h:h),t==null)t=o>0?e:d;else{if(f=new g(t),!f.isInt()||f.lt(d))throw Error(Fi+f);t=f.gt(e)?o>0?e:d:f}for(Dt=!1,f=new g(ve(E)),v=g.precision,g.precision=o=E.length*pt*2;_=kt(f,e,0,1,1),s=n.plus(_.times(r)),s.cmp(t)!=1;)n=r,r=s,s=d,d=l.plus(_.times(s)),l=s,s=e,e=f.minus(_.times(s)),f=s;return s=kt(t.minus(n),r,0,1,1),l=l.plus(s.times(d)),n=n.plus(s.times(r)),l.s=d.s=y.s,m=kt(d,r,o,1).minus(y).abs().cmp(kt(l,n,o,1).minus(y).abs())<1?[d,r]:[l,n],g.precision=v,Dt=!0,m};$.toHexadecimal=$.toHex=function(t,e){return to(this,16,t,e)};$.toNearest=function(t,e){var n=this,r=n.constructor;if(n=new r(n),t==null){if(!n.d)return n;t=new r(1),e=r.rounding}else{if(t=new r(t),e===void 0?e=r.rounding:Le(e,0,8),!n.d)return t.s?n:t;if(!t.d)return t.s&&(t.s=n.s),t}return t.d[0]?(Dt=!1,n=kt(n,t,0,e,1).times(t),Dt=!0,dt(n)):(t.s=n.s,n=t),n};$.toNumber=function(){return+this};$.toOctal=function(t,e){return to(this,8,t,e)};$.toPower=$.pow=function(t){var e,n,r,s,o,h,f=this,l=f.constructor,d=+(t=new l(t));if(!f.d||!t.d||!f.d[0]||!t.d[0])return new l(he(+f,d));if(f=new l(f),f.eq(1))return f;if(r=l.precision,o=l.rounding,t.eq(1))return dt(f,r,o);if(e=Ee(t.e/pt),e>=t.d.length-1&&(n=d<0?-d:d)<=Om)return s=jh(l,f,n,r),t.s<0?new l(1).div(s):dt(s,r,o);if(h=f.s,h<0){if(e<t.d.length-1)return new l(NaN);if((t.d[e]&1)==0&&(h=1),f.e==0&&f.d[0]==1&&f.d.length==1)return f.s=h,f}return n=he(+f,d),e=n==0||!isFinite(n)?Ee(d*(Math.log("0."+ve(f.d))/Math.LN10+f.e+1)):new l(n+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?h/0:0):(Dt=!1,l.rounding=f.s=1,n=Math.min(12,(e+"").length),s=Oa(t.times(Ci(f,r+n)),r),s.d&&(s=dt(s,r+5,1),ur(s.d,r,o)&&(e=r+10,s=dt(Oa(t.times(Ci(f,e+n)),e),e+5,1),+ve(s.d).slice(r+1,r+15)+1==1e14&&(s=dt(s,r+1,0)))),s.s=h,Dt=!0,l.rounding=o,dt(s,r,o))};$.toPrecision=function(t,e){var n,r=this,s=r.constructor;return t===void 0?n=oi(r,r.e<=s.toExpNeg||r.e>=s.toExpPos):(Le(t,1,Bi),e===void 0?e=s.rounding:Le(e,0,8),r=dt(new s(r),t,e),n=oi(r,t<=r.e||r.e<=s.toExpNeg,t)),r.isNeg()&&!r.isZero()?"-"+n:n};$.toSignificantDigits=$.toSD=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(Le(t,1,Bi),e===void 0?e=r.rounding:Le(e,0,8)),dt(new r(n),t,e)};$.toString=function(){var t=this,e=t.constructor,n=oi(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()&&!t.isZero()?"-"+n:n};$.truncated=$.trunc=function(){return dt(new this.constructor(this),this.e+1,1)};$.valueOf=$.toJSON=function(){var t=this,e=t.constructor,n=oi(t,t.e<=e.toExpNeg||t.e>=e.toExpPos);return t.isNeg()?"-"+n:n};function ve(t){var e,n,r,s=t.length-1,o="",h=t[0];if(s>0){for(o+=h,e=1;e<s;e++)r=t[e]+"",n=pt-r.length,n&&(o+=Mi(n)),o+=r;h=t[e],r=h+"",n=pt-r.length,n&&(o+=Mi(n))}else if(h===0)return"0";for(;h%10===0;)h/=10;return o+h}function Le(t,e,n){if(t!==~~t||t<e||t>n)throw Error(Fi+t)}function ur(t,e,n,r){var s,o,h,f;for(o=t[0];o>=10;o/=10)--e;return--e<0?(e+=pt,s=0):(s=Math.ceil((e+1)/pt),e%=pt),o=he(10,pt-e),f=t[s]%o|0,r==null?e<3?(e==0?f=f/100|0:e==1&&(f=f/10|0),h=n<4&&f==99999||n>3&&f==49999||f==5e4||f==0):h=(n<4&&f+1==o||n>3&&f+1==o/2)&&(t[s+1]/o/100|0)==he(10,e-2)-1||(f==o/2||f==0)&&(t[s+1]/o/100|0)==0:e<4?(e==0?f=f/1e3|0:e==1?f=f/100|0:e==2&&(f=f/10|0),h=(r||n<4)&&f==9999||!r&&n>3&&f==4999):h=((r||n<4)&&f+1==o||!r&&n>3&&f+1==o/2)&&(t[s+1]/o/1e3|0)==he(10,e-3)-1,h}function Qr(t,e,n){for(var r,s=[0],o,h=0,f=t.length;h<f;){for(o=s.length;o--;)s[o]*=e;for(s[0]+=Ba.indexOf(t.charAt(h++)),r=0;r<s.length;r++)s[r]>n-1&&(s[r+1]===void 0&&(s[r+1]=0),s[r+1]+=s[r]/n|0,s[r]%=n)}return s.reverse()}function zm(t,e){var n,r,s;if(e.isZero())return e;r=e.d.length,r<32?(n=Math.ceil(r/3),s=(1/xs(4,n)).toString()):(n=16,s="2.3283064365386962890625e-10"),t.precision+=n,e=En(t,1,e.times(s),new t(1));for(var o=n;o--;){var h=e.times(e);e=h.times(h).minus(h).times(8).plus(1)}return t.precision-=n,e}var kt=(function(){function t(r,s,o){var h,f=0,l=r.length;for(r=r.slice();l--;)h=r[l]*s+f,r[l]=h%o|0,f=h/o|0;return f&&r.unshift(f),r}function e(r,s,o,h){var f,l;if(o!=h)l=o>h?1:-1;else for(f=l=0;f<o;f++)if(r[f]!=s[f]){l=r[f]>s[f]?1:-1;break}return l}function n(r,s,o,h){for(var f=0;o--;)r[o]-=f,f=r[o]<s[o]?1:0,r[o]=f*h+r[o]-s[o];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,o,h,f,l){var d,v,_,m,y,E,g,D,b,S,M,F,C,A,T,N,I,q,k,W,at=r.constructor,ot=r.s==s.s?1:-1,ut=r.d,K=s.d;if(!ut||!ut[0]||!K||!K[0])return new at(!r.s||!s.s||(ut?K&&ut[0]==K[0]:!K)?NaN:ut&&ut[0]==0||!K?ot*0:ot/0);for(l?(y=1,v=r.e-s.e):(l=Qe,y=pt,v=Ee(r.e/y)-Ee(s.e/y)),k=K.length,I=ut.length,b=new at(ot),S=b.d=[],_=0;K[_]==(ut[_]||0);_++);if(K[_]>(ut[_]||0)&&v--,o==null?(A=o=at.precision,h=at.rounding):f?A=o+(r.e-s.e)+1:A=o,A<0)S.push(1),E=!0;else{if(A=A/y+2|0,_=0,k==1){for(m=0,K=K[0],A++;(_<I||m)&&A--;_++)T=m*l+(ut[_]||0),S[_]=T/K|0,m=T%K|0;E=m||_<I}else{for(m=l/(K[0]+1)|0,m>1&&(K=t(K,m,l),ut=t(ut,m,l),k=K.length,I=ut.length),N=k,M=ut.slice(0,k),F=M.length;F<k;)M[F++]=0;W=K.slice(),W.unshift(0),q=K[0],K[1]>=l/2&&++q;do m=0,d=e(K,M,k,F),d<0?(C=M[0],k!=F&&(C=C*l+(M[1]||0)),m=C/q|0,m>1?(m>=l&&(m=l-1),g=t(K,m,l),D=g.length,F=M.length,d=e(g,M,D,F),d==1&&(m--,n(g,k<D?W:K,D,l))):(m==0&&(d=m=1),g=K.slice()),D=g.length,D<F&&g.unshift(0),n(M,g,F,l),d==-1&&(F=M.length,d=e(K,M,k,F),d<1&&(m++,n(M,k<F?W:K,F,l))),F=M.length):d===0&&(m++,M=[0]),S[_++]=m,d&&M[0]?M[F++]=ut[N]||0:(M=[ut[N]],F=1);while((N++<I||M[0]!==void 0)&&A--);E=M[0]!==void 0}S[0]||S.shift()}if(y==1)b.e=v,Zh=E;else{for(_=1,m=S[0];m>=10;m/=10)_++;b.e=_+v*y-1,dt(b,f?o+b.e+1:o,h,E)}return b}})();function dt(t,e,n,r){var s,o,h,f,l,d,v,_,m,y=t.constructor;t:if(e!=null){if(_=t.d,!_)return t;for(s=1,f=_[0];f>=10;f/=10)s++;if(o=e-s,o<0)o+=pt,h=e,v=_[m=0],l=v/he(10,s-h-1)%10|0;else if(m=Math.ceil((o+1)/pt),f=_.length,m>=f)if(r){for(;f++<=m;)_.push(0);v=l=0,s=1,o%=pt,h=o-pt+1}else break t;else{for(v=f=_[m],s=1;f>=10;f/=10)s++;o%=pt,h=o-pt+s,l=h<0?0:v/he(10,s-h-1)%10|0}if(r=r||e<0||_[m+1]!==void 0||(h<0?v:v%he(10,s-h-1)),d=n<4?(l||r)&&(n==0||n==(t.s<0?3:2)):l>5||l==5&&(n==4||r||n==6&&(o>0?h>0?v/he(10,s-h):0:_[m-1])%10&1||n==(t.s<0?8:7)),e<1||!_[0])return _.length=0,d?(e-=t.e+1,_[0]=he(10,(pt-e%pt)%pt),t.e=-e||0):_[0]=t.e=0,t;if(o==0?(_.length=m,f=1,m--):(_.length=m+1,f=he(10,pt-o),_[m]=h>0?(v/he(10,s-h)%he(10,h)|0)*f:0),d)for(;;)if(m==0){for(o=1,h=_[0];h>=10;h/=10)o++;for(h=_[0]+=f,f=1;h>=10;h/=10)f++;o!=f&&(t.e++,_[0]==Qe&&(_[0]=1));break}else{if(_[m]+=f,_[m]!=Qe)break;_[m--]=0,f=1}for(o=_.length;_[--o]===0;)_.pop()}return Dt&&(t.e>y.maxE?(t.d=null,t.e=NaN):t.e<y.minE&&(t.e=0,t.d=[0])),t}function oi(t,e,n){if(!t.isFinite())return Xh(t);var r,s=t.e,o=ve(t.d),h=o.length;return e?(n&&(r=n-h)>0?o=o.charAt(0)+"."+o.slice(1)+Mi(r):h>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(t.e<0?"e":"e+")+t.e):s<0?(o="0."+Mi(-s-1)+o,n&&(r=n-h)>0&&(o+=Mi(r))):s>=h?(o+=Mi(s+1-h),n&&(r=n-s-1)>0&&(o=o+"."+Mi(r))):((r=s+1)<h&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-h)>0&&(s+1===h&&(o+="."),o+=Mi(r))),o}function bs(t,e){var n=t[0];for(e*=pt;n>=10;n/=10)e++;return e}function ys(t,e,n){if(e>Gm)throw Dt=!0,n&&(t.precision=n),Error(qh);return dt(new t(ps),e,1,!0)}function si(t,e,n){if(e>Ia)throw Error(qh);return dt(new t(gs),e,n,!0)}function Hh(t){var e=t.length-1,n=e*pt+1;if(e=t[e],e){for(;e%10==0;e/=10)n--;for(e=t[0];e>=10;e/=10)n++}return n}function Mi(t){for(var e="";t--;)e+="0";return e}function jh(t,e,n,r){var s,o=new t(1),h=Math.ceil(r/pt+4);for(Dt=!1;;){if(n%2&&(o=o.times(e),Su(o.d,h)&&(s=!0)),n=Ee(n/2),n===0){n=o.d.length-1,s&&o.d[n]===0&&++o.d[n];break}e=e.times(e),Su(e.d,h)}return Dt=!0,o}function xu(t){return t.d[t.d.length-1]&1}function Vh(t,e,n){for(var r,s,o=new t(e[0]),h=0;++h<e.length;){if(s=new t(e[h]),!s.s){o=s;break}r=o.cmp(s),(r===n||r===0&&o.s===n)&&(o=s)}return o}function Oa(t,e){var n,r,s,o,h,f,l,d=0,v=0,_=0,m=t.constructor,y=m.rounding,E=m.precision;if(!t.d||!t.d[0]||t.e>17)return new m(t.d?t.d[0]?t.s<0?0:1/0:1:t.s?t.s<0?0:t:NaN);for(e==null?(Dt=!1,l=E):l=e,f=new m(.03125);t.e>-2;)t=t.times(f),_+=5;for(r=Math.log(he(2,_))/Math.LN10*2+5|0,l+=r,n=o=h=new m(1),m.precision=l;;){if(o=dt(o.times(t),l,1),n=n.times(++v),f=h.plus(kt(o,n,l,1)),ve(f.d).slice(0,l)===ve(h.d).slice(0,l)){for(s=_;s--;)h=dt(h.times(h),l,1);if(e==null)if(d<3&&ur(h.d,l-r,y,d))m.precision=l+=10,n=o=f=new m(1),v=0,d++;else return dt(h,m.precision=E,y,Dt=!0);else return m.precision=E,h}h=f}}function Ci(t,e){var n,r,s,o,h,f,l,d,v,_,m,y=1,E=10,g=t,D=g.d,b=g.constructor,S=b.rounding,M=b.precision;if(g.s<0||!D||!D[0]||!g.e&&D[0]==1&&D.length==1)return new b(D&&!D[0]?-1/0:g.s!=1?NaN:D?0:g);if(e==null?(Dt=!1,v=M):v=e,b.precision=v+=E,n=ve(D),r=n.charAt(0),Math.abs(o=g.e)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)g=g.times(t),n=ve(g.d),r=n.charAt(0),y++;o=g.e,r>1?(g=new b("0."+n),o++):g=new b(r+"."+n.slice(1))}else return d=ys(b,v+2,M).times(o+""),g=Ci(new b(r+"."+n.slice(1)),v-E).plus(d),b.precision=M,e==null?dt(g,M,S,Dt=!0):g;for(_=g,l=h=g=kt(g.minus(1),g.plus(1),v,1),m=dt(g.times(g),v,1),s=3;;){if(h=dt(h.times(m),v,1),d=l.plus(kt(h,new b(s),v,1)),ve(d.d).slice(0,v)===ve(l.d).slice(0,v))if(l=l.times(2),o!==0&&(l=l.plus(ys(b,v+2,M).times(o+""))),l=kt(l,new b(y),v,1),e==null)if(ur(l.d,v-E,S,f))b.precision=v+=E,d=h=g=kt(_.minus(1),_.plus(1),v,1),m=dt(g.times(g),v,1),s=f=1;else return dt(l,b.precision=M,S,Dt=!0);else return b.precision=M,l;l=d,s+=2}}function Xh(t){return String(t.s*t.s/0)}function ts(t,e){var n,r,s;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;r++);for(s=e.length;e.charCodeAt(s-1)===48;--s);if(e=e.slice(r,s),e){if(s-=r,t.e=n=n-r-1,t.d=[],r=(n+1)%pt,n<0&&(r+=pt),r<s){for(r&&t.d.push(+e.slice(0,r)),s-=pt;r<s;)t.d.push(+e.slice(r,r+=pt));e=e.slice(r),r=pt-e.length}else r-=s;for(;r--;)e+="0";t.d.push(+e),Dt&&(t.e>t.constructor.maxE?(t.d=null,t.e=NaN):t.e<t.constructor.minE&&(t.e=0,t.d=[0]))}else t.e=0,t.d=[0];return t}function Rm(t,e){var n,r,s,o,h,f,l,d,v;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),$h.test(e))return ts(t,e)}else if(e==="Infinity"||e==="NaN")return+e||(t.s=NaN),t.e=NaN,t.d=null,t;if(Lm.test(e))n=16,e=e.toLowerCase();else if(Bm.test(e))n=2;else if(Im.test(e))n=8;else throw Error(Fi+e);for(o=e.search(/p/i),o>0?(l=+e.slice(o+1),e=e.substring(2,o)):e=e.slice(2),o=e.indexOf("."),h=o>=0,r=t.constructor,h&&(e=e.replace(".",""),f=e.length,o=f-o,s=jh(r,new r(n),o,o*2)),d=Qr(e,n,Qe),v=d.length-1,o=v;d[o]===0;--o)d.pop();return o<0?new r(t.s*0):(t.e=bs(d,v),t.d=d,Dt=!1,h&&(t=kt(t,s,f*4)),l&&(t=t.times(Math.abs(l)<54?he(2,l):Mn.pow(2,l))),Dt=!0,t)}function km(t,e){var n,r=e.d.length;if(r<3)return e.isZero()?e:En(t,2,e,e);n=1.4*Math.sqrt(r),n=n>16?16:n|0,e=e.times(1/xs(5,n)),e=En(t,2,e,e);for(var s,o=new t(5),h=new t(16),f=new t(20);n--;)s=e.times(e),e=e.times(o.plus(s.times(h.times(s).minus(f))));return e}function En(t,e,n,r,s){var o,h,f,l,d=t.precision,v=Math.ceil(d/pt);for(Dt=!1,l=n.times(n),f=new t(r);;){if(h=kt(f.times(l),new t(e++*e++),d,1),f=s?r.plus(h):r.minus(h),r=kt(h.times(l),new t(e++*e++),d,1),h=f.plus(r),h.d[v]!==void 0){for(o=v;h.d[o]===f.d[o]&&o--;);if(o==-1)break}o=f,f=r,r=h,h=o}return Dt=!0,h.d.length=v+1,h}function xs(t,e){for(var n=t;--e;)n*=t;return n}function Kh(t,e){var n,r=e.s<0,s=si(t,t.precision,1),o=s.times(.5);if(e=e.abs(),e.lte(o))return mi=r?4:1,e;if(n=e.divToInt(s),n.isZero())mi=r?3:2;else{if(e=e.minus(n.times(s)),e.lte(o))return mi=xu(n)?r?2:3:r?4:1,e;mi=xu(n)?r?1:4:r?3:2}return e.minus(s).abs()}function to(t,e,n,r){var s,o,h,f,l,d,v,_,m,y=t.constructor,E=n!==void 0;if(E?(Le(n,1,Bi),r===void 0?r=y.rounding:Le(r,0,8)):(n=y.precision,r=y.rounding),!t.isFinite())v=Xh(t);else{for(v=oi(t),h=v.indexOf("."),E?(s=2,e==16?n=n*4-3:e==8&&(n=n*3-2)):s=e,h>=0&&(v=v.replace(".",""),m=new y(1),m.e=v.length-h,m.d=Qr(oi(m),10,s),m.e=m.d.length),_=Qr(v,10,s),o=l=_.length;_[--l]==0;)_.pop();if(!_[0])v=E?"0p+0":"0";else{if(h<0?o--:(t=new y(t),t.d=_,t.e=o,t=kt(t,m,n,r,0,s),_=t.d,o=t.e,d=Zh),h=_[n],f=s/2,d=d||_[n+1]!==void 0,d=r<4?(h!==void 0||d)&&(r===0||r===(t.s<0?3:2)):h>f||h===f&&(r===4||d||r===6&&_[n-1]&1||r===(t.s<0?8:7)),_.length=n,d)for(;++_[--n]>s-1;)_[n]=0,n||(++o,_.unshift(1));for(l=_.length;!_[l-1];--l);for(h=0,v="";h<l;h++)v+=Ba.charAt(_[h]);if(E){if(l>1)if(e==16||e==8){for(h=e==16?4:3,--l;l%h;l++)v+="0";for(_=Qr(v,s,e),l=_.length;!_[l-1];--l);for(h=1,v="1.";h<l;h++)v+=Ba.charAt(_[h])}else v=v.charAt(0)+"."+v.slice(1);v=v+(o<0?"p":"p+")+o}else if(o<0){for(;++o;)v="0"+v;v="0."+v}else if(++o>l)for(o-=l;o--;)v+="0";else o<l&&(v=v.slice(0,o)+"."+v.slice(o))}v=(e==16?"0x":e==2?"0b":e==8?"0o":"")+v}return t.s<0?"-"+v:v}function Su(t,e){if(t.length>e)return t.length=e,!0}function Zm(t){return new this(t).abs()}function qm(t){return new this(t).acos()}function Um(t){return new this(t).acosh()}function Wm(t,e){return new this(t).plus(e)}function $m(t){return new this(t).asin()}function Hm(t){return new this(t).asinh()}function jm(t){return new this(t).atan()}function Vm(t){return new this(t).atanh()}function Xm(t,e){t=new this(t),e=new this(e);var n,r=this.precision,s=this.rounding,o=r+4;return!t.s||!e.s?n=new this(NaN):!t.d&&!e.d?(n=si(this,o,1).times(e.s>0?.25:.75),n.s=t.s):!e.d||t.isZero()?(n=e.s<0?si(this,r,s):new this(0),n.s=t.s):!t.d||e.isZero()?(n=si(this,o,1).times(.5),n.s=t.s):e.s<0?(this.precision=o,this.rounding=1,n=this.atan(kt(t,e,o,1)),e=si(this,o,1),this.precision=r,this.rounding=s,n=t.s<0?n.minus(e):n.plus(e)):n=this.atan(kt(t,e,o,1)),n}function Km(t){return new this(t).cbrt()}function Jm(t){return dt(t=new this(t),t.e+1,2)}function Ym(t,e,n){return new this(t).clamp(e,n)}function Qm(t){if(!t||typeof t!="object")throw Error(Cs+"Object expected");var e,n,r,s=t.defaults===!0,o=["precision",1,Bi,"rounding",0,8,"toExpNeg",-mn,0,"toExpPos",0,mn,"maxE",0,mn,"minE",-mn,0,"modulo",0,9];for(e=0;e<o.length;e+=3)if(n=o[e],s&&(this[n]=La[n]),(r=t[n])!==void 0)if(Ee(r)===r&&r>=o[e+1]&&r<=o[e+2])this[n]=r;else throw Error(Fi+n+": "+r);if(n="crypto",s&&(this[n]=La[n]),(r=t[n])!==void 0)if(r===!0||r===!1||r===0||r===1)if(r)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[n]=!0;else throw Error(Uh);else this[n]=!1;else throw Error(Fi+n+": "+r);return this}function tv(t){return new this(t).cos()}function ev(t){return new this(t).cosh()}function Jh(t){var e,n,r;function s(o){var h,f,l,d=this;if(!(d instanceof s))return new s(o);if(d.constructor=s,Pu(o)){d.s=o.s,Dt?!o.d||o.e>s.maxE?(d.e=NaN,d.d=null):o.e<s.minE?(d.e=0,d.d=[0]):(d.e=o.e,d.d=o.d.slice()):(d.e=o.e,d.d=o.d?o.d.slice():o.d);return}if(l=typeof o,l==="number"){if(o===0){d.s=1/o<0?-1:1,d.e=0,d.d=[0];return}if(o<0?(o=-o,d.s=-1):d.s=1,o===~~o&&o<1e7){for(h=0,f=o;f>=10;f/=10)h++;Dt?h>s.maxE?(d.e=NaN,d.d=null):h<s.minE?(d.e=0,d.d=[0]):(d.e=h,d.d=[o]):(d.e=h,d.d=[o]);return}if(o*0!==0){o||(d.s=NaN),d.e=NaN,d.d=null;return}return ts(d,o.toString())}if(l==="string")return(f=o.charCodeAt(0))===45?(o=o.slice(1),d.s=-1):(f===43&&(o=o.slice(1)),d.s=1),$h.test(o)?ts(d,o):Rm(d,o);if(l==="bigint")return o<0?(o=-o,d.s=-1):d.s=1,ts(d,o.toString());throw Error(Fi+o)}if(s.prototype=$,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.EUCLID=9,s.config=s.set=Qm,s.clone=Jh,s.isDecimal=Pu,s.abs=Zm,s.acos=qm,s.acosh=Um,s.add=Wm,s.asin=$m,s.asinh=Hm,s.atan=jm,s.atanh=Vm,s.atan2=Xm,s.cbrt=Km,s.ceil=Jm,s.clamp=Ym,s.cos=tv,s.cosh=ev,s.div=iv,s.exp=nv,s.floor=rv,s.hypot=sv,s.ln=av,s.log=ov,s.log10=hv,s.log2=uv,s.max=fv,s.min=lv,s.mod=cv,s.mul=dv,s.pow=_v,s.random=mv,s.round=vv,s.sign=pv,s.sin=gv,s.sinh=yv,s.sqrt=wv,s.sub=Dv,s.sum=Ev,s.tan=Mv,s.tanh=Av,s.trunc=Cv,t===void 0&&(t={}),t&&t.defaults!==!0)for(r=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return s.config(t),s}function iv(t,e){return new this(t).div(e)}function nv(t){return new this(t).exp()}function rv(t){return dt(t=new this(t),t.e+1,3)}function sv(){var t,e,n=new this(0);for(Dt=!1,t=0;t<arguments.length;)if(e=new this(arguments[t++]),e.d)n.d&&(n=n.plus(e.times(e)));else{if(e.s)return Dt=!0,new this(1/0);n=e}return Dt=!0,n.sqrt()}function Pu(t){return t instanceof Mn||t&&t.toStringTag===Wh||!1}function av(t){return new this(t).ln()}function ov(t,e){return new this(t).log(e)}function uv(t){return new this(t).log(2)}function hv(t){return new this(t).log(10)}function fv(){return Vh(this,arguments,-1)}function lv(){return Vh(this,arguments,1)}function cv(t,e){return new this(t).mod(e)}function dv(t,e){return new this(t).mul(e)}function _v(t,e){return new this(t).pow(e)}function mv(t){var e,n,r,s,o=0,h=new this(1),f=[];if(t===void 0?t=this.precision:Le(t,1,Bi),r=Math.ceil(t/pt),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(r));o<r;)s=e[o],s>=429e7?e[o]=crypto.getRandomValues(new Uint32Array(1))[0]:f[o++]=s%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(r*=4);o<r;)s=e[o]+(e[o+1]<<8)+(e[o+2]<<16)+((e[o+3]&127)<<24),s>=214e7?crypto.randomBytes(4).copy(e,o):(f.push(s%1e7),o+=4);o=r/4}else throw Error(Uh);else for(;o<r;)f[o++]=Math.random()*1e7|0;for(r=f[--o],t%=pt,r&&t&&(s=he(10,pt-t),f[o]=(r/s|0)*s);f[o]===0;o--)f.pop();if(o<0)n=0,f=[0];else{for(n=-1;f[0]===0;n-=pt)f.shift();for(r=1,s=f[0];s>=10;s/=10)r++;r<pt&&(n-=pt-r)}return h.e=n,h.d=f,h}function vv(t){return dt(t=new this(t),t.e+1,this.rounding)}function pv(t){return t=new this(t),t.d?t.d[0]?t.s:0*t.s:t.s||NaN}function gv(t){return new this(t).sin()}function yv(t){return new this(t).sinh()}function wv(t){return new this(t).sqrt()}function Dv(t,e){return new this(t).sub(e)}function Ev(){var t=0,e=arguments,n=new this(e[t]);for(Dt=!1;n.s&&++t<e.length;)n=n.plus(e[t]);return Dt=!0,dt(n,this.precision,this.rounding)}function Mv(t){return new this(t).tan()}function Av(t){return new this(t).tanh()}function Cv(t){return dt(t=new this(t),t.e+1,1)}$[Symbol.for("nodejs.util.inspect.custom")]=$.toString;$[Symbol.toStringTag]="Decimal";var Mn=$.constructor=Jh(La);ps=new Mn(ps);gs=new Mn(gs);var bv="BigNumber",xv=["?on","config"],Sv=Bt(bv,xv,t=>{var{on:e,config:n}=t,r=Mn.clone({precision:n.precision,modulo:Mn.EUCLID});return r.prototype=Object.create(r.prototype),r.prototype.type="BigNumber",r.prototype.isBigNumber=!0,r.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},r.fromJSON=function(s){return new r(s.value)},e&&e("config",function(s,o){s.precision!==o.precision&&r.config({precision:s.precision})}),r},{isClass:!0});const we=Math.cosh||function(t){return Math.abs(t)<1e-9?1-t:(Math.exp(t)+Math.exp(-t))*.5},Ue=Math.sinh||function(t){return Math.abs(t)<1e-9?t:(Math.exp(t)-Math.exp(-t))*.5},Pv=t=>{const e=Math.sin(.5*t);return-2*e*e},wa=function(t,e){return t=Math.abs(t),e=Math.abs(e),t<e&&([t,e]=[e,t]),t<1e8?Math.sqrt(t*t+e*e):(e/=t,t*Math.sqrt(1+e*e))},un=function(){throw SyntaxError("Invalid Param")};function Da(t,e){const n=Math.abs(t),r=Math.abs(e);return t===0?Math.log(r):e===0?Math.log(n):n<3e3&&r<3e3?Math.log(t*t+e*e)*.5:(t=t*.5,e=e*.5,.5*Math.log(t*t+e*e)+Math.LN2)}const Fv={re:0,im:0},qi=function(t,e){const n=Fv;if(t==null)n.re=n.im=0;else if(e!==void 0)n.re=t,n.im=e;else switch(typeof t){case"object":if("im"in t&&"re"in t)n.re=t.re,n.im=t.im;else if("abs"in t&&"arg"in t){if(!isFinite(t.abs)&&isFinite(t.arg))return z.INFINITY;n.re=t.abs*Math.cos(t.arg),n.im=t.abs*Math.sin(t.arg)}else if("r"in t&&"phi"in t){if(!isFinite(t.r)&&isFinite(t.phi))return z.INFINITY;n.re=t.r*Math.cos(t.phi),n.im=t.r*Math.sin(t.phi)}else t.length===2?(n.re=t[0],n.im=t[1]):un();break;case"string":n.im=n.re=0;const r=t.replace(/_/g,"").match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g);let s=1,o=0;r===null&&un();for(let h=0;h<r.length;h++){const f=r[h];f===" "||f==="	"||f===`
`||(f==="+"?s++:f==="-"?o++:f==="i"||f==="I"?(s+o===0&&un(),r[h+1]!==" "&&!isNaN(r[h+1])?(n.im+=parseFloat((o%2?"-":"")+r[h+1]),h++):n.im+=parseFloat((o%2?"-":"")+"1"),s=o=0):((s+o===0||isNaN(f))&&un(),r[h+1]==="i"||r[h+1]==="I"?(n.im+=parseFloat((o%2?"-":"")+f),h++):n.re+=parseFloat((o%2?"-":"")+f),s=o=0))}s+o>0&&un();break;case"number":n.im=0,n.re=t;break;default:un()}return isNaN(n.re)||isNaN(n.im),n};function z(t,e){if(!(this instanceof z))return new z(t,e);const n=qi(t,e);this.re=n.re,this.im=n.im}z.prototype={re:0,im:0,sign:function(){const t=wa(this.re,this.im);return new z(this.re/t,this.im/t)},add:function(t,e){const n=qi(t,e),r=this.isInfinite(),s=!(isFinite(n.re)&&isFinite(n.im));return r||s?r&&s?z.NAN:z.INFINITY:new z(this.re+n.re,this.im+n.im)},sub:function(t,e){const n=qi(t,e),r=this.isInfinite(),s=!(isFinite(n.re)&&isFinite(n.im));return r||s?r&&s?z.NAN:z.INFINITY:new z(this.re-n.re,this.im-n.im)},mul:function(t,e){const n=qi(t,e),r=this.isInfinite(),s=!(isFinite(n.re)&&isFinite(n.im)),o=this.re===0&&this.im===0,h=n.re===0&&n.im===0;return r&&h||s&&o?z.NAN:r||s?z.INFINITY:n.im===0&&this.im===0?new z(this.re*n.re,0):new z(this.re*n.re-this.im*n.im,this.re*n.im+this.im*n.re)},div:function(t,e){const n=qi(t,e),r=this.isInfinite(),s=!(isFinite(n.re)&&isFinite(n.im)),o=this.re===0&&this.im===0,h=n.re===0&&n.im===0;if(o&&h||r&&s)return z.NAN;if(h||r)return z.INFINITY;if(o||s)return z.ZERO;if(n.im===0)return new z(this.re/n.re,this.im/n.re);if(Math.abs(n.re)<Math.abs(n.im)){const f=n.re/n.im,l=n.re*f+n.im;return new z((this.re*f+this.im)/l,(this.im*f-this.re)/l)}else{const f=n.im/n.re,l=n.im*f+n.re;return new z((this.re+this.im*f)/l,(this.im-this.re*f)/l)}},pow:function(t,e){const n=qi(t,e),r=this.re===0&&this.im===0;if(n.re===0&&n.im===0)return z.ONE;if(n.im===0){if(this.im===0&&this.re>0)return new z(Math.pow(this.re,n.re),0);if(this.re===0)switch((n.re%4+4)%4){case 0:return new z(Math.pow(this.im,n.re),0);case 1:return new z(0,Math.pow(this.im,n.re));case 2:return new z(-Math.pow(this.im,n.re),0);case 3:return new z(0,-Math.pow(this.im,n.re))}}if(r&&n.re>0)return z.ZERO;const o=Math.atan2(this.im,this.re),h=Da(this.re,this.im);let f=Math.exp(n.re*h-n.im*o),l=n.im*h+n.re*o;return new z(f*Math.cos(l),f*Math.sin(l))},sqrt:function(){const t=this.re,e=this.im;if(e===0)return t>=0?new z(Math.sqrt(t),0):new z(0,Math.sqrt(-t));const n=wa(t,e);let r=Math.sqrt(.5*(n+Math.abs(t))),s=Math.abs(e)/(2*r);return t>=0?new z(r,e<0?-s:s):new z(s,e<0?-r:r)},exp:function(){const t=Math.exp(this.re);return this.im===0?new z(t,0):new z(t*Math.cos(this.im),t*Math.sin(this.im))},expm1:function(){const t=this.re,e=this.im;return new z(Math.expm1(t)*Math.cos(e)+Pv(e),Math.exp(t)*Math.sin(e))},log:function(){const t=this.re,e=this.im;return e===0&&t>0?new z(Math.log(t),0):new z(Da(t,e),Math.atan2(e,t))},abs:function(){return wa(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){const t=this.re,e=this.im;return new z(Math.sin(t)*we(e),Math.cos(t)*Ue(e))},cos:function(){const t=this.re,e=this.im;return new z(Math.cos(t)*we(e),-Math.sin(t)*Ue(e))},tan:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)+we(e);return new z(Math.sin(t)/n,Ue(e)/n)},cot:function(){const t=2*this.re,e=2*this.im,n=Math.cos(t)-we(e);return new z(-Math.sin(t)/n,Ue(e)/n)},sec:function(){const t=this.re,e=this.im,n=.5*we(2*e)+.5*Math.cos(2*t);return new z(Math.cos(t)*we(e)/n,Math.sin(t)*Ue(e)/n)},csc:function(){const t=this.re,e=this.im,n=.5*we(2*e)-.5*Math.cos(2*t);return new z(Math.sin(t)*we(e)/n,-Math.cos(t)*Ue(e)/n)},asin:function(){const t=this.re,e=this.im,n=new z(e*e-t*t+1,-2*t*e).sqrt(),r=new z(n.re-e,n.im+t).log();return new z(r.im,-r.re)},acos:function(){const t=this.re,e=this.im,n=new z(e*e-t*t+1,-2*t*e).sqrt(),r=new z(n.re-e,n.im+t).log();return new z(Math.PI/2-r.im,r.re)},atan:function(){const t=this.re,e=this.im;if(t===0){if(e===1)return new z(0,1/0);if(e===-1)return new z(0,-1/0)}const n=t*t+(1-e)*(1-e),r=new z((1-e*e-t*t)/n,-2*t/n).log();return new z(-.5*r.im,.5*r.re)},acot:function(){const t=this.re,e=this.im;if(e===0)return new z(Math.atan2(1,t),0);const n=t*t+e*e;return n!==0?new z(t/n,-e/n).atan():new z(t!==0?t/0:0,e!==0?-e/0:0).atan()},asec:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new z(0,1/0);const n=t*t+e*e;return n!==0?new z(t/n,-e/n).acos():new z(t!==0?t/0:0,e!==0?-e/0:0).acos()},acsc:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new z(Math.PI/2,1/0);const n=t*t+e*e;return n!==0?new z(t/n,-e/n).asin():new z(t!==0?t/0:0,e!==0?-e/0:0).asin()},sinh:function(){const t=this.re,e=this.im;return new z(Ue(t)*Math.cos(e),we(t)*Math.sin(e))},cosh:function(){const t=this.re,e=this.im;return new z(we(t)*Math.cos(e),Ue(t)*Math.sin(e))},tanh:function(){const t=2*this.re,e=2*this.im,n=we(t)+Math.cos(e);return new z(Ue(t)/n,Math.sin(e)/n)},coth:function(){const t=2*this.re,e=2*this.im,n=we(t)-Math.cos(e);return new z(Ue(t)/n,-Math.sin(e)/n)},csch:function(){const t=this.re,e=this.im,n=Math.cos(2*e)-we(2*t);return new z(-2*Ue(t)*Math.cos(e)/n,2*we(t)*Math.sin(e)/n)},sech:function(){const t=this.re,e=this.im,n=Math.cos(2*e)+we(2*t);return new z(2*we(t)*Math.cos(e)/n,-2*Ue(t)*Math.sin(e)/n)},asinh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new z(0,0);const o=Math.abs(t),h=Math.log(o+Math.sqrt(o*o+1));return new z(t<0?-h:h,0)}const n=t*t-e*e+1,r=2*t*e,s=new z(n,r).sqrt();return new z(t+s.re,e+s.im).log()},acosh:function(){const t=this.re,e=this.im;if(e===0){if(t>1)return new z(Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1)),0);if(t<-1){const s=Math.sqrt(t*t-1);return new z(Math.log(-t+s),Math.PI)}return new z(0,Math.acos(t))}const n=new z(t-1,e).sqrt(),r=new z(t+1,e).sqrt();return new z(t+n.re*r.re-n.im*r.im,e+n.re*r.im+n.im*r.re).log()},atanh:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new z(0,0);if(t===1)return new z(1/0,0);if(t===-1)return new z(-1/0,0);if(-1<t&&t<1)return new z(.5*Math.log((1+t)/(1-t)),0);if(t>1){const l=(t+1)/(t-1);return new z(.5*Math.log(l),-Math.PI/2)}const f=(1+t)/(1-t);return new z(.5*Math.log(-f),Math.PI/2)}const n=1-t,r=1+t,s=n*n+e*e;if(s===0)return new z(t!==-1?t/0:0,e!==0?e/0:0);const o=(r*n-e*e)/s,h=(e*n+r*e)/s;return new z(Da(o,h)/2,Math.atan2(h,o)/2)},acoth:function(){const t=this.re,e=this.im;if(t===0&&e===0)return new z(0,Math.PI/2);const n=t*t+e*e;return n!==0?new z(t/n,-e/n).atanh():new z(t!==0?t/0:0,e!==0?-e/0:0).atanh()},acsch:function(){const t=this.re,e=this.im;if(e===0){if(t===0)return new z(1/0,0);const r=1/t;return new z(Math.log(r+Math.sqrt(r*r+1)),0)}const n=t*t+e*e;return n!==0?new z(t/n,-e/n).asinh():new z(t!==0?t/0:0,e!==0?-e/0:0).asinh()},asech:function(){const t=this.re,e=this.im;if(this.isZero())return z.INFINITY;const n=t*t+e*e;return n!==0?new z(t/n,-e/n).acosh():new z(t!==0?t/0:0,e!==0?-e/0:0).acosh()},inverse:function(){if(this.isZero())return z.INFINITY;if(this.isInfinite())return z.ZERO;const t=this.re,e=this.im,n=t*t+e*e;return new z(t/n,-e/n)},conjugate:function(){return new z(this.re,-this.im)},neg:function(){return new z(-this.re,-this.im)},ceil:function(t){return t=Math.pow(10,t||0),new z(Math.ceil(this.re*t)/t,Math.ceil(this.im*t)/t)},floor:function(t){return t=Math.pow(10,t||0),new z(Math.floor(this.re*t)/t,Math.floor(this.im*t)/t)},round:function(t){return t=Math.pow(10,t||0),new z(Math.round(this.re*t)/t,Math.round(this.im*t)/t)},equals:function(t,e){const n=qi(t,e);return Math.abs(n.re-this.re)<=z.EPSILON&&Math.abs(n.im-this.im)<=z.EPSILON},clone:function(){return new z(this.re,this.im)},toString:function(){let t=this.re,e=this.im,n="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(t)<z.EPSILON&&(t=0),Math.abs(e)<z.EPSILON&&(e=0),e===0?n+t:(t!==0?(n+=t,n+=" ",e<0?(e=-e,n+="-"):n+="+",n+=" "):e<0&&(e=-e,n+="-"),e!==1&&(n+=e),n+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!this.isFinite()}};z.ZERO=new z(0,0);z.ONE=new z(1,0);z.I=new z(0,1);z.PI=new z(Math.PI,0);z.E=new z(Math.E,0);z.INFINITY=new z(1/0,1/0);z.NAN=new z(NaN,NaN);z.EPSILON=1e-15;var Nv="Complex",Tv=[],Bv=Bt(Nv,Tv,()=>(Object.defineProperty(z,"name",{value:"Complex"}),z.prototype.constructor=z,z.prototype.type="Complex",z.prototype.isComplex=!0,z.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},z.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},z.prototype.format=function(t){var e="",n=this.im,r=this.re,s=Ta(this.re,t),o=Ta(this.im,t),h=Rt(t)?t:t?t.precision:null;if(h!==null){var f=Math.pow(10,-h);Math.abs(r/n)<f&&(r=0),Math.abs(n/r)<f&&(n=0)}return n===0?e=s:r===0?n===1?e="i":n===-1?e="-i":e=o+"i":n<0?n===-1?e=s+" - i":e=s+" - "+o.substring(1)+"i":n===1?e=s+" + i":e=s+" + "+o+"i",e},z.fromPolar=function(t){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return z(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var n=arguments[0],r=arguments[1];if(Rt(n)){if(Oh(r)&&r.hasBase("ANGLE")&&(r=r.toNumber("rad")),Rt(r))return new z({r:n,phi:r});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},z.prototype.valueOf=z.prototype.toString,z.fromJSON=function(t){return new z(t)},z.compare=function(t,e){return t.re>e.re?1:t.re<e.re?-1:t.im>e.im?1:t.im<e.im?-1:0},z),{isClass:!0});typeof BigInt>"u"&&(BigInt=function(t){if(isNaN(t))throw new Error("");return t});const ht=BigInt(0),bt=BigInt(1),de=BigInt(2),Qn=BigInt(3),vn=BigInt(5),Fe=BigInt(10);BigInt(Number.MAX_SAFE_INTEGER);const Lv=2e3,it={s:bt,n:ht,d:bt};function _i(t,e){try{t=BigInt(t)}catch{throw Ei()}return t*e}function Ke(t){return typeof t=="bigint"?t:Math.floor(t)}function Ut(t,e){if(e===ht)throw eo();const n=Object.create($e.prototype);n.s=t<ht?-bt:bt,t=t<ht?-t:t;const r=Ui(t,e);return n.n=t/r,n.d=e/r,n}const Iv=[de*de,de,de*de,de,de*de,de*Qn,de,de*Qn];function hn(t){const e=Object.create(null);if(t<=bt)return e[t]=bt,e;const n=r=>{e[r]=(e[r]||ht)+bt};for(;t%de===ht;)n(de),t/=de;for(;t%Qn===ht;)n(Qn),t/=Qn;for(;t%vn===ht;)n(vn),t/=vn;for(let r=0,s=de+vn;s*s<=t;){for(;t%s===ht;)n(s),t/=s;s+=Iv[r],r=r+1&7}return t>bt&&n(t),e}const ce=function(t,e){let n=ht,r=bt,s=bt;if(t!=null)if(e!==void 0){if(typeof t=="bigint")n=t;else{if(isNaN(t))throw Ei();if(t%1!==0)throw Fu();n=BigInt(t)}if(typeof e=="bigint")r=e;else{if(isNaN(e))throw Ei();if(e%1!==0)throw Fu();r=BigInt(e)}s=n*r}else if(typeof t=="object"){if("d"in t&&"n"in t)n=BigInt(t.n),r=BigInt(t.d),"s"in t&&(n*=BigInt(t.s));else if(0 in t)n=BigInt(t[0]),1 in t&&(r=BigInt(t[1]));else if(typeof t=="bigint")n=t;else throw Ei();s=n*r}else if(typeof t=="number"){if(isNaN(t))throw Ei();if(t<0&&(s=-bt,t=-t),t%1===0)n=BigInt(t);else{let o=1,h=0,f=1,l=1,d=1,v=1e7;for(t>=1&&(o=10**Math.floor(1+Math.log10(t)),t/=o);f<=v&&d<=v;){let _=(h+l)/(f+d);if(t===_){f+d<=v?(n=h+l,r=f+d):d>f?(n=l,r=d):(n=h,r=f);break}else t>_?(h+=l,f+=d):(l+=h,d+=f),f>v?(n=l,r=d):(n=h,r=f)}n=BigInt(n)*BigInt(o),r=BigInt(r)}}else if(typeof t=="string"){let o=0,h=ht,f=ht,l=ht,d=bt,v=bt,_=t.replace(/_/g,"").match(/\d+|./g);if(_===null)throw Ei();if(_[o]==="-"?(s=-bt,o++):_[o]==="+"&&o++,_.length===o+1?f=_i(_[o++],s):_[o+1]==="."||_[o]==="."?(_[o]!=="."&&(h=_i(_[o++],s)),o++,(o+1===_.length||_[o+1]==="("&&_[o+3]===")"||_[o+1]==="'"&&_[o+3]==="'")&&(f=_i(_[o],s),d=Fe**BigInt(_[o].length),o++),(_[o]==="("&&_[o+2]===")"||_[o]==="'"&&_[o+2]==="'")&&(l=_i(_[o+1],s),v=Fe**BigInt(_[o+1].length)-bt,o+=3)):_[o+1]==="/"||_[o+1]===":"?(f=_i(_[o],s),d=_i(_[o+2],bt),o+=3):_[o+3]==="/"&&_[o+1]===" "&&(h=_i(_[o],s),f=_i(_[o+2],s),d=_i(_[o+4],bt),o+=5),_.length<=o)r=d*v,s=n=l+r*h+v*f;else throw Ei()}else if(typeof t=="bigint")n=t,s=t,r=bt;else throw Ei();if(r===ht)throw eo();it.s=s<ht?-bt:bt,it.n=n<ht?-n:n,it.d=r<ht?-r:r};function Ov(t,e,n){let r=bt;for(;e>ht;t=t*t%n,e>>=bt)e&bt&&(r=r*t%n);return r}function Gv(t,e){for(;e%de===ht;e/=de);for(;e%vn===ht;e/=vn);if(e===bt)return ht;let n=Fe%e,r=1;for(;n!==bt;r++)if(n=n*Fe%e,r>Lv)return ht;return BigInt(r)}function zv(t,e,n){let r=bt,s=Ov(Fe,n,e);for(let o=0;o<300;o++){if(r===s)return BigInt(o);r=r*Fe%e,s=s*Fe%e}return 0}function Ui(t,e){if(!t)return e;if(!e)return t;for(;;){if(t%=e,!t)return e;if(e%=t,!e)return t}}function $e(t,e){if(ce(t,e),this instanceof $e)t=Ui(it.d,it.n),this.s=it.s,this.n=it.n/t,this.d=it.d/t;else return Ut(it.s*it.n,it.d)}const eo=function(){return new Error("Division by Zero")},Ei=function(){return new Error("Invalid argument")},Fu=function(){return new Error("Parameters must be integer")};$e.prototype={s:bt,n:ht,d:bt,abs:function(){return Ut(this.n,this.d)},neg:function(){return Ut(-this.s*this.n,this.d)},add:function(t,e){return ce(t,e),Ut(this.s*this.n*it.d+it.s*this.d*it.n,this.d*it.d)},sub:function(t,e){return ce(t,e),Ut(this.s*this.n*it.d-it.s*this.d*it.n,this.d*it.d)},mul:function(t,e){return ce(t,e),Ut(this.s*it.s*this.n*it.n,this.d*it.d)},div:function(t,e){return ce(t,e),Ut(this.s*it.s*this.n*it.d,this.d*it.n)},clone:function(){return Ut(this.s*this.n,this.d)},mod:function(t,e){if(t===void 0)return Ut(this.s*this.n%this.d,bt);if(ce(t,e),ht===it.n*this.d)throw eo();return Ut(this.s*(it.d*this.n)%(it.n*this.d),it.d*this.d)},gcd:function(t,e){return ce(t,e),Ut(Ui(it.n,this.n)*Ui(it.d,this.d),it.d*this.d)},lcm:function(t,e){return ce(t,e),it.n===ht&&this.n===ht?Ut(ht,bt):Ut(it.n*this.n,Ui(it.n,this.n)*Ui(it.d,this.d))},inverse:function(){return Ut(this.s*this.d,this.n)},pow:function(t,e){if(ce(t,e),it.d===bt)return it.s<ht?Ut((this.s*this.d)**it.n,this.n**it.n):Ut((this.s*this.n)**it.n,this.d**it.n);if(this.s<ht)return null;let n=hn(this.n),r=hn(this.d),s=bt,o=bt;for(let h in n)if(h!=="1"){if(h==="0"){s=ht;break}if(n[h]*=it.n,n[h]%it.d===ht)n[h]/=it.d;else return null;s*=BigInt(h)**n[h]}for(let h in r)if(h!=="1"){if(r[h]*=it.n,r[h]%it.d===ht)r[h]/=it.d;else return null;o*=BigInt(h)**r[h]}return it.s<ht?Ut(o,s):Ut(s,o)},log:function(t,e){if(ce(t,e),this.s<=ht||it.s<=ht)return null;const n=Object.create(null),r=hn(it.n),s=hn(it.d),o=hn(this.n),h=hn(this.d);for(const d in s)r[d]=(r[d]||ht)-s[d];for(const d in h)o[d]=(o[d]||ht)-h[d];for(const d in r)d!=="1"&&(n[d]=!0);for(const d in o)d!=="1"&&(n[d]=!0);let f=null,l=null;for(const d in n){const v=r[d]||ht,_=o[d]||ht;if(v===ht){if(_!==ht)return null;continue}let m=_,y=v;const E=Ui(m,y);if(m/=E,y/=E,f===null&&l===null)f=m,l=y;else if(m*l!==f*y)return null}return f!==null&&l!==null?Ut(f,l):null},equals:function(t,e){return ce(t,e),this.s*this.n*it.d===it.s*it.n*this.d},lt:function(t,e){return ce(t,e),this.s*this.n*it.d<it.s*it.n*this.d},lte:function(t,e){return ce(t,e),this.s*this.n*it.d<=it.s*it.n*this.d},gt:function(t,e){return ce(t,e),this.s*this.n*it.d>it.s*it.n*this.d},gte:function(t,e){return ce(t,e),this.s*this.n*it.d>=it.s*it.n*this.d},compare:function(t,e){ce(t,e);let n=this.s*this.n*it.d-it.s*it.n*this.d;return(ht<n)-(n<ht)},ceil:function(t){return t=Fe**BigInt(t||0),Ut(Ke(this.s*t*this.n/this.d)+(t*this.n%this.d>ht&&this.s>=ht?bt:ht),t)},floor:function(t){return t=Fe**BigInt(t||0),Ut(Ke(this.s*t*this.n/this.d)-(t*this.n%this.d>ht&&this.s<ht?bt:ht),t)},round:function(t){return t=Fe**BigInt(t||0),Ut(Ke(this.s*t*this.n/this.d)+this.s*((this.s>=ht?bt:ht)+de*(t*this.n%this.d)>this.d?bt:ht),t)},roundTo:function(t,e){ce(t,e);const n=this.n*it.d,r=this.d*it.n,s=n%r;let o=Ke(n/r);return s+s>=r&&o++,Ut(this.s*o*it.n,it.d)},divisible:function(t,e){return ce(t,e),it.n===ht?!1:this.n*it.d%(it.n*this.d)===ht},valueOf:function(){return Number(this.s*this.n)/Number(this.d)},toString:function(t=15){let e=this.n,n=this.d,r=Gv(e,n),s=zv(e,n,r),o=this.s<ht?"-":"";if(o+=Ke(e/n),e%=n,e*=Fe,e&&(o+="."),r){for(let h=s;h--;)o+=Ke(e/n),e%=n,e*=Fe;o+="(";for(let h=r;h--;)o+=Ke(e/n),e%=n,e*=Fe;o+=")"}else for(let h=t;e&&h--;)o+=Ke(e/n),e%=n,e*=Fe;return o},toFraction:function(t=!1){let e=this.n,n=this.d,r=this.s<ht?"-":"";if(n===bt)r+=e;else{const s=Ke(e/n);t&&s>ht&&(r+=s,r+=" ",e%=n),r+=e,r+="/",r+=n}return r},toLatex:function(t=!1){let e=this.n,n=this.d,r=this.s<ht?"-":"";if(n===bt)r+=e;else{const s=Ke(e/n);t&&s>ht&&(r+=s,e%=n),r+="\\frac{",r+=e,r+="}{",r+=n,r+="}"}return r},toContinued:function(){let t=this.n,e=this.d;const n=[];for(;e;){n.push(Ke(t/e));const r=t%e;t=e,e=r}return n},simplify:function(t=.001){const e=BigInt(Math.ceil(1/t)),n=this.abs(),r=n.toContinued();for(let s=1;s<r.length;s++){let o=Ut(r[s-1],bt);for(let f=s-2;f>=0;f--)o=o.inverse().add(r[f]);let h=o.sub(n);if(h.n*e<h.d)return o.mul(this.s)}return this}};var Rv="Fraction",kv=[],Zv=Bt(Rv,kv,()=>(Object.defineProperty($e,"name",{value:"Fraction"}),$e.prototype.constructor=$e,$e.prototype.type="Fraction",$e.prototype.isFraction=!0,$e.prototype.toJSON=function(){return{mathjs:"Fraction",n:String(this.s*this.n),d:String(this.d)}},$e.fromJSON=function(t){return new $e(t)},$e),{isClass:!0}),qv="Matrix",Uv=[],Wv=Bt(qv,Uv,()=>{function t(){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator")}return t.prototype.type="Matrix",t.prototype.isMatrix=!0,t.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},t.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},t.prototype.create=function(e,n){throw new Error("Cannot invoke create on a Matrix interface")},t.prototype.subset=function(e,n,r){throw new Error("Cannot invoke subset on a Matrix interface")},t.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},t.prototype.set=function(e,n,r){throw new Error("Cannot invoke set on a Matrix interface")},t.prototype.resize=function(e,n){throw new Error("Cannot invoke resize on a Matrix interface")},t.prototype.reshape=function(e,n){throw new Error("Cannot invoke reshape on a Matrix interface")},t.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},t.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},t.prototype.map=function(e,n){throw new Error("Cannot invoke map on a Matrix interface")},t.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},t.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},t.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},t.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},t.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},t.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},t},{isClass:!0});function Ea(t,e,n){var r=t.constructor,s=new r(2),o="";if(n){if(n<1)throw new Error("size must be in greater than 0");if(!fe(n))throw new Error("size must be an integer");if(t.greaterThan(s.pow(n-1).sub(1))||t.lessThan(s.pow(n-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(n-1,", 2^").concat(n-1,"-1]"));if(!t.isInteger())throw new Error("Value must be an integer");t.lessThan(0)&&(t=t.add(s.pow(n))),o="i".concat(n)}switch(e){case 2:return"".concat(t.toBinary()).concat(o);case 8:return"".concat(t.toOctal()).concat(o);case 16:return"".concat(t.toHexadecimal()).concat(o);default:throw new Error("Base ".concat(e," not supported "))}}function $v(t,e){if(typeof e=="function")return e(t);if(!t.isFinite())return t.isNaN()?"NaN":t.gt(0)?"Infinity":"-Infinity";var{notation:n,precision:r,wordSize:s}=zh(e);switch(n){case"fixed":return jv(t,r);case"exponential":return Nu(t,r);case"engineering":return Hv(t,r);case"bin":return Ea(t,2,s);case"oct":return Ea(t,8,s);case"hex":return Ea(t,16,s);case"auto":{var o=Tu(e?.lowerExp,-3),h=Tu(e?.upperExp,5);if(t.isZero())return"0";var f,l=t.toSignificantDigits(r),d=l.e;return d>=o&&d<h?f=l.toFixed():f=Nu(t,r),f.replace(/((\.\d*?)(0+))($|e)/,function(){var v=arguments[2],_=arguments[4];return v!=="."?v+_:_})}default:throw new Error('Unknown notation "'+n+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Hv(t,e){var n=t.e,r=n%3===0?n:n<0?n-3-n%3:n-n%3,s=t.mul(Math.pow(10,-r)),o=s.toPrecision(e);if(o.includes("e")){var h=t.constructor;o=new h(o).toFixed()}return o+"e"+(n>=0?"+":"")+r.toString()}function Nu(t,e){return e!==void 0?t.toExponential(e-1):t.toExponential()}function jv(t,e){return t.toFixed(e)}function Tu(t,e){return Rt(t)?t:ae(t)?t.toNumber():e}function Qt(t,e){var n=Vv(t,e);return e&&typeof e=="object"&&"truncate"in e&&n.length>e.truncate?n.substring(0,e.truncate-3)+"...":n}function Vv(t,e){if(typeof t=="number")return Ta(t,e);if(ae(t))return $v(t,e);if(Xv(t))return!e||e.fraction!=="decimal"?"".concat(t.s*t.n,"/").concat(t.d):t.toString();if(Array.isArray(t))return Yh(t,e);if(ri(t))return Bu(t);if(typeof t=="function")return t.syntax?String(t.syntax):"function";if(t&&typeof t=="object"){if(typeof t.format=="function")return t.format(e);if(t&&t.toString(e)!=={}.toString())return t.toString(e);var n=Object.keys(t).map(r=>Bu(r)+": "+Qt(t[r],e));return"{"+n.join(", ")+"}"}return String(t)}function Bu(t){for(var e=String(t),n="",r=0;r<e.length;){var s=e.charAt(r);n+=s in Lu?Lu[s]:s,r++}return'"'+n+'"'}var Lu={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function Yh(t,e){if(Array.isArray(t)){for(var n="[",r=t.length,s=0;s<r;s++)s!==0&&(n+=", "),n+=Yh(t[s],e);return n+="]",n}else return Qt(t,e)}function Xv(t){return t&&typeof t=="object"&&typeof t.s=="bigint"&&typeof t.n=="bigint"&&typeof t.d=="bigint"||!1}function $t(t,e,n){if(!(this instanceof $t))throw new SyntaxError("Constructor must be called with the new operator");this.actual=t,this.expected=e,this.relation=n,this.message="Dimension mismatch ("+(Array.isArray(t)?"["+t.join(", ")+"]":t)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}$t.prototype=new RangeError;$t.prototype.constructor=RangeError;$t.prototype.name="DimensionError";$t.prototype.isDimensionError=!0;function Cn(t,e,n){if(!(this instanceof Cn))throw new SyntaxError("Constructor must be called with the new operator");this.index=t,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=n),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Cn.prototype=new RangeError;Cn.prototype.constructor=RangeError;Cn.prototype.name="IndexError";Cn.prototype.isIndexError=!0;function Be(t){for(var e=[];Array.isArray(t);)e.push(t.length),t=t[0];return e}function Qh(t,e,n){var r,s=t.length;if(s!==e[n])throw new $t(s,e[n]);if(n<e.length-1){var o=n+1;for(r=0;r<s;r++){var h=t[r];if(!Array.isArray(h))throw new $t(e.length-1,e.length,"<");Qh(t[r],e,o)}}else for(r=0;r<s;r++)if(Array.isArray(t[r]))throw new $t(e.length+1,e.length,">")}function Iu(t,e){var n=e.length===0;if(n){if(Array.isArray(t))throw new $t(t.length,0)}else Qh(t,e,0)}function Yt(t,e){if(t!==void 0){if(!Rt(t)||!fe(t))throw new TypeError("Index must be an integer (value: "+t+")");if(t<0||typeof e=="number"&&t>=e)throw new Cn(t,e)}}function Ga(t,e,n){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(s){if(!Rt(s)||!fe(s)||s<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qt(e)+")")}),(Rt(t)||ae(t))&&(t=[t]);var r=n!==void 0?n:0;return za(t,e,0,r),t}function za(t,e,n,r){var s,o,h=t.length,f=e[n],l=Math.min(h,f);if(t.length=f,n<e.length-1){var d=n+1;for(s=0;s<l;s++)o=t[s],Array.isArray(o)||(o=[o],t[s]=o),za(o,e,d,r);for(s=l;s<f;s++)o=[],t[s]=o,za(o,e,d,r)}else{for(s=0;s<l;s++)for(;Array.isArray(t[s]);)t[s]=t[s][0];for(s=l;s<f;s++)t[s]=r}}function tf(t,e){var n=Jv(t,!0),r=n.length;if(!Array.isArray(t)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new $t(0,r,"!=");e=io(e,r);var s=ef(e);if(r!==s)throw new $t(s,r,"!=");try{return Kv(n,e)}catch(o){throw o instanceof $t?new $t(s,r,"!="):o}}function io(t,e){var n=ef(t),r=t.slice(),s=-1,o=t.indexOf(s),h=t.indexOf(s,o+1)>=0;if(h)throw new Error("More than one wildcard in sizes");var f=o>=0,l=e%n===0;if(f)if(l)r[o]=-e/n;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-n);return r}function ef(t){return t.reduce((e,n)=>e*n,1)}function Kv(t,e){for(var n=t,r,s=e.length-1;s>0;s--){var o=e[s];r=[];for(var h=n.length/o,f=0;f<h;f++)r.push(n.slice(f*o,(f+1)*o));n=r}return n}function nf(t,e,n,r){var s=r||Be(t);if(n)for(var o=0;o<n;o++)t=[t],s.unshift(1);for(t=rf(t,e,0);s.length<e;)s.push(1);return t}function rf(t,e,n){var r,s;if(Array.isArray(t)){var o=n+1;for(r=0,s=t.length;r<s;r++)t[r]=rf(t[r],e,o)}else for(var h=n;h<e;h++)t=[t];return t}function Jv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!Array.isArray(t))return t;if(typeof e!="boolean")throw new TypeError("Boolean expected for second argument of flatten");var n=[];return e?s(t):r(t),n;function r(o){for(var h=0;h<o.length;h++){var f=o[h];Array.isArray(f)?r(f):n.push(f)}}function s(o){if(Array.isArray(o[0]))for(var h=0;h<o.length;h++)s(o[h]);else for(var f=0;f<o.length;f++)n.push(o[f])}}function no(t,e){for(var n,r=0,s=0;s<t.length;s++){var o=t[s],h=Array.isArray(o);if(s===0&&h&&(r=o.length),h&&o.length!==r)return;var f=h?no(o,e):e(o);if(n===void 0)n=f;else if(n!==f)return"mixed"}return n}function sf(t,e,n,r){if(r<n){if(t.length!==e.length)throw new $t(t.length,e.length);for(var s=[],o=0;o<t.length;o++)s[o]=sf(t[o],e[o],n,r+1);return s}else return t.concat(e)}function Yv(){var t=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(t.length===1)return t[0];if(t.length>1)return t.slice(1).reduce(function(n,r){return sf(n,r,e,0)},t[0]);throw new Error("Wrong number of arguments in function concat")}function Qv(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];for(var r=e.map(m=>m.length),s=Math.max(...r),o=new Array(s).fill(null),h=0;h<e.length;h++)for(var f=e[h],l=r[h],d=0;d<l;d++){var v=s-l+d;f[d]>o[v]&&(o[v]=f[d])}for(var _=0;_<e.length;_++)af(e[_],o);return o}function af(t,e){for(var n=e.length,r=t.length,s=0;s<r;s++){var o=n-r+s;if(t[s]<e[o]&&t[s]>1||t[s]>e[o])throw new Error("shape mismatch: mismatch is found in arg with shape (".concat(t,") not possible to broadcast dimension ").concat(r," with size ").concat(t[s]," to size ").concat(e[o]))}}function Ou(t,e){var n=Be(t);if(Dn(n,e))return t;af(n,e);var r=Qv(n,e),s=r.length,o=[...Array(s-n.length).fill(1),...n],h=ep(t);n.length<s&&(h=tf(h,o),n=Be(h));for(var f=0;f<s;f++)n[f]<r[f]&&(h=tp(h,r[f],f),n=Be(h));return h}function tp(t,e,n){return Yv(...Array(e).fill(t),n)}function of(t,e){if(!Array.isArray(t))throw new Error("Array expected");var n=Be(t);if(e.length!==n.length)throw new $t(e.length,n.length);for(var r=0;r<e.length;r++)Yt(e[r],n[r]);return e.reduce((s,o)=>s[o],t)}function Gu(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t.length===0)return[];if(n)return o(t);var r=[];return s(t,0);function s(h,f){if(Array.isArray(h)){for(var l=h.length,d=Array(l),v=0;v<l;v++)r[f]=v,d[v]=s(h[v],f+1);return d}else return e(h,r.slice(0,f),t)}function o(h){if(Array.isArray(h)){for(var f=h.length,l=Array(f),d=0;d<f;d++)l[d]=o(h[d]);return l}else return e(h)}}function ep(t){return ls([],t)}function ws(t,e,n,r){if(ms.isTypedFunction(t)){var s;if(r)s=1;else{var o=e.isMatrix?e.size():Be(e),h=o.length?o[o.length-1]===0:!0;if(h)return{isUnary:r,fn:t};var f=o.map(()=>0),l=e.isMatrix?e.get(f):of(e,f);s=rp(t,l,f,e)}var d;if(e.isMatrix&&e.dataType!=="mixed"&&e.dataType!==void 0){var v=ip(t,s);d=v!==void 0?v:t}else d=t;return s>=1&&s<=3?{isUnary:s===1,fn:function(){for(var m=arguments.length,y=new Array(m),E=0;E<m;E++)y[E]=arguments[E];return zu(d,y.slice(0,s),n,t.name)}}:{isUnary:!1,fn:function(){for(var m=arguments.length,y=new Array(m),E=0;E<m;E++)y[E]=arguments[E];return zu(d,y,n,t.name)}}}return r===void 0?{isUnary:np(t),fn:t}:{isUnary:r,fn:t}}function ip(t,e){var n=[];if(Object.entries(t.signatures).forEach(r=>{var[s,o]=r;s.split(",").length===e&&n.push(o)}),n.length===1)return n[0]}function np(t){if(t.length!==1)return!1;var e=t.toString();if(/arguments/.test(e))return!1;var n=e.match(/\(.*?\)/);return!/\.\.\./.test(n)}function rp(t,e,n,r){for(var s=[e,n,r],o=3;o>0;o--){var h=s.slice(0,o);if(ms.resolve(t,h)!==null)return o}}function zu(t,e,n,r){try{return t(...e)}catch(s){sp(s,e,n,r)}}function sp(t,e,n,r){var s;if(t instanceof TypeError&&((s=t.data)===null||s===void 0?void 0:s.category)==="wrongType"){var o=[];throw o.push("value: ".concat(xi(e[0]))),e.length>=2&&o.push("index: ".concat(xi(e[1]))),e.length>=3&&o.push("array: ".concat(xi(e[2]))),new TypeError("Function ".concat(n," cannot apply callback arguments ")+"".concat(r,"(").concat(o.join(", "),") at index ").concat(JSON.stringify(e[1])))}else throw new TypeError("Function ".concat(n," cannot apply callback arguments ")+"to function ".concat(r,": ").concat(t.message))}var ap="DenseMatrix",op=["Matrix","config"],up=Bt(ap,op,t=>{var{Matrix:e,config:n}=t;function r(_,m){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(m&&!ri(m))throw new Error("Invalid datatype: "+m);if(oe(_))_.type==="DenseMatrix"?(this._data=Wt(_._data),this._size=Wt(_._size),this._datatype=m||_._datatype):(this._data=_.toArray(),this._size=_.size(),this._datatype=m||_._datatype);else if(_&&ue(_.data)&&ue(_.size))this._data=_.data,this._size=_.size,Iu(this._data,this._size),this._datatype=m||_.datatype;else if(ue(_))this._data=v(_),this._size=Be(this._data),Iu(this._data,this._size),this._datatype=m;else{if(_)throw new TypeError("Unsupported type of data ("+xi(_)+")");this._data=[],this._size=[0],this._datatype=m}}r.prototype=new e,r.prototype.createDenseMatrix=function(_,m){return new r(_,m)},Object.defineProperty(r,"name",{value:"DenseMatrix"}),r.prototype.constructor=r,r.prototype.type="DenseMatrix",r.prototype.isDenseMatrix=!0,r.prototype.getDataType=function(){return no(this._data,xi)},r.prototype.storage=function(){return"dense"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(_,m){return new r(_,m)},r.prototype.subset=function(_,m,y){switch(arguments.length){case 1:return s(this,_);case 2:case 3:return h(this,_,m,y);default:throw new SyntaxError("Wrong number of arguments")}},r.prototype.get=function(_){return of(this._data,_)},r.prototype.set=function(_,m,y){if(!ue(_))throw new TypeError("Array expected");if(_.length<this._size.length)throw new $t(_.length,this._size.length,"<");var E,g,D,b=_.map(function(M){return M+1});d(this,b,y);var S=this._data;for(E=0,g=_.length-1;E<g;E++)D=_[E],Yt(D,S.length),S=S[D];return D=_[_.length-1],Yt(D,S.length),S[D]=m,this};function s(_,m){if(!Ya(m))throw new TypeError("Invalid index");var y=n.legacySubset?m.size().every(C=>C===1):m.isScalar();if(y)return _.get(m.min());var E=m.size();if(E.length!==_._size.length)throw new $t(E.length,_._size.length);for(var g=m.min(),D=m.max(),b=0,S=_._size.length;b<S;b++)Yt(g[b],_._size[b]),Yt(D[b],_._size[b]);var M=new r,F=o(_._data,m);return M._size=F.size,M._datatype=_._datatype,M._data=F.data,n.legacySubset?M.reshape(m.size()):M}function o(_,m){var y=m.size().length-1,E=Array(y);return{data:g(_),size:E.filter(D=>D!==null)};function g(D){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,S=m.dimension(b);function M(F,C){return Rt(F)?C(F):F.map(C).valueOf()}return Rt(S)?E[b]=null:E[b]=S.size()[0],b<y?M(S,F=>(Yt(F,D.length),g(D[F],b+1))):M(S,F=>(Yt(F,D.length),D[F]))}}function h(_,m,y,E){if(!m||m.isIndex!==!0)throw new TypeError("Invalid index");var g=m.size(),D=m.isScalar(),b;if(oe(y)?(b=y.size(),y=y.valueOf()):b=Be(y),D){if(b.length!==0)throw new TypeError("Scalar expected");_.set(m.min(),y,E)}else{if(!Dn(b,g)){if(b.length===0)y=Ou([y],g);else try{y=Ou(y,g)}catch{}b=Be(y)}if(g.length<_._size.length)throw new $t(g.length,_._size.length,"<");if(b.length<g.length){for(var S=0,M=0;g[S]===1&&b[S]===1;)S++;for(;g[S]===1;)M++,S++;y=nf(y,g.length,M,b)}if(!Dn(g,b))throw new $t(g,b,">");var F=m.max().map(function(C){return C+1});d(_,F,E),f(_._data,m,y)}return _}function f(_,m,y){var E=m.size().length-1;g(_,y);function g(D,b){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,M=m.dimension(S),F=(A,T)=>{Yt(A,D.length),g(D[A],b[T[0]],S+1)},C=(A,T)=>{Yt(A,D.length),D[A]=b[T[0]]};S<E?Rt(M)?F(M,[0]):M.forEach(F):Rt(M)?C(M,[0]):M.forEach(C)}}r.prototype.resize=function(_,m,y){if(!ds(_))throw new TypeError("Array or Matrix expected");var E=_.valueOf().map(D=>Array.isArray(D)&&D.length===1?D[0]:D),g=y?this.clone():this;return l(g,E,m)};function l(_,m,y){if(m.length===0){for(var E=_._data;ue(E);)E=E[0];return E}return _._size=m.slice(0),_._data=Ga(_._data,_._size,y),_}r.prototype.reshape=function(_,m){var y=m?this.clone():this;y._data=tf(y._data,_);var E=y._size.reduce((g,D)=>g*D);return y._size=io(_,E),y};function d(_,m,y){for(var E=_._size.slice(0),g=!1;E.length<m.length;)E.push(0),g=!0;for(var D=0,b=m.length;D<b;D++)m[D]>E[D]&&(E[D]=m[D],g=!0);g&&l(_,E,y)}r.prototype.clone=function(){var _=new r({data:Wt(this._data),size:Wt(this._size),datatype:this._datatype});return _},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(_){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,y=this,E=y._size.length-1;if(E<0)return y.clone();var g=ws(_,y,"map",m),D=g.fn,b=y.create(void 0,y._datatype);if(b._size=y._size,m||g.isUnary)return b._data=T(y._data),b;if(E===0){for(var S=y.valueOf(),M=Array(S.length),F=0;F<S.length;F++)M[F]=D(S[F],[F],y);return b._data=M,b}var C=[];return b._data=A(y._data),b;function A(N){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=Array(N.length);if(I<E)for(var k=0;k<N.length;k++)C[I]=k,q[k]=A(N[k],I+1);else for(var W=0;W<N.length;W++)C[I]=W,q[W]=D(N[W],C.slice(),y);return q}function T(N){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=Array(N.length);if(I<E)for(var k=0;k<N.length;k++)q[k]=T(N[k],I+1);else for(var W=0;W<N.length;W++)q[W]=D(N[W]);return q}},r.prototype.forEach=function(_){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,y=this,E=y._size.length-1;if(E<0)return;var g=ws(_,y,"map",m),D=g.fn;if(m||g.isUnary){F(y._data);return}if(E===0){for(var b=0;b<y._data.length;b++)D(y._data[b],[b],y);return}var S=[];M(y._data);function M(C){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<E)for(var T=0;T<C.length;T++)S[A]=T,M(C[T],A+1);else for(var N=0;N<C.length;N++)S[A]=N,D(C[N],S.slice(),y)}function F(C){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(A<E)for(var T=0;T<C.length;T++)F(C[T],A+1);else for(var N=0;N<C.length;N++)D(C[N])}},r.prototype[Symbol.iterator]=function*(){var _=this._size.length-1;if(!(_<0)){if(_===0){for(var m=0;m<this._data.length;m++)yield{value:this._data[m],index:[m]};return}for(var y=Array(_+1).fill(0),E=this._size.reduce((M,F)=>M*F,1),g=0;g<E;g++){for(var D=this._data,b=0;b<_;b++)D=D[y[b]];yield{value:D[y[_]],index:y.slice()};for(var S=_;S>=0&&(y[S]++,!(y[S]<this._size[S]));S--)y[S]=0}}},r.prototype.rows=function(){var _=[],m=this.size();if(m.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var y=this._data;for(var E of y)_.push(new r([E],this._datatype));return _},r.prototype.columns=function(){var _=this,m=[],y=this.size();if(y.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var E=this._data,g=function(S){var M=E.map(F=>[F[S]]);m.push(new r(M,_._datatype))},D=0;D<y[1];D++)g(D);return m},r.prototype.toArray=function(){return Wt(this._data)},r.prototype.valueOf=function(){return this._data},r.prototype.format=function(_){return Qt(this._data,_)},r.prototype.toString=function(){return Qt(this._data)},r.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(_){if(_){if(ae(_)&&(_=_.toNumber()),!Rt(_)||!fe(_))throw new TypeError("The parameter k must be an integer number")}else _=0;for(var m=_>0?_:0,y=_<0?-_:0,E=this._size[0],g=this._size[1],D=Math.min(E-y,g-m),b=[],S=0;S<D;S++)b[S]=this._data[S+y][S+m];return new r({data:b,size:[D],datatype:this._datatype})},r.diagonal=function(_,m,y,E){if(!ue(_))throw new TypeError("Array expected, size parameter");if(_.length!==2)throw new Error("Only two dimensions matrix are supported");if(_=_.map(function(N){if(ae(N)&&(N=N.toNumber()),!Rt(N)||!fe(N)||N<1)throw new Error("Size values must be positive integers");return N}),y){if(ae(y)&&(y=y.toNumber()),!Rt(y)||!fe(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var g=y>0?y:0,D=y<0?-y:0,b=_[0],S=_[1],M=Math.min(b-D,S-g),F;if(ue(m)){if(m.length!==M)throw new Error("Invalid value array length");F=function(I){return m[I]}}else if(oe(m)){var C=m.size();if(C.length!==1||C[0]!==M)throw new Error("Invalid matrix length");F=function(I){return m.get([I])}}else F=function(){return m};E||(E=ae(F(0))?F(0).mul(0):0);var A=[];if(_.length>0){A=Ga(A,_,E);for(var T=0;T<M;T++)A[T+D][T+g]=F(T)}return new r({data:A,size:[b,S]})},r.fromJSON=function(_){return new r(_)},r.prototype.swapRows=function(_,m){if(!Rt(_)||!fe(_)||!Rt(m)||!fe(m))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(_,this._size[0]),Yt(m,this._size[0]),r._swapRows(_,m,this._data),this},r._swapRows=function(_,m,y){var E=y[_];y[_]=y[m],y[m]=E};function v(_){return oe(_)?v(_.valueOf()):ue(_)?_.map(v):_}return r},{isClass:!0});function Hi(t,e,n){if(!n)return oe(t)?t.map(s=>e(s),!1,!0):Gu(t,e,!0);var r=s=>s===0?s:e(s);return oe(t)?t.map(s=>r(s),!1,!0):Gu(t,r,!0)}var uf="number",ro="number, number";function hf(t){return Math.abs(t)}hf.signature=uf;function ff(t,e){return t+e}ff.signature=ro;function lf(t,e){return t-e}lf.signature=ro;function cf(t,e){return t*e}cf.signature=ro;function df(t){return-t}df.signature=uf;function hp(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(n<=0)throw new Error("Relative tolerance must be greater than 0");if(r<0)throw new Error("Absolute tolerance must be at least 0");return t.isNaN()||e.isNaN()?!1:!t.isFinite()||!e.isFinite()?t.eq(e):t.eq(e)?!0:t.minus(e).abs().lte(t.constructor.max(t.constructor.max(t.abs(),e.abs()).mul(n),r))}var Ru="isZero",fp=["typed","equalScalar"],lp=Bt(Ru,fp,t=>{var{typed:e,equalScalar:n}=t;return e(Ru,{"number | BigNumber | Complex | Fraction":r=>n(r,0),bigint:r=>r===0n,Unit:e.referToSelf(r=>s=>e.find(r,s.valueType())(s.value)),"Array | Matrix":e.referToSelf(r=>s=>Hi(s,r))})});function cp(t,e,n,r){return vs(t.re,e.re,n,r)&&vs(t.im,e.im,n,r)}var dp=Bt("compareUnits",["typed"],t=>{var{typed:e}=t;return{"Unit, Unit":e.referToSelf(n=>(r,s)=>{if(!r.equalBase(s))throw new Error("Cannot compare units with different base");return e.find(n,[r.valueType(),s.valueType()])(r.value,s.value)})}}),Ds="equalScalar",_p=["typed","config"],mp=Bt(Ds,_p,t=>{var{typed:e,config:n}=t,r=dp({typed:e});return e(Ds,{"boolean, boolean":function(o,h){return o===h},"number, number":function(o,h){return vs(o,h,n.relTol,n.absTol)},"BigNumber, BigNumber":function(o,h){return o.eq(h)||hp(o,h,n.relTol,n.absTol)},"bigint, bigint":function(o,h){return o===h},"Fraction, Fraction":function(o,h){return o.equals(h)},"Complex, Complex":function(o,h){return cp(o,h,n.relTol,n.absTol)}},r)});Bt(Ds,["typed","config"],t=>{var{typed:e,config:n}=t;return e(Ds,{"number, number":function(s,o){return vs(s,o,n.relTol,n.absTol)}})});var vp="SparseMatrix",pp=["typed","equalScalar","Matrix"],gp=Bt(vp,pp,t=>{var{typed:e,equalScalar:n,Matrix:r}=t;function s(g,D){if(!(this instanceof s))throw new SyntaxError("Constructor must be called with the new operator");if(D&&!ri(D))throw new Error("Invalid datatype: "+D);if(oe(g))o(this,g,D);else if(g&&ue(g.index)&&ue(g.ptr)&&ue(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=D||g.datatype;else if(ue(g))h(this,g,D);else{if(g)throw new TypeError("Unsupported type of data ("+xi(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=D}}function o(g,D,b){D.type==="SparseMatrix"?(g._values=D._values?Wt(D._values):void 0,g._index=Wt(D._index),g._ptr=Wt(D._ptr),g._size=Wt(D._size),g._datatype=b||D._datatype):h(g,D.valueOf(),b||D._datatype)}function h(g,D,b){g._values=[],g._index=[],g._ptr=[],g._datatype=b;var S=D.length,M=0,F=n,C=0;if(ri(b)&&(F=e.find(n,[b,b])||n,C=e.convert(0,b)),S>0){var A=0;do{g._ptr.push(g._index.length);for(var T=0;T<S;T++){var N=D[T];if(ue(N)){if(A===0&&M<N.length&&(M=N.length),A<N.length){var I=N[A];F(I,C)||(g._values.push(I),g._index.push(T))}}else A===0&&M<1&&(M=1),F(N,C)||(g._values.push(N),g._index.push(T))}A++}while(A<M)}for(;g._ptr.length<=M;)g._ptr.push(g._index.length);g._size=[S,M]}s.prototype=new r,s.prototype.createSparseMatrix=function(g,D){return new s(g,D)},Object.defineProperty(s,"name",{value:"SparseMatrix"}),s.prototype.constructor=s,s.prototype.type="SparseMatrix",s.prototype.isSparseMatrix=!0,s.prototype.getDataType=function(){return no(this._values,xi)},s.prototype.storage=function(){return"sparse"},s.prototype.datatype=function(){return this._datatype},s.prototype.create=function(g,D){return new s(g,D)},s.prototype.density=function(){var g=this._size[0],D=this._size[1];return g!==0&&D!==0?this._index.length/(g*D):0},s.prototype.subset=function(g,D,b){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return f(this,g);case 2:case 3:return l(this,g,D,b);default:throw new SyntaxError("Wrong number of arguments")}};function f(g,D){if(!Ya(D))throw new TypeError("Invalid index");var b=D.isScalar();if(b)return g.get(D.min());var S=D.size();if(S.length!==g._size.length)throw new $t(S.length,g._size.length);var M,F,C,A,T=D.min(),N=D.max();for(M=0,F=g._size.length;M<F;M++)Yt(T[M],g._size[M]),Yt(N[M],g._size[M]);var I=g._values,q=g._index,k=g._ptr,W=D.dimension(0),at=D.dimension(1),ot=[],ut=[];function K(ft,wt){ut[ft]=wt[0],ot[ft]=!0}Number.isInteger(W)?K(W,[0]):W.forEach(K);var _t=I?[]:void 0,J=[],mt=[];function Q(ft){for(mt.push(J.length),C=k[ft],A=k[ft+1];C<A;C++)M=q[C],ot[M]===!0&&(J.push(ut[M]),_t&&_t.push(I[C]))}return Number.isInteger(at)?Q(at):at.forEach(Q),mt.push(J.length),new s({values:_t,index:J,ptr:mt,size:S,datatype:g._datatype})}function l(g,D,b,S){if(!D||D.isIndex!==!0)throw new TypeError("Invalid index");var M=D.size(),F=D.isScalar(),C;if(oe(b)?(C=b.size(),b=b.toArray()):C=Be(b),F){if(C.length!==0)throw new TypeError("Scalar expected");g.set(D.min(),b,S)}else{if(M.length!==1&&M.length!==2)throw new $t(M.length,g._size.length,"<");if(C.length<M.length){for(var A=0,T=0;M[A]===1&&C[A]===1;)A++;for(;M[A]===1;)T++,A++;b=nf(b,M.length,T,C)}if(!Dn(M,C))throw new $t(M,C,">");if(M.length===1){var N=D.dimension(0);k(N,(W,at)=>{Yt(W),g.set([W,0],b[at[0]],S)})}else{var I=D.dimension(0),q=D.dimension(1);k(I,(W,at)=>{Yt(W),k(q,(ot,ut)=>{Yt(ot),g.set([W,ot],b[at[0]][ut[0]],S)})})}}return g;function k(W,at){Rt(W)?at(W,[0]):W.forEach(at)}}s.prototype.get=function(g){if(!ue(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new $t(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var D=g[0],b=g[1];Yt(D,this._size[0]),Yt(b,this._size[1]);var S=d(D,this._ptr[b],this._ptr[b+1],this._index);return S<this._ptr[b+1]&&this._index[S]===D?this._values[S]:0},s.prototype.set=function(g,D,b){if(!ue(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new $t(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var S=g[0],M=g[1],F=this._size[0],C=this._size[1],A=n,T=0;ri(this._datatype)&&(A=e.find(n,[this._datatype,this._datatype])||n,T=e.convert(0,this._datatype)),(S>F-1||M>C-1)&&(m(this,Math.max(S+1,F),Math.max(M+1,C),b),F=this._size[0],C=this._size[1]),Yt(S,F),Yt(M,C);var N=d(S,this._ptr[M],this._ptr[M+1],this._index);return N<this._ptr[M+1]&&this._index[N]===S?A(D,T)?v(N,M,this._values,this._index,this._ptr):this._values[N]=D:A(D,T)||_(N,S,M,D,this._values,this._index,this._ptr),this};function d(g,D,b,S){if(b-D===0)return b;for(var M=D;M<b;M++)if(S[M]===g)return M;return D}function v(g,D,b,S,M){b.splice(g,1),S.splice(g,1);for(var F=D+1;F<M.length;F++)M[F]--}function _(g,D,b,S,M,F,C){M.splice(g,0,S),F.splice(g,0,D);for(var A=b+1;A<C.length;A++)C[A]++}s.prototype.resize=function(g,D,b){if(!ds(g))throw new TypeError("Array or Matrix expected");var S=g.valueOf().map(F=>Array.isArray(F)&&F.length===1?F[0]:F);if(S.length!==2)throw new Error("Only two dimensions matrix are supported");S.forEach(function(F){if(!Rt(F)||!fe(F)||F<0)throw new TypeError("Invalid size, must contain positive integers (size: "+Qt(S)+")")});var M=b?this.clone():this;return m(M,S[0],S[1],D)};function m(g,D,b,S){var M=S||0,F=n,C=0;ri(g._datatype)&&(F=e.find(n,[g._datatype,g._datatype])||n,C=e.convert(0,g._datatype),M=e.convert(M,g._datatype));var A=!F(M,C),T=g._size[0],N=g._size[1],I,q,k;if(b>N){for(q=N;q<b;q++)if(g._ptr[q]=g._values.length,A)for(I=0;I<T;I++)g._values.push(M),g._index.push(I);g._ptr[b]=g._values.length}else b<N&&(g._ptr.splice(b+1,N-b),g._values.splice(g._ptr[b],g._values.length),g._index.splice(g._ptr[b],g._index.length));if(N=b,D>T){if(A){var W=0;for(q=0;q<N;q++){g._ptr[q]=g._ptr[q]+W,k=g._ptr[q+1]+W;var at=0;for(I=T;I<D;I++,at++)g._values.splice(k+at,0,M),g._index.splice(k+at,0,I),W++}g._ptr[N]=g._values.length}}else if(D<T){var ot=0;for(q=0;q<N;q++){g._ptr[q]=g._ptr[q]-ot;var ut=g._ptr[q],K=g._ptr[q+1]-ot;for(k=ut;k<K;k++)I=g._index[k],I>D-1&&(g._values.splice(k,1),g._index.splice(k,1),ot++)}g._ptr[q]=g._values.length}return g._size[0]=D,g._size[1]=b,g}s.prototype.reshape=function(g,D){if(!ue(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(mt){if(!Rt(mt)||!fe(mt)||mt<=-2||mt===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+Qt(g)+")")});var b=this._size[0]*this._size[1];g=io(g,b);var S=g[0]*g[1];if(b!==S)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var M=D?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return M;for(var F=[],C=0;C<M._ptr.length;C++)for(var A=0;A<M._ptr[C+1]-M._ptr[C];A++)F.push(C);for(var T=M._values.slice(),N=M._index.slice(),I=0;I<M._index.length;I++){var q=N[I],k=F[I],W=q*M._size[1]+k;F[I]=W%g[1],N[I]=Math.floor(W/g[1])}M._values.length=0,M._index.length=0,M._ptr.length=g[1]+1,M._size=g.slice();for(var at=0;at<M._ptr.length;at++)M._ptr[at]=0;for(var ot=0;ot<T.length;ot++){var ut=N[ot],K=F[ot],_t=T[ot],J=d(ut,M._ptr[K],M._ptr[K+1],M._index);_(J,ut,K,_t,M._values,M._index,M._ptr)}return M},s.prototype.clone=function(){var g=new s({values:this._values?Wt(this._values):void 0,index:Wt(this._index),ptr:Wt(this._ptr),size:Wt(this._size),datatype:this._datatype});return g},s.prototype.size=function(){return this._size.slice(0)},s.prototype.map=function(g,D){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var b=this,S=this._size[0],M=this._size[1],F=ws(g,b,"map"),C=function(T,N,I){return F.fn(T,[N,I],b)};return y(this,0,S-1,0,M-1,C,D)};function y(g,D,b,S,M,F,C){var A=[],T=[],N=[],I=n,q=0;ri(g._datatype)&&(I=e.find(n,[g._datatype,g._datatype])||n,q=e.convert(0,g._datatype));for(var k=function(Et,At,gt){var ct=F(Et,At,gt);I(ct,q)||(A.push(ct),T.push(At))},W=S;W<=M;W++){N.push(A.length);var at=g._ptr[W],ot=g._ptr[W+1];if(C)for(var ut=at;ut<ot;ut++){var K=g._index[ut];K>=D&&K<=b&&k(g._values[ut],K-D,W-S)}else{for(var _t={},J=at;J<ot;J++){var mt=g._index[J];_t[mt]=g._values[J]}for(var Q=D;Q<=b;Q++){var ft=Q in _t?_t[Q]:0;k(ft,Q-D,W-S)}}}return N.push(A.length),new s({values:A,index:T,ptr:N,size:[b-D+1,M-S+1]})}s.prototype.forEach=function(g,D){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var b=this,S=this._size[0],M=this._size[1],F=ws(g,b,"forEach"),C=0;C<M;C++){var A=this._ptr[C],T=this._ptr[C+1];if(D)for(var N=A;N<T;N++){var I=this._index[N];F.fn(this._values[N],[I,C],b)}else{for(var q={},k=A;k<T;k++){var W=this._index[k];q[W]=this._values[k]}for(var at=0;at<S;at++){var ot=at in q?q[at]:0;F.fn(ot,[at,C],b)}}}},s.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],D=0;D<g;D++)for(var b=this._ptr[D],S=this._ptr[D+1],M=b;M<S;M++){var F=this._index[M];yield{value:this._values[M],index:[F,D]}}},s.prototype.toArray=function(){return E(this._values,this._index,this._ptr,this._size,!0)},s.prototype.valueOf=function(){return E(this._values,this._index,this._ptr,this._size,!1)};function E(g,D,b,S,M){var F=S[0],C=S[1],A=[],T,N;for(T=0;T<F;T++)for(A[T]=[],N=0;N<C;N++)A[T][N]=0;for(N=0;N<C;N++)for(var I=b[N],q=b[N+1],k=I;k<q;k++)T=D[k],A[T][N]=g?M?Wt(g[k]):g[k]:1;return A}return s.prototype.format=function(g){for(var D=this._size[0],b=this._size[1],S=this.density(),M="Sparse Matrix ["+Qt(D,g)+" x "+Qt(b,g)+"] density: "+Qt(S,g)+`
`,F=0;F<b;F++)for(var C=this._ptr[F],A=this._ptr[F+1],T=C;T<A;T++){var N=this._index[T];M+=`
    (`+Qt(N,g)+", "+Qt(F,g)+") ==> "+(this._values?Qt(this._values[T],g):"X")}return M},s.prototype.toString=function(){return Qt(this.toArray())},s.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},s.prototype.diagonal=function(g){if(g){if(ae(g)&&(g=g.toNumber()),!Rt(g)||!fe(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var D=g>0?g:0,b=g<0?-g:0,S=this._size[0],M=this._size[1],F=Math.min(S-b,M-D),C=[],A=[],T=[];T[0]=0;for(var N=D;N<M&&C.length<F;N++)for(var I=this._ptr[N],q=this._ptr[N+1],k=I;k<q;k++){var W=this._index[k];if(W===N-D+b){C.push(this._values[k]),A[C.length-1]=W-b;break}}return T.push(C.length),new s({values:C,index:A,ptr:T,size:[F,1]})},s.fromJSON=function(g){return new s(g)},s.diagonal=function(g,D,b,S,M){if(!ue(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(mt){if(ae(mt)&&(mt=mt.toNumber()),!Rt(mt)||!fe(mt)||mt<1)throw new Error("Size values must be positive integers");return mt}),b){if(ae(b)&&(b=b.toNumber()),!Rt(b)||!fe(b))throw new TypeError("The parameter k must be an integer number")}else b=0;var F=n,C=0;ri(M)&&(F=e.find(n,[M,M])||n,C=e.convert(0,M));var A=b>0?b:0,T=b<0?-b:0,N=g[0],I=g[1],q=Math.min(N-T,I-A),k;if(ue(D)){if(D.length!==q)throw new Error("Invalid value array length");k=function(Q){return D[Q]}}else if(oe(D)){var W=D.size();if(W.length!==1||W[0]!==q)throw new Error("Invalid matrix length");k=function(Q){return D.get([Q])}}else k=function(){return D};for(var at=[],ot=[],ut=[],K=0;K<I;K++){ut.push(at.length);var _t=K-A;if(_t>=0&&_t<q){var J=k(_t);F(J,C)||(ot.push(_t+T),at.push(J))}}return ut.push(at.length),new s({values:at,index:ot,ptr:ut,size:[N,I]})},s.prototype.swapRows=function(g,D){if(!Rt(g)||!fe(g)||!Rt(D)||!fe(D))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Yt(g,this._size[0]),Yt(D,this._size[0]),s._swapRows(g,D,this._size[1],this._values,this._index,this._ptr),this},s._forEachRow=function(g,D,b,S,M){for(var F=S[g],C=S[g+1],A=F;A<C;A++)M(b[A],D[A])},s._swapRows=function(g,D,b,S,M,F){for(var C=0;C<b;C++){var A=F[C],T=F[C+1],N=d(g,A,T,M),I=d(D,A,T,M);if(N<T&&I<T&&M[N]===g&&M[I]===D){if(S){var q=S[N];S[N]=S[I],S[I]=q}continue}if(N<T&&M[N]===g&&(I>=T||M[I]!==D)){var k=S?S[N]:void 0;M.splice(I,0,D),S&&S.splice(I,0,k),M.splice(I<=N?N+1:N,1),S&&S.splice(I<=N?N+1:N,1);continue}if(I<T&&M[I]===D&&(N>=T||M[N]!==g)){var W=S?S[I]:void 0;M.splice(N,0,g),S&&S.splice(N,0,W),M.splice(N<=I?I+1:I,1),S&&S.splice(N<=I?I+1:I,1)}}},s},{isClass:!0}),yp="number",wp=["typed"];function Dp(t){var e=t.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var n={"0b":2,"0o":8,"0x":16}[e[1]],r=e[2],s=e[3];return{input:t,radix:n,integerPart:r,fractionalPart:s}}else return null}function Ep(t){for(var e=parseInt(t.integerPart,t.radix),n=0,r=0;r<t.fractionalPart.length;r++){var s=parseInt(t.fractionalPart[r],t.radix);n+=s/Math.pow(t.radix,r+1)}var o=e+n;if(isNaN(o))throw new SyntaxError('String "'+t.input+'" is not a valid number');return o}var Mp=Bt(yp,wp,t=>{var{typed:e}=t,n=e("number",{"":function(){return 0},number:function(s){return s},string:function(s){if(s==="NaN")return NaN;var o=Dp(s);if(o)return Ep(o);var h=0,f=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);f&&(h=Number(f[2]),s=f[1]);var l=Number(s);if(isNaN(l))throw new SyntaxError('String "'+s+'" is not a valid number');if(f){if(l>2**h-1)throw new SyntaxError('String "'.concat(s,'" is out of range'));l>=2**(h-1)&&(l=l-2**h)}return l},BigNumber:function(s){return s.toNumber()},bigint:function(s){return Number(s)},Fraction:function(s){return s.valueOf()},Unit:e.referToSelf(r=>s=>{var o=s.clone();return o.value=r(s.value),o}),null:function(s){return 0},"Unit, string | Unit":function(s,o){return s.toNumber(o)},"Array | Matrix":e.referToSelf(r=>s=>Hi(s,r))});return n.fromJSON=function(r){return parseFloat(r.value)},n}),Ap="bignumber",Cp=["typed","BigNumber"],bp=Bt(Ap,Cp,t=>{var{typed:e,BigNumber:n}=t;return e("bignumber",{"":function(){return new n(0)},number:function(s){return new n(s+"")},string:function(s){var o=s.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(o){var h=o[2],f=n(o[1]),l=new n(2).pow(Number(h));if(f.gt(l.sub(1)))throw new SyntaxError('String "'.concat(s,'" is out of range'));var d=new n(2).pow(Number(h)-1);return f.gte(d)?f.sub(l):f}return new n(s)},BigNumber:function(s){return s},bigint:function(s){return new n(s.toString())},Unit:e.referToSelf(r=>s=>{var o=s.clone();return o.value=r(s.value),o}),Fraction:function(s){return new n(String(s.n)).div(String(s.d)).times(String(s.s))},null:function(s){return new n(0)},"Array | Matrix":e.referToSelf(r=>s=>Hi(s,r))})}),xp="fraction",Sp=["typed","Fraction"],Pp=Bt(xp,Sp,t=>{var{typed:e,Fraction:n}=t;return e("fraction",{number:function(s){if(!Number.isFinite(s)||isNaN(s))throw new Error(s+" cannot be represented as a fraction");return new n(s)},string:function(s){return new n(s)},"number, number":function(s,o){return new n(s,o)},"bigint, bigint":function(s,o){return new n(s,o)},null:function(s){return new n(0)},BigNumber:function(s){return new n(s.toString())},bigint:function(s){return new n(s.toString())},Fraction:function(s){return s},Unit:e.referToSelf(r=>s=>{var o=s.clone();return o.value=r(s.value),o}),Object:function(s){return new n(s)},"Array | Matrix":e.referToSelf(r=>s=>Hi(s,r))})}),ku="matrix",Fp=["typed","Matrix","DenseMatrix","SparseMatrix"],Np=Bt(ku,Fp,t=>{var{typed:e,Matrix:n,DenseMatrix:r,SparseMatrix:s}=t;return e(ku,{"":function(){return o([])},string:function(f){return o([],f)},"string, string":function(f,l){return o([],f,l)},Array:function(f){return o(f)},Matrix:function(f){return o(f,f.storage())},"Array | Matrix, string":o,"Array | Matrix, string, string":o});function o(h,f,l){if(f==="dense"||f==="default"||f===void 0)return new r(h,l);if(f==="sparse")return new s(h,l);throw new TypeError("Unknown matrix type "+JSON.stringify(f)+".")}}),Zu="unaryMinus",Tp=["typed"],Bp=Bt(Zu,Tp,t=>{var{typed:e}=t;return e(Zu,{number:df,"Complex | BigNumber | Fraction":n=>n.neg(),bigint:n=>-n,Unit:e.referToSelf(n=>r=>{var s=r.clone();return s.value=e.find(n,s.valueType())(r.value),s}),"Array | Matrix":e.referToSelf(n=>r=>Hi(r,n,!0))})}),qu="abs",Lp=["typed"],Ip=Bt(qu,Lp,t=>{var{typed:e}=t;return e(qu,{number:hf,"Complex | BigNumber | Fraction | Unit":n=>n.abs(),bigint:n=>n<0n?-n:n,"Array | Matrix":e.referToSelf(n=>r=>Hi(r,n,!0))})}),Uu="addScalar",Op=["typed"],Gp=Bt(Uu,Op,t=>{var{typed:e}=t;return e(Uu,{"number, number":ff,"Complex, Complex":function(r,s){return r.add(s)},"BigNumber, BigNumber":function(r,s){return r.plus(s)},"bigint, bigint":function(r,s){return r+s},"Fraction, Fraction":function(r,s){return r.add(s)},"Unit, Unit":e.referToSelf(n=>(r,s)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(s))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(n,[o.valueType(),s.valueType()])(o.value,s.value),o.fixPrefix=!1,o})})}),Wu="subtractScalar",zp=["typed"],Rp=Bt(Wu,zp,t=>{var{typed:e}=t;return e(Wu,{"number, number":lf,"Complex, Complex":function(r,s){return r.sub(s)},"BigNumber, BigNumber":function(r,s){return r.minus(s)},"bigint, bigint":function(r,s){return r-s},"Fraction, Fraction":function(r,s){return r.sub(s)},"Unit, Unit":e.referToSelf(n=>(r,s)=>{if(r.value===null||r.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(s.value===null||s.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!r.equalBase(s))throw new Error("Units do not match");var o=r.clone();return o.value=e.find(n,[o.valueType(),s.valueType()])(o.value,s.value),o.fixPrefix=!1,o})})}),kp="matAlgo11xS0s",Zp=["typed","equalScalar"],qp=Bt(kp,Zp,t=>{var{typed:e,equalScalar:n}=t;return function(s,o,h,f){var l=s._values,d=s._index,v=s._ptr,_=s._size,m=s._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var y=_[0],E=_[1],g,D=n,b=0,S=h;typeof m=="string"&&(g=m,D=e.find(n,[g,g]),b=e.convert(0,g),o=e.convert(o,g),S=e.find(h,[g,g]));for(var M=[],F=[],C=[],A=0;A<E;A++){C[A]=F.length;for(var T=v[A],N=v[A+1],I=T;I<N;I++){var q=d[I],k=f?S(o,l[I]):S(l[I],o);D(k,b)||(F.push(q),M.push(k))}}return C[E]=F.length,s.createSparseMatrix({values:M,index:F,ptr:C,size:[y,E],datatype:g})}}),Up="matAlgo14xDs",Wp=["typed"],$p=Bt(Up,Wp,t=>{var{typed:e}=t;return function(s,o,h,f){var l=s._data,d=s._size,v=s._datatype,_,m=h;typeof v=="string"&&(_=v,o=e.convert(o,_),m=e.find(h,[_,_]));var y=d.length>0?n(m,0,d,d[0],l,o,f):[];return s.createDenseMatrix({data:y,size:Wt(d),datatype:_})};function n(r,s,o,h,f,l,d){var v=[];if(s===o.length-1)for(var _=0;_<h;_++)v[_]=d?r(l,f[_]):r(f[_],l);else for(var m=0;m<h;m++)v[m]=n(r,s+1,o,o[s+1],f[m],l,d);return v}}),Hp="multiplyScalar",jp=["typed"],Vp=Bt(Hp,jp,t=>{var{typed:e}=t;return e("multiplyScalar",{"number, number":cf,"Complex, Complex":function(r,s){return r.mul(s)},"BigNumber, BigNumber":function(r,s){return r.times(s)},"bigint, bigint":function(r,s){return r*s},"Fraction, Fraction":function(r,s){return r.mul(s)},"number | Fraction | BigNumber | Complex, Unit":(n,r)=>r.multiply(n),"Unit, number | Fraction | BigNumber | Complex | Unit":(n,r)=>n.multiply(r)})}),$u="multiply",Xp=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],Kp=Bt($u,Xp,t=>{var{typed:e,matrix:n,addScalar:r,multiplyScalar:s,equalScalar:o,dot:h}=t,f=qp({typed:e,equalScalar:o}),l=$p({typed:e});function d(C,A){switch(C.length){case 1:switch(A.length){case 1:if(C[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;case 2:switch(A.length){case 1:if(C[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+A[0]+")");break;case 2:if(C[1]!==A[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+A[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+A.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function v(C,A,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return h(C,A)}function _(C,A){if(A.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return m(C,A)}function m(C,A){var T=C._data,N=C._size,I=C._datatype||C.getDataType(),q=A._data,k=A._size,W=A._datatype||A.getDataType(),at=N[0],ot=k[1],ut,K=r,_t=s;I&&W&&I===W&&typeof I=="string"&&I!=="mixed"&&(ut=I,K=e.find(r,[ut,ut]),_t=e.find(s,[ut,ut]));for(var J=[],mt=0;mt<ot;mt++){for(var Q=_t(T[0],q[0][mt]),ft=1;ft<at;ft++)Q=K(Q,_t(T[ft],q[ft][mt]));J[mt]=Q}return C.createDenseMatrix({data:J,size:[ot],datatype:I===C._datatype&&W===A._datatype?ut:void 0})}var y=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":S}),E=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":D,"DenseMatrix, SparseMatrix":b,"SparseMatrix, DenseMatrix":M,"SparseMatrix, SparseMatrix":F});function g(C,A){var T=C._data,N=C._size,I=C._datatype||C.getDataType(),q=A._data,k=A._datatype||A.getDataType(),W=N[0],at=N[1],ot,ut=r,K=s;I&&k&&I===k&&typeof I=="string"&&I!=="mixed"&&(ot=I,ut=e.find(r,[ot,ot]),K=e.find(s,[ot,ot]));for(var _t=[],J=0;J<W;J++){for(var mt=T[J],Q=K(mt[0],q[0]),ft=1;ft<at;ft++)Q=ut(Q,K(mt[ft],q[ft]));_t[J]=Q}return C.createDenseMatrix({data:_t,size:[W],datatype:I===C._datatype&&k===A._datatype?ot:void 0})}function D(C,A){var T=C._data,N=C._size,I=C._datatype||C.getDataType(),q=A._data,k=A._size,W=A._datatype||A.getDataType(),at=N[0],ot=N[1],ut=k[1],K,_t=r,J=s;I&&W&&I===W&&typeof I=="string"&&I!=="mixed"&&I!=="mixed"&&(K=I,_t=e.find(r,[K,K]),J=e.find(s,[K,K]));for(var mt=[],Q=0;Q<at;Q++){var ft=T[Q];mt[Q]=[];for(var wt=0;wt<ut;wt++){for(var Et=J(ft[0],q[0][wt]),At=1;At<ot;At++)Et=_t(Et,J(ft[At],q[At][wt]));mt[Q][wt]=Et}}return C.createDenseMatrix({data:mt,size:[at,ut],datatype:I===C._datatype&&W===A._datatype?K:void 0})}function b(C,A){var T=C._data,N=C._size,I=C._datatype||C.getDataType(),q=A._values,k=A._index,W=A._ptr,at=A._size,ot=A._datatype||A._data===void 0?A._datatype:A.getDataType();if(!q)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var ut=N[0],K=at[1],_t,J=r,mt=s,Q=o,ft=0;I&&ot&&I===ot&&typeof I=="string"&&I!=="mixed"&&(_t=I,J=e.find(r,[_t,_t]),mt=e.find(s,[_t,_t]),Q=e.find(o,[_t,_t]),ft=e.convert(0,_t));for(var wt=[],Et=[],At=[],gt=A.createSparseMatrix({values:wt,index:Et,ptr:At,size:[ut,K],datatype:I===C._datatype&&ot===A._datatype?_t:void 0}),ct=0;ct<K;ct++){At[ct]=Et.length;var St=W[ct],qt=W[ct+1];if(qt>St)for(var Ot=0,Nt=0;Nt<ut;Nt++){for(var pe=Nt+1,Ht=void 0,Lt=St;Lt<qt;Lt++){var ne=k[Lt];Ot!==pe?(Ht=mt(T[Nt][ne],q[Lt]),Ot=pe):Ht=J(Ht,mt(T[Nt][ne],q[Lt]))}Ot===pe&&!Q(Ht,ft)&&(Et.push(Nt),wt.push(Ht))}}return At[K]=Et.length,gt}function S(C,A){var T=C._values,N=C._index,I=C._ptr,q=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var k=A._data,W=A._datatype||A.getDataType(),at=C._size[0],ot=A._size[0],ut=[],K=[],_t=[],J,mt=r,Q=s,ft=o,wt=0;q&&W&&q===W&&typeof q=="string"&&q!=="mixed"&&(J=q,mt=e.find(r,[J,J]),Q=e.find(s,[J,J]),ft=e.find(o,[J,J]),wt=e.convert(0,J));var Et=[],At=[];_t[0]=0;for(var gt=0;gt<ot;gt++){var ct=k[gt];if(!ft(ct,wt))for(var St=I[gt],qt=I[gt+1],Ot=St;Ot<qt;Ot++){var Nt=N[Ot];At[Nt]?Et[Nt]=mt(Et[Nt],Q(ct,T[Ot])):(At[Nt]=!0,K.push(Nt),Et[Nt]=Q(ct,T[Ot]))}}for(var pe=K.length,Ht=0;Ht<pe;Ht++){var Lt=K[Ht];ut[Ht]=Et[Lt]}return _t[1]=K.length,C.createSparseMatrix({values:ut,index:K,ptr:_t,size:[at,1],datatype:q===C._datatype&&W===A._datatype?J:void 0})}function M(C,A){var T=C._values,N=C._index,I=C._ptr,q=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var k=A._data,W=A._datatype||A.getDataType(),at=C._size[0],ot=A._size[0],ut=A._size[1],K,_t=r,J=s,mt=o,Q=0;q&&W&&q===W&&typeof q=="string"&&q!=="mixed"&&(K=q,_t=e.find(r,[K,K]),J=e.find(s,[K,K]),mt=e.find(o,[K,K]),Q=e.convert(0,K));for(var ft=[],wt=[],Et=[],At=C.createSparseMatrix({values:ft,index:wt,ptr:Et,size:[at,ut],datatype:q===C._datatype&&W===A._datatype?K:void 0}),gt=[],ct=[],St=0;St<ut;St++){Et[St]=wt.length;for(var qt=St+1,Ot=0;Ot<ot;Ot++){var Nt=k[Ot][St];if(!mt(Nt,Q))for(var pe=I[Ot],Ht=I[Ot+1],Lt=pe;Lt<Ht;Lt++){var ne=N[Lt];ct[ne]!==qt?(ct[ne]=qt,wt.push(ne),gt[ne]=J(Nt,T[Lt])):gt[ne]=_t(gt[ne],J(Nt,T[Lt]))}}for(var Me=Et[St],Ge=wt.length,Oe=Me;Oe<Ge;Oe++){var je=wt[Oe];ft[Oe]=gt[je]}}return Et[ut]=wt.length,At}function F(C,A){var T=C._values,N=C._index,I=C._ptr,q=C._datatype||C._data===void 0?C._datatype:C.getDataType(),k=A._values,W=A._index,at=A._ptr,ot=A._datatype||A._data===void 0?A._datatype:A.getDataType(),ut=C._size[0],K=A._size[1],_t=T&&k,J,mt=r,Q=s;q&&ot&&q===ot&&typeof q=="string"&&q!=="mixed"&&(J=q,mt=e.find(r,[J,J]),Q=e.find(s,[J,J]));for(var ft=_t?[]:void 0,wt=[],Et=[],At=C.createSparseMatrix({values:ft,index:wt,ptr:Et,size:[ut,K],datatype:q===C._datatype&&ot===A._datatype?J:void 0}),gt=_t?[]:void 0,ct=[],St,qt,Ot,Nt,pe,Ht,Lt,ne,Me=0;Me<K;Me++){Et[Me]=wt.length;var Ge=Me+1;for(pe=at[Me],Ht=at[Me+1],Nt=pe;Nt<Ht;Nt++)if(ne=W[Nt],_t)for(qt=I[ne],Ot=I[ne+1],St=qt;St<Ot;St++)Lt=N[St],ct[Lt]!==Ge?(ct[Lt]=Ge,wt.push(Lt),gt[Lt]=Q(k[Nt],T[St])):gt[Lt]=mt(gt[Lt],Q(k[Nt],T[St]));else for(qt=I[ne],Ot=I[ne+1],St=qt;St<Ot;St++)Lt=N[St],ct[Lt]!==Ge&&(ct[Lt]=Ge,wt.push(Lt));if(_t)for(var Oe=Et[Me],je=wt.length,gi=Oe;gi<je;gi++){var ji=wt[gi];ft[gi]=gt[ji]}}return Et[K]=wt.length,At}return e($u,s,{"Array, Array":e.referTo("Matrix, Matrix",C=>(A,T)=>{d(Be(A),Be(T));var N=C(n(A),n(T));return oe(N)?N.valueOf():N}),"Matrix, Matrix":function(A,T){var N=A.size(),I=T.size();return d(N,I),N.length===1?I.length===1?v(A,T,N[0]):_(A,T):I.length===1?y(A,T):E(A,T)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(A,T)=>C(A,n(T))),"Array, Matrix":e.referToSelf(C=>(A,T)=>C(n(A,T.storage()),T)),"SparseMatrix, any":function(A,T){return f(A,T,s,!1)},"DenseMatrix, any":function(A,T){return l(A,T,s,!1)},"any, SparseMatrix":function(A,T){return f(T,A,s,!0)},"any, DenseMatrix":function(A,T){return l(T,A,s,!0)},"Array, any":function(A,T){return l(n(A),T,s,!1).valueOf()},"any, Array":function(A,T){return l(n(T),A,s,!0).valueOf()},"any, any":s,"any, any, ...any":e.referToSelf(C=>(A,T,N)=>{for(var I=C(A,T),q=0;q<N.length;q++)I=C(I,N[q]);return I})})}),Hu="conj",Jp=["typed"],Yp=Bt(Hu,Jp,t=>{var{typed:e}=t;return e(Hu,{"number | BigNumber | Fraction":n=>n,Complex:n=>n.conjugate(),Unit:e.referToSelf(n=>r=>new r.constructor(n(r.toNumeric()),r.formatUnits())),"Array | Matrix":e.referToSelf(n=>r=>Hi(r,n))})}),ju="identity",Qp=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],tg=Bt(ju,Qp,t=>{var{typed:e,config:n,matrix:r,BigNumber:s,DenseMatrix:o,SparseMatrix:h}=t;return e(ju,{"":function(){return n.matrix==="Matrix"?r([]):[]},string:function(v){return r(v)},"number | BigNumber":function(v){return l(v,v,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(v,_){return l(v,v,_)},"number | BigNumber, number | BigNumber":function(v,_){return l(v,_,n.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(v,_,m){return l(v,_,m)},Array:function(v){return f(v)},"Array, string":function(v,_){return f(v,_)},Matrix:function(v){return f(v.valueOf(),v.storage())},"Matrix, string":function(v,_){return f(v.valueOf(),_)}});function f(d,v){switch(d.length){case 0:return v?r(v):[];case 1:return l(d[0],d[0],v);case 2:return l(d[0],d[1],v);default:throw new Error("Vector containing two values expected")}}function l(d,v,_){var m=ae(d)||ae(v)?s:null;if(ae(d)&&(d=d.toNumber()),ae(v)&&(v=v.toNumber()),!fe(d)||d<1)throw new Error("Parameters in function identity must be positive integers");if(!fe(v)||v<1)throw new Error("Parameters in function identity must be positive integers");var y=m?new s(1):1,E=m?new m(0):0,g=[d,v];if(_){if(_==="sparse")return h.diagonal(g,y,0,E);if(_==="dense")return o.diagonal(g,y,0,E);throw new TypeError('Unknown matrix type "'.concat(_,'"'))}for(var D=Ga([],g,E),b=d<v?d:v,S=0;S<b;S++)D[S][S]=y;return D}});function eg(){throw new Error('No "bignumber" implementation available')}function ig(){throw new Error('No "fraction" implementation available')}var Vu="size",ng=["typed"],rg=Bt(Vu,ng,t=>{var{typed:e}=t;return e(Vu,{Matrix:n=>n.size(),Array:Be,string:n=>[n.length],"number | Complex | BigNumber | Unit | boolean | null":n=>[]})}),Xu="transpose",sg=["typed","matrix"],ag=Bt(Xu,sg,t=>{var{typed:e,matrix:n}=t;return e(Xu,{Array:h=>r(n(h)).valueOf(),Matrix:r,any:Wt});function r(h){var f=h.size(),l;switch(f.length){case 1:l=h.clone();break;case 2:{var d=f[0],v=f[1];if(v===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+Qt(f)+")");switch(h.storage()){case"dense":l=s(h,d,v);break;case"sparse":l=o(h,d,v);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+Qt(f)+")")}return l}function s(h,f,l){for(var d=h._data,v=[],_,m=0;m<l;m++){_=v[m]=[];for(var y=0;y<f;y++)_[y]=Wt(d[y][m])}return h.createDenseMatrix({data:v,size:[l,f],datatype:h._datatype})}function o(h,f,l){for(var d=h._values,v=h._index,_=h._ptr,m=d?[]:void 0,y=[],E=[],g=[],D=0;D<f;D++)g[D]=0;var b,S,M;for(b=0,S=v.length;b<S;b++)g[v[b]]++;for(var F=0,C=0;C<f;C++)E.push(F),F+=g[C],g[C]=E[C];for(E.push(F),M=0;M<l;M++)for(var A=_[M],T=_[M+1],N=A;N<T;N++){var I=g[v[N]]++;y[I]=M,d&&(m[I]=Wt(d[N]))}return h.createSparseMatrix({values:m,index:y,ptr:E,size:[l,f],datatype:h._datatype})}}),og="numeric",ug=["number","?bignumber","?fraction"],hg=Bt(og,ug,t=>{var{number:e,bignumber:n,fraction:r}=t,s={string:!0,number:!0,BigNumber:!0,Fraction:!0},o={number:h=>e(h),BigNumber:n?h=>n(h):eg,bigint:h=>BigInt(h),Fraction:r?h=>r(h):ig};return function(f){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",d=arguments.length>2?arguments[2]:void 0;if(d!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var v=xi(f);if(!(v in s))throw new TypeError("Cannot convert "+f+' of type "'+v+'"; valid input types are '+Object.keys(s).join(", "));if(!(l in o))throw new TypeError("Cannot convert "+f+' to type "'+l+'"; valid output types are '+Object.keys(o).join(", "));return l===v?f:o[l](f)}}),Ku="divideScalar",fg=["typed","numeric"],lg=Bt(Ku,fg,t=>{var{typed:e,numeric:n}=t;return e(Ku,{"number, number":function(s,o){return s/o},"Complex, Complex":function(s,o){return s.div(o)},"BigNumber, BigNumber":function(s,o){return s.div(o)},"bigint, bigint":function(s,o){return s/o},"Fraction, Fraction":function(s,o){return s.div(o)},"Unit, number | Complex | Fraction | BigNumber | Unit":(r,s)=>r.divide(s),"number | Fraction | Complex | BigNumber, Unit":(r,s)=>s.divideInto(r)})}),Ju="dot",cg=["typed","addScalar","multiplyScalar","conj","size"],dg=Bt(Ju,cg,t=>{var{typed:e,addScalar:n,multiplyScalar:r,conj:s,size:o}=t;return e(Ju,{"Array | DenseMatrix, Array | DenseMatrix":f,"SparseMatrix, SparseMatrix":l});function h(d,v){var _=o(d),m=o(v),y,E;if(_.length===1)y=_[0];else if(_.length===2&&_[1]===1)y=_[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+_.join(", ")+")");if(m.length===1)E=m[0];else if(m.length===2&&m[1]===1)E=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(y!==E)throw new RangeError("Vectors must have equal length ("+y+" != "+E+")");if(y===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return y}function f(d,v){var _=h(d,v),m=oe(d)?d._data:d,y=oe(d)?d._datatype||d.getDataType():void 0,E=oe(v)?v._data:v,g=oe(v)?v._datatype||v.getDataType():void 0,D=o(d).length===2,b=o(v).length===2,S=n,M=r;if(y&&g&&y===g&&typeof y=="string"&&y!=="mixed"){var F=y;S=e.find(n,[F,F]),M=e.find(r,[F,F])}if(!D&&!b){for(var C=M(s(m[0]),E[0]),A=1;A<_;A++)C=S(C,M(s(m[A]),E[A]));return C}if(!D&&b){for(var T=M(s(m[0]),E[0][0]),N=1;N<_;N++)T=S(T,M(s(m[N]),E[N][0]));return T}if(D&&!b){for(var I=M(s(m[0][0]),E[0]),q=1;q<_;q++)I=S(I,M(s(m[q][0]),E[q]));return I}if(D&&b){for(var k=M(s(m[0][0]),E[0][0]),W=1;W<_;W++)k=S(k,M(s(m[W][0]),E[W][0]));return k}}function l(d,v){h(d,v);for(var _=d._index,m=d._values,y=v._index,E=v._values,g=0,D=n,b=r,S=0,M=0;S<_.length&&M<y.length;){var F=_[S],C=y[M];if(F<C){S++;continue}if(F>C){M++;continue}F===C&&(g=D(g,b(m[S],E[M])),S++,M++)}return g}}),Yu="det",_g=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],mg=Bt(Yu,_g,t=>{var{typed:e,matrix:n,subtractScalar:r,multiply:s,divideScalar:o,isZero:h,unaryMinus:f}=t;return e(Yu,{any:function(v){return Wt(v)},"Array | Matrix":function(v){var _;switch(oe(v)?_=v.size():Array.isArray(v)?(v=n(v),_=v.size()):_=[],_.length){case 0:return Wt(v);case 1:if(_[0]===1)return Wt(v.valueOf()[0]);if(_[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+Qt(_)+")");case 2:{var m=_[0],y=_[1];if(m===y)return l(v.clone().valueOf(),m);if(y===0)return 1;throw new RangeError("Matrix must be square (size: "+Qt(_)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(_)+")")}}});function l(d,v,_){if(v===1)return Wt(d[0][0]);if(v===2)return r(s(d[0][0],d[1][1]),s(d[1][0],d[0][1]));for(var m=!1,y=new Array(v).fill(0).map((T,N)=>N),E=0;E<v;E++){var g=y[E];if(h(d[g][E])){var D=void 0;for(D=E+1;D<v;D++)if(!h(d[y[D]][E])){g=y[D],y[D]=y[E],y[E]=g,m=!m;break}if(D===v)return d[g][E]}for(var b=d[g][E],S=E===0?1:d[y[E-1]][E-1],M=E+1;M<v;M++)for(var F=y[M],C=E+1;C<v;C++)d[F][C]=o(r(s(d[F][C],b),s(d[F][E],d[g][C])),S)}var A=d[y[v-1]][v-1];return m?f(A):A}}),Qu="inv",vg=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],pg=Bt(Qu,vg,t=>{var{typed:e,matrix:n,divideScalar:r,addScalar:s,multiply:o,unaryMinus:h,det:f,identity:l,abs:d}=t;return e(Qu,{"Array | Matrix":function(m){var y=oe(m)?m.size():Be(m);switch(y.length){case 1:if(y[0]===1)return oe(m)?n([r(1,m.valueOf()[0])]):[r(1,m[0])];throw new RangeError("Matrix must be square (size: "+Qt(y)+")");case 2:{var E=y[0],g=y[1];if(E===g)return oe(m)?n(v(m.valueOf(),E,g),m.storage()):v(m,E,g);throw new RangeError("Matrix must be square (size: "+Qt(y)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+Qt(y)+")")}},any:function(m){return r(1,m)}});function v(_,m,y){var E,g,D,b,S;if(m===1){if(b=_[0][0],b===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(1,b)]]}else if(m===2){var M=f(_);if(M===0)throw Error("Cannot calculate inverse, determinant is zero");return[[r(_[1][1],M),r(h(_[0][1]),M)],[r(h(_[1][0]),M),r(_[0][0],M)]]}else{var F=_.concat();for(E=0;E<m;E++)F[E]=F[E].concat();for(var C=l(m).valueOf(),A=0;A<y;A++){var T=d(F[A][A]),N=A;for(E=A+1;E<m;)d(F[E][A])>T&&(T=d(F[E][A]),N=E),E++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");E=N,E!==A&&(S=F[A],F[A]=F[E],F[E]=S,S=C[A],C[A]=C[E],C[E]=S);var I=F[A],q=C[A];for(E=0;E<m;E++){var k=F[E],W=C[E];if(E!==A){if(k[A]!==0){for(D=r(h(k[A]),I[A]),g=A;g<y;g++)k[g]=s(k[g],o(D,I[g]));for(g=0;g<y;g++)W[g]=s(W[g],o(D,q[g]))}}else{for(D=I[A],g=A;g<y;g++)k[g]=r(k[g],D);for(g=0;g<y;g++)W[g]=r(W[g],D)}}}return C}}}),so=Sv({config:_r}),gg=Bv({}),_f=Zv({}),ao=Wv({}),oo=up({Matrix:ao,config:_r}),ie=Nm({BigNumber:so,Complex:gg,DenseMatrix:oo,Fraction:_f}),yg=Ip({typed:ie}),uo=Gp({typed:ie}),wg=Yp({typed:ie}),ho=mp({config:_r,typed:ie}),mf=Vp({typed:ie}),Dg=Mp({typed:ie}),Eg=rg({typed:ie}),vf=gp({Matrix:ao,equalScalar:ho,typed:ie}),Mg=Rp({typed:ie}),Ag=bp({BigNumber:so,typed:ie}),Cg=dg({addScalar:uo,conj:wg,multiplyScalar:mf,size:Eg,typed:ie}),bg=lp({equalScalar:ho,typed:ie}),mr=Np({DenseMatrix:oo,Matrix:ao,SparseMatrix:vf,typed:ie}),vr=Kp({addScalar:uo,dot:Cg,equalScalar:ho,matrix:mr,multiplyScalar:mf,typed:ie}),xg=ag({matrix:mr,typed:ie}),Sg=Pp({Fraction:_f,typed:ie}),Pg=tg({BigNumber:so,DenseMatrix:oo,SparseMatrix:vf,config:_r,matrix:mr,typed:ie}),Fg=hg({bignumber:Ag,fraction:Sg,number:Dg}),pf=Bp({typed:ie}),gf=lg({numeric:Fg,typed:ie}),Ng=mg({divideScalar:gf,isZero:bg,matrix:mr,multiply:vr,subtractScalar:Mg,typed:ie,unaryMinus:pf}),yf=pg({abs:yg,addScalar:uo,det:Ng,divideScalar:gf,identity:Pg,matrix:mr,multiply:vr,typed:ie,unaryMinus:pf});const Tg={a:6378137,f:1/298.257223563},wf={a:6378245,f:1/298.3};Ti.defs("SK63_ZONE3","+proj=tmerc +lat_0=0 +lon_0=30 +k=1 +x_0=3300000 +y_0=0 +ellps=krass +units=m +no_defs");Ti.defs("WGS84","+proj=longlat +datum=WGS84 +no_defs");function Ra(t,e,n,r){const s=r.a,o=r.f,h=2*o-o*o,f=t*Math.PI/180,l=e*Math.PI/180,d=Math.sin(f),v=Math.cos(f),_=s/Math.sqrt(1-h*d*d),m=(_+n)*v*Math.cos(l),y=(_+n)*v*Math.sin(l),E=(_*(1-h)+n)*d;return[m,y,E]}const Bg=[[51.563757,28.02927,5706732322e-3,3198135314e-3],[51.372056,29.443621,5684379958e-3,3296192231e-3],[52.074389,30.970844,5763542888e-3,3400963652e-3],[50.371561,28.0023,5574149785e-3,3193571506e-3],[50.397948,29.522446,5576012288e-3,3301713619e-3],[50.334234,30.997821,5569997241e-3,3406756186e-3],[49.224276,28.005082,5446545388e-3,3191225509e-3],[49.188884,29.528927,544153378e-2,3302226322e-3],[49.072351,30.991869,5429645354e-3,3409120489e-3],[48.326519,28.001437,5346719207e-3,3188995383e-3],[48.361296,29.522812,5349500723e-3,3301808308e-3],[48.282156,30.990077,5341773905e-3,3410706155e-3],[47.329538,29.419758,523478532e-2,3294051836e-3],[47.308432,30.995825,5233520443e-3,3413226736e-3],[45.453211,28.289297,5026925006e-3,32054115e-1],[45.215474,29.745632,4999818325e-3,3319411207e-3],[46.592513,30.986793,5153920365e-3,3414052934e-3]],tr=[],es=[];Bg.forEach(([t,e,n,r])=>{const[s,o,h]=Ra(t,e,0,Tg),[f,l]=Ti("SK63_ZONE3","WGS84",[r,n]),[d,v,_]=Ra(l,f,0,wf);tr.push([1,0,0,0,_,-v,d]),tr.push([0,1,0,-_,0,d,v]),tr.push([0,0,1,v,-d,0,_]),es.push(s-d),es.push(o-v),es.push(h-_)});const Df=xg(tr),Lg=vr(Df,tr),Ig=vr(Df,es),Og=vr(yf(Lg),Ig),[Gg,zg,Rg,th,eh,ih,Ma]=Og;function kg(t=[]){const e=[];for(const[n,r]of t){const[s,o]=Ti("SK63_ZONE3","WGS84",[n,r]),[h,f,l]=Ra(o,s,0,wf),d=Gg+(1+Ma)*h-ih*f+eh*l,v=zg+ih*h+(1+Ma)*f-th*l,_=Rg-eh*h+th*f+(1+Ma)*l,m=Math.atan2(v,d),y=Math.sqrt(d*d+v*v);let E=Math.atan2(_,y*(1-.00669438));for(let g=0;g<5;g++){const D=6378137/Math.sqrt(1-.00669438*Math.sin(E)**2);E=Math.atan2(_,y*(1-.00669438*D/D))}e.push([E*180/Math.PI,m*180/Math.PI])}return e}const Zg={a:6378137,f:1/298.257223563},Ef={a:6378245,f:1/298.3};function ka(t,e,n,r){const s=r.a,o=r.f,h=2*o-o*o,f=t*Math.PI/180,l=e*Math.PI/180,d=Math.sin(f),v=Math.cos(f),_=s/Math.sqrt(1-h*d*d),m=(_+n)*v*Math.cos(l),y=(_+n)*v*Math.sin(l),E=(_*(1-h)+n)*d;return[m,y,E]}const qg=[[51.494994,31.159013,5698903784e-3,4206988506e-3],[51.525657,32.500554,5701461986e-3,4300154764e-3],[51.678669,33.900568,5719414881e-3,4396990645e-3],[49.422179,31.240523,5468237381e-3,4208738835e-3],[49.398545,32.592473,5464849651e-3,4306827214e-3],[49.343724,33.950651,5459760597e-3,4405528181e-3],[46.614316,31.092164,5156228487e-3,4192272332e-3],[46.074748,32.501527,5095287814e-3,4300231941e-3],[44.396419,33.925787,4909752662e-3,4413706609e-3]];Ti.defs("SK63","+proj=tmerc +lat_0=0 +lon_0=32.5 +k=1 +x_0=4300000 +y_0=0 +ellps=krass +units=m +no_defs");const er=[],is=[];qg.forEach(([t,e,n,r])=>{const[s,o,h]=ka(t,e,0,Zg),[f,l]=Ti("SK63","WGS84",[r,n]),[d,v,_]=ka(l,f,0,Ef);er.push([1,0,0,0,_,-v,d]),er.push([0,1,0,-_,0,d,v]),er.push([0,0,1,v,-d,0,_]),is.push(s-d),is.push(o-v),is.push(h-_)});function Ug(t){return t[0].map((e,n)=>t.map(r=>r[n]))}function fo(t,e){return t.map(n=>e[0].map((r,s)=>n.reduce((o,h,f)=>o+h*e[f][s],0)))}function Wg(t){return yf(t)}const Mf=Ug(er),$g=fo(Mf,er),Hg=fo(Mf,is.map(t=>[t])),jg=fo(Wg($g),Hg),[Vg,Xg,Kg,nh,rh,sh,Aa]=jg.map(t=>t[0]);function Jg(t=[]){const e=[];for(const[n,r]of t){const[s,o]=Ti("SK63","WGS84",[n,r]),[h,f,l]=ka(o,s,0,Ef),d=Vg+(1+Aa)*h+-sh*f+rh*l,v=Xg+sh*h+(1+Aa)*f+-nh*l,_=Kg+-rh*h+nh*f+(1+Aa)*l,m=Math.atan2(v,d),y=Math.sqrt(d*d+v*v);let E=Math.atan2(_,y*(1-.00669438));for(let g=0;g<5;g++){const D=6378137/Math.sqrt(1-.00669438*Math.sin(E)**2);E=Math.atan2(_,y*(1-.00669438*D/D))}e.push([E*180/Math.PI,m*180/Math.PI])}return e}const Yg=document.getElementById("fileInput"),ir=document.querySelector(".coordinate_system"),ah=document.querySelector(".coordinate_of_area"),Ss=document.getElementById("output"),Qg=document.getElementById("firstNum"),Af=document.getElementById("changeXYBtn"),Cf=document.getElementById("saveBtn");let vi,nr=!0;Yg.addEventListener("change",t2);Qg.addEventListener("change",e2);Af.addEventListener("click",i2);Cf.addEventListener("click",n2);function t2(t){vi=t.target.files[0],vi&&(ir.style.color="inherit",ir.style.display="block",ah.style.display="block",Af.style.display="block",Cf.style.display="block",Za(vi,ir,Ss,nr).then(e=>{const n=e[0][0].toString()[0];let r=[];switch(n){case"3":r=kg(e);break;case"4":r=Jg(e);break}console.log(r);const s=r.reduce(([o,h],[f,l],d)=>d<r.length-1?[o+f,h+l]:[(o+f)/r.length,(h+l)/r.length]);ah.textContent=s.map(o=>o.toFixed(8)).join(", "),Fl(s,r)}).catch(e=>{}))}function e2(){vi&&Za(vi,ir,Ss,nr)}function i2(){nr=!nr,!(!vi||!confirm("Змінити X та Y місцями?"))&&Za(vi,ir,Ss,nr)}function n2(){Al.saveAs(new Blob([Ss.textContent]),`${vi.name.slice(0,vi.name.indexOf("."))}.txt`)}
